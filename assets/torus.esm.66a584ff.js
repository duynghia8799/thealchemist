import{c as be}from"./index.js";import{e as ht}from"./abstract-connector.esm.e584ac97.js";import{b as Nt,r as rt,a as xe,c as pi,s as oo,i as so}from"./immutable.420491c8.js";import{a as uo,b as lo}from"./browser.915ea410.js";import{f as Hr,s as fo}from"./index.1c9ebec6.js";function co(e,t){if(e==null)return{};var r={},n=Object.keys(e),i,o;for(o=0;o<n.length;o++)i=n[o],!(t.indexOf(i)>=0)&&(r[i]=e[i]);return r}function ho(e,t){if(e==null)return{};var r=co(e,t),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],!(t.indexOf(n)>=0)&&(!Object.prototype.propertyIsEnumerable.call(e,n)||(r[n]=e[n]))}return r}function H(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Dr={exports:{}};(function(e,t){var r=200,n="__lodash_hash_undefined__",i=800,o=16,c=9007199254740991,v="[object Arguments]",g="[object Array]",S="[object AsyncFunction]",C="[object Boolean]",_="[object Date]",y="[object Error]",P="[object Function]",w="[object GeneratorFunction]",E="[object Map]",L="[object Number]",s="[object Null]",h="[object Object]",T="[object Proxy]",j="[object RegExp]",B="[object Set]",K="[object String]",X="[object Undefined]",G="[object WeakMap]",U="[object ArrayBuffer]",oe="[object DataView]",te="[object Float32Array]",pe="[object Float64Array]",ce="[object Int8Array]",ge="[object Int16Array]",k="[object Int32Array]",N="[object Uint8Array]",p="[object Uint8ClampedArray]",b="[object Uint16Array]",M="[object Uint32Array]",x=/[\\^$.*+?()[\]{}|]/g,q=/^\[object .+?Constructor\]$/,V=/^(?:0|[1-9]\d*)$/,$={};$[te]=$[pe]=$[ce]=$[ge]=$[k]=$[N]=$[p]=$[b]=$[M]=!0,$[v]=$[g]=$[U]=$[C]=$[oe]=$[_]=$[y]=$[P]=$[E]=$[L]=$[h]=$[j]=$[B]=$[K]=$[G]=!1;var ne=typeof be=="object"&&be&&be.Object===Object&&be,se=typeof self=="object"&&self&&self.Object===Object&&self,R=ne||se||Function("return this")(),a=t&&!t.nodeType&&t,u=a&&!0&&e&&!e.nodeType&&e,A=u&&u.exports===a,D=A&&ne.process,f=function(){try{var d=u&&u.require&&u.require("util").types;return d||D&&D.binding&&D.binding("util")}catch{}}(),l=f&&f.isTypedArray;function I(d,m,O){switch(O.length){case 0:return d.call(m);case 1:return d.call(m,O[0]);case 2:return d.call(m,O[0],O[1]);case 3:return d.call(m,O[0],O[1],O[2])}return d.apply(m,O)}function W(d,m){for(var O=-1,F=Array(d);++O<d;)F[O]=m(O);return F}function Q(d){return function(m){return d(m)}}function z(d,m){return d==null?void 0:d[m]}function Z(d,m){return function(O){return d(m(O))}}var Ee=Array.prototype,ke=Function.prototype,Me=Object.prototype,Be=R["__core-js_shared__"],Ie=ke.toString,fe=Me.hasOwnProperty,we=function(){var d=/[^.]+$/.exec(Be&&Be.keys&&Be.keys.IE_PROTO||"");return d?"Symbol(src)_1."+d:""}(),Re=Me.toString,Ge=Ie.call(Object),He=RegExp("^"+Ie.call(fe).replace(x,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),De=A?R.Buffer:void 0,Qr=R.Symbol,en=R.Uint8Array,tn=De?De.allocUnsafe:void 0,rn=Z(Object.getPrototypeOf,Object),nn=Object.create,ra=Me.propertyIsEnumerable,na=Ee.splice,ze=Qr?Qr.toStringTag:void 0,jt=function(){try{var d=ur(Object,"defineProperty");return d({},"",{}),d}catch{}}(),ia=De?De.isBuffer:void 0,an=Math.max,aa=Date.now,on=ur(R,"Map"),_t=ur(Object,"create"),oa=function(){function d(){}return function(m){if(!Je(m))return{};if(nn)return nn(m);d.prototype=m;var O=new d;return d.prototype=void 0,O}}();function Ye(d){var m=-1,O=d==null?0:d.length;for(this.clear();++m<O;){var F=d[m];this.set(F[0],F[1])}}function sa(){this.__data__=_t?_t(null):{},this.size=0}function ua(d){var m=this.has(d)&&delete this.__data__[d];return this.size-=m?1:0,m}function la(d){var m=this.__data__;if(_t){var O=m[d];return O===n?void 0:O}return fe.call(m,d)?m[d]:void 0}function fa(d){var m=this.__data__;return _t?m[d]!==void 0:fe.call(m,d)}function da(d,m){var O=this.__data__;return this.size+=this.has(d)?0:1,O[d]=_t&&m===void 0?n:m,this}Ye.prototype.clear=sa,Ye.prototype.delete=ua,Ye.prototype.get=la,Ye.prototype.has=fa,Ye.prototype.set=da;function Ue(d){var m=-1,O=d==null?0:d.length;for(this.clear();++m<O;){var F=d[m];this.set(F[0],F[1])}}function ca(){this.__data__=[],this.size=0}function ha(d){var m=this.__data__,O=xt(m,d);if(O<0)return!1;var F=m.length-1;return O==F?m.pop():na.call(m,O,1),--this.size,!0}function pa(d){var m=this.__data__,O=xt(m,d);return O<0?void 0:m[O][1]}function ga(d){return xt(this.__data__,d)>-1}function va(d,m){var O=this.__data__,F=xt(O,d);return F<0?(++this.size,O.push([d,m])):O[F][1]=m,this}Ue.prototype.clear=ca,Ue.prototype.delete=ha,Ue.prototype.get=pa,Ue.prototype.has=ga,Ue.prototype.set=va;function it(d){var m=-1,O=d==null?0:d.length;for(this.clear();++m<O;){var F=d[m];this.set(F[0],F[1])}}function ya(){this.size=0,this.__data__={hash:new Ye,map:new(on||Ue),string:new Ye}}function ma(d){var m=Bt(this,d).delete(d);return this.size-=m?1:0,m}function ba(d){return Bt(this,d).get(d)}function _a(d){return Bt(this,d).has(d)}function wa(d,m){var O=Bt(this,d),F=O.size;return O.set(d,m),this.size+=O.size==F?0:1,this}it.prototype.clear=ya,it.prototype.delete=ma,it.prototype.get=ba,it.prototype.has=_a,it.prototype.set=wa;function at(d){var m=this.__data__=new Ue(d);this.size=m.size}function Sa(){this.__data__=new Ue,this.size=0}function Ea(d){var m=this.__data__,O=m.delete(d);return this.size=m.size,O}function Ra(d){return this.__data__.get(d)}function Ca(d){return this.__data__.has(d)}function Oa(d,m){var O=this.__data__;if(O instanceof Ue){var F=O.__data__;if(!on||F.length<r-1)return F.push([d,m]),this.size=++O.size,this;O=this.__data__=new it(F)}return O.set(d,m),this.size=O.size,this}at.prototype.clear=Sa,at.prototype.delete=Ea,at.prototype.get=Ra,at.prototype.has=Ca,at.prototype.set=Oa;function Ta(d,m){var O=dr(d),F=!O&&fr(d),J=!O&&!F&&dn(d),re=!O&&!F&&!J&&hn(d),ie=O||F||J||re,Y=ie?W(d.length,String):[],ae=Y.length;for(var Ce in d)(m||fe.call(d,Ce))&&!(ie&&(Ce=="length"||J&&(Ce=="offset"||Ce=="parent")||re&&(Ce=="buffer"||Ce=="byteLength"||Ce=="byteOffset")||ln(Ce,ae)))&&Y.push(Ce);return Y}function or(d,m,O){(O!==void 0&&!Ut(d[m],O)||O===void 0&&!(m in d))&&sr(d,m,O)}function Aa(d,m,O){var F=d[m];(!(fe.call(d,m)&&Ut(F,O))||O===void 0&&!(m in d))&&sr(d,m,O)}function xt(d,m){for(var O=d.length;O--;)if(Ut(d[O][0],m))return O;return-1}function sr(d,m,O){m=="__proto__"&&jt?jt(d,m,{configurable:!0,enumerable:!0,value:O,writable:!0}):d[m]=O}var Pa=Ha();function kt(d){return d==null?d===void 0?X:s:ze&&ze in Object(d)?qa(d):Ya(d)}function sn(d){return wt(d)&&kt(d)==v}function Ma(d){if(!Je(d)||Ga(d))return!1;var m=hr(d)?He:q;return m.test(Qa(d))}function Ia(d){return wt(d)&&cn(d.length)&&!!$[kt(d)]}function Da(d){if(!Je(d))return za(d);var m=fn(d),O=[];for(var F in d)F=="constructor"&&(m||!fe.call(d,F))||O.push(F);return O}function un(d,m,O,F,J){d!==m&&Pa(m,function(re,ie){if(J||(J=new at),Je(re))Na(d,m,ie,O,un,F,J);else{var Y=F?F(lr(d,ie),re,ie+"",d,m,J):void 0;Y===void 0&&(Y=re),or(d,ie,Y)}},pn)}function Na(d,m,O,F,J,re,ie){var Y=lr(d,O),ae=lr(m,O),Ce=ie.get(ae);if(Ce){or(d,O,Ce);return}var Se=re?re(Y,ae,O+"",d,m,ie):void 0,St=Se===void 0;if(St){var pr=dr(ae),gr=!pr&&dn(ae),vn=!pr&&!gr&&hn(ae);Se=ae,pr||gr||vn?dr(Y)?Se=Y:eo(Y)?Se=Ua(Y):gr?(St=!1,Se=xa(ae,!0)):vn?(St=!1,Se=Ba(ae,!0)):Se=[]:to(ae)||fr(ae)?(Se=Y,fr(Y)?Se=ro(Y):(!Je(Y)||hr(Y))&&(Se=$a(ae))):St=!1}St&&(ie.set(ae,Se),J(Se,ae,F,re,ie),ie.delete(ae)),or(d,O,Se)}function La(d,m){return Xa(Ja(d,m,gn),d+"")}var ja=jt?function(d,m){return jt(d,"toString",{configurable:!0,enumerable:!1,value:io(m),writable:!0})}:gn;function xa(d,m){if(m)return d.slice();var O=d.length,F=tn?tn(O):new d.constructor(O);return d.copy(F),F}function ka(d){var m=new d.constructor(d.byteLength);return new en(m).set(new en(d)),m}function Ba(d,m){var O=m?ka(d.buffer):d.buffer;return new d.constructor(O,d.byteOffset,d.length)}function Ua(d,m){var O=-1,F=d.length;for(m||(m=Array(F));++O<F;)m[O]=d[O];return m}function Wa(d,m,O,F){var J=!O;O||(O={});for(var re=-1,ie=m.length;++re<ie;){var Y=m[re],ae=F?F(O[Y],d[Y],Y,O,d):void 0;ae===void 0&&(ae=d[Y]),J?sr(O,Y,ae):Aa(O,Y,ae)}return O}function Fa(d){return La(function(m,O){var F=-1,J=O.length,re=J>1?O[J-1]:void 0,ie=J>2?O[2]:void 0;for(re=d.length>3&&typeof re=="function"?(J--,re):void 0,ie&&Va(O[0],O[1],ie)&&(re=J<3?void 0:re,J=1),m=Object(m);++F<J;){var Y=O[F];Y&&d(m,Y,F,re)}return m})}function Ha(d){return function(m,O,F){for(var J=-1,re=Object(m),ie=F(m),Y=ie.length;Y--;){var ae=ie[d?Y:++J];if(O(re[ae],ae,re)===!1)break}return m}}function Bt(d,m){var O=d.__data__;return Ka(m)?O[typeof m=="string"?"string":"hash"]:O.map}function ur(d,m){var O=z(d,m);return Ma(O)?O:void 0}function qa(d){var m=fe.call(d,ze),O=d[ze];try{d[ze]=void 0;var F=!0}catch{}var J=Re.call(d);return F&&(m?d[ze]=O:delete d[ze]),J}function $a(d){return typeof d.constructor=="function"&&!fn(d)?oa(rn(d)):{}}function ln(d,m){var O=typeof d;return m=m==null?c:m,!!m&&(O=="number"||O!="symbol"&&V.test(d))&&d>-1&&d%1==0&&d<m}function Va(d,m,O){if(!Je(O))return!1;var F=typeof m;return(F=="number"?cr(O)&&ln(m,O.length):F=="string"&&m in O)?Ut(O[m],d):!1}function Ka(d){var m=typeof d;return m=="string"||m=="number"||m=="symbol"||m=="boolean"?d!=="__proto__":d===null}function Ga(d){return!!we&&we in d}function fn(d){var m=d&&d.constructor,O=typeof m=="function"&&m.prototype||Me;return d===O}function za(d){var m=[];if(d!=null)for(var O in Object(d))m.push(O);return m}function Ya(d){return Re.call(d)}function Ja(d,m,O){return m=an(m===void 0?d.length-1:m,0),function(){for(var F=arguments,J=-1,re=an(F.length-m,0),ie=Array(re);++J<re;)ie[J]=F[m+J];J=-1;for(var Y=Array(m+1);++J<m;)Y[J]=F[J];return Y[m]=O(ie),I(d,this,Y)}}function lr(d,m){if(!(m==="constructor"&&typeof d[m]=="function")&&m!="__proto__")return d[m]}var Xa=Za(ja);function Za(d){var m=0,O=0;return function(){var F=aa(),J=o-(F-O);if(O=F,J>0){if(++m>=i)return arguments[0]}else m=0;return d.apply(void 0,arguments)}}function Qa(d){if(d!=null){try{return Ie.call(d)}catch{}try{return d+""}catch{}}return""}function Ut(d,m){return d===m||d!==d&&m!==m}var fr=sn(function(){return arguments}())?sn:function(d){return wt(d)&&fe.call(d,"callee")&&!ra.call(d,"callee")},dr=Array.isArray;function cr(d){return d!=null&&cn(d.length)&&!hr(d)}function eo(d){return wt(d)&&cr(d)}var dn=ia||ao;function hr(d){if(!Je(d))return!1;var m=kt(d);return m==P||m==w||m==S||m==T}function cn(d){return typeof d=="number"&&d>-1&&d%1==0&&d<=c}function Je(d){var m=typeof d;return d!=null&&(m=="object"||m=="function")}function wt(d){return d!=null&&typeof d=="object"}function to(d){if(!wt(d)||kt(d)!=h)return!1;var m=rn(d);if(m===null)return!0;var O=fe.call(m,"constructor")&&m.constructor;return typeof O=="function"&&O instanceof O&&Ie.call(O)==Ge}var hn=l?Q(l):Ia;function ro(d){return Wa(d,pn(d))}function pn(d){return cr(d)?Ta(d,!0):Da(d)}var no=Fa(function(d,m,O){un(d,m,O)});function io(d){return function(){return d}}function gn(d){return d}function ao(){return!1}e.exports=no})(Dr,Dr.exports);const gi=Dr.exports;var qr={exports:{}};(function(e){(function(t,r){e.exports?e.exports=r():t.log=r()})(be,function(){var t=function(){},r="undefined",n=typeof window!==r&&typeof window.navigator!==r&&/Trident\/|MSIE /.test(window.navigator.userAgent),i=["trace","debug","info","warn","error"];function o(E,L){var s=E[L];if(typeof s.bind=="function")return s.bind(E);try{return Function.prototype.bind.call(s,E)}catch{return function(){return Function.prototype.apply.apply(s,[E,arguments])}}}function c(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function v(E){return E==="debug"&&(E="log"),typeof console===r?!1:E==="trace"&&n?c:console[E]!==void 0?o(console,E):console.log!==void 0?o(console,"log"):t}function g(E,L){for(var s=0;s<i.length;s++){var h=i[s];this[h]=s<E?t:this.methodFactory(h,E,L)}this.log=this.debug}function S(E,L,s){return function(){typeof console!==r&&(g.call(this,L,s),this[E].apply(this,arguments))}}function C(E,L,s){return v(E)||S.apply(this,arguments)}function _(E,L,s){var h=this,T;L=L==null?"WARN":L;var j="loglevel";typeof E=="string"?j+=":"+E:typeof E=="symbol"&&(j=void 0);function B(U){var oe=(i[U]||"silent").toUpperCase();if(!(typeof window===r||!j)){try{window.localStorage[j]=oe;return}catch{}try{window.document.cookie=encodeURIComponent(j)+"="+oe+";"}catch{}}}function K(){var U;if(!(typeof window===r||!j)){try{U=window.localStorage[j]}catch{}if(typeof U===r)try{var oe=window.document.cookie,te=oe.indexOf(encodeURIComponent(j)+"=");te!==-1&&(U=/^([^;]+)/.exec(oe.slice(te))[1])}catch{}return h.levels[U]===void 0&&(U=void 0),U}}function X(){if(!(typeof window===r||!j)){try{window.localStorage.removeItem(j);return}catch{}try{window.document.cookie=encodeURIComponent(j)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}h.name=E,h.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},h.methodFactory=s||C,h.getLevel=function(){return T},h.setLevel=function(U,oe){if(typeof U=="string"&&h.levels[U.toUpperCase()]!==void 0&&(U=h.levels[U.toUpperCase()]),typeof U=="number"&&U>=0&&U<=h.levels.SILENT){if(T=U,oe!==!1&&B(U),g.call(h,U,E),typeof console===r&&U<h.levels.SILENT)return"No console available for logging"}else throw"log.setLevel() called with invalid level: "+U},h.setDefaultLevel=function(U){L=U,K()||h.setLevel(U,!1)},h.resetLevel=function(){h.setLevel(L,!1),X()},h.enableAll=function(U){h.setLevel(h.levels.TRACE,U)},h.disableAll=function(U){h.setLevel(h.levels.SILENT,U)};var G=K();G==null&&(G=L),h.setLevel(G,!1)}var y=new _,P={};y.getLogger=function(L){if(typeof L!="symbol"&&typeof L!="string"||L==="")throw new TypeError("You must supply a name when creating a logger.");var s=P[L];return s||(s=P[L]=new _(L,y.getLevel(),y.methodFactory)),s};var w=typeof window!==r?window.log:void 0;return y.noConflict=function(){return typeof window!==r&&window.log===y&&(window.log=w),y},y.getLoggers=function(){return P},y.default=y,y})})(qr);const vi=qr.exports;function yn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function mn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?yn(Object(r),!0).forEach(function(n){H(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yn(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}const Nr=vi.getLogger("http-helpers");Nr.setLevel(qr.exports.levels.INFO);let Lr="torus-default";const po="x-api-key";function go(e){Lr=e}async function vo(e,t){let r=null;try{r=new URL(e)}catch{}return fetch(e,t)}function yo(){const e={};return Lr&&(e[po]=Lr),e}function mo(e){Nr.info("Response: ".concat(e.status," ").concat(e.statusText)),Nr.info("Url: ".concat(e.url))}const yi=async function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const n={mode:"cors",headers:{}};r.useAPIKey&&(n.headers=mn(mn({},n.headers),yo()));const i=gi(n,t,{method:"GET"}),o=await vo(e,i);if(o.ok)return o.json();throw mo(o),o};function At(e){return At=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},At(e)}function pt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function bn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function gt(e,t,r){return t&&bn(e.prototype,t),r&&bn(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function he(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Pt(e,t){return Pt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},Pt(e,t)}function vt(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Pt(e,t)}function yt(e,t){if(t&&(At(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return he(e)}function _e(e){return _e=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},_e(e)}var st={exports:{}},mi=ht.exports.EventEmitter,vr,_n;function bo(){if(_n)return vr;_n=1;function e(y,P){var w=Object.keys(y);if(Object.getOwnPropertySymbols){var E=Object.getOwnPropertySymbols(y);P&&(E=E.filter(function(L){return Object.getOwnPropertyDescriptor(y,L).enumerable})),w.push.apply(w,E)}return w}function t(y){for(var P=1;P<arguments.length;P++){var w=arguments[P]!=null?arguments[P]:{};P%2?e(Object(w),!0).forEach(function(E){r(y,E,w[E])}):Object.getOwnPropertyDescriptors?Object.defineProperties(y,Object.getOwnPropertyDescriptors(w)):e(Object(w)).forEach(function(E){Object.defineProperty(y,E,Object.getOwnPropertyDescriptor(w,E))})}return y}function r(y,P,w){return P in y?Object.defineProperty(y,P,{value:w,enumerable:!0,configurable:!0,writable:!0}):y[P]=w,y}function n(y,P){if(!(y instanceof P))throw new TypeError("Cannot call a class as a function")}function i(y,P){for(var w=0;w<P.length;w++){var E=P[w];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(y,E.key,E)}}function o(y,P,w){return P&&i(y.prototype,P),w&&i(y,w),y}var c=Nt,v=c.Buffer,g=rt,S=g.inspect,C=S&&S.custom||"inspect";function _(y,P,w){v.prototype.copy.call(y,P,w)}return vr=function(){function y(){n(this,y),this.head=null,this.tail=null,this.length=0}return o(y,[{key:"push",value:function(w){var E={data:w,next:null};this.length>0?this.tail.next=E:this.head=E,this.tail=E,++this.length}},{key:"unshift",value:function(w){var E={data:w,next:this.head};this.length===0&&(this.tail=E),this.head=E,++this.length}},{key:"shift",value:function(){if(this.length!==0){var w=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,w}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(w){if(this.length===0)return"";for(var E=this.head,L=""+E.data;E=E.next;)L+=w+E.data;return L}},{key:"concat",value:function(w){if(this.length===0)return v.alloc(0);for(var E=v.allocUnsafe(w>>>0),L=this.head,s=0;L;)_(L.data,E,s),s+=L.data.length,L=L.next;return E}},{key:"consume",value:function(w,E){var L;return w<this.head.data.length?(L=this.head.data.slice(0,w),this.head.data=this.head.data.slice(w)):w===this.head.data.length?L=this.shift():L=E?this._getString(w):this._getBuffer(w),L}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(w){var E=this.head,L=1,s=E.data;for(w-=s.length;E=E.next;){var h=E.data,T=w>h.length?h.length:w;if(T===h.length?s+=h:s+=h.slice(0,w),w-=T,w===0){T===h.length?(++L,E.next?this.head=E.next:this.head=this.tail=null):(this.head=E,E.data=h.slice(T));break}++L}return this.length-=L,s}},{key:"_getBuffer",value:function(w){var E=v.allocUnsafe(w),L=this.head,s=1;for(L.data.copy(E),w-=L.data.length;L=L.next;){var h=L.data,T=w>h.length?h.length:w;if(h.copy(E,E.length-w,0,T),w-=T,w===0){T===h.length?(++s,L.next?this.head=L.next:this.head=this.tail=null):(this.head=L,L.data=h.slice(T));break}++s}return this.length-=s,E}},{key:C,value:function(w,E){return S(this,t({},E,{depth:0,customInspect:!1}))}}]),y}(),vr}function _o(e,t){var r=this,n=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return n||i?(t?t(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(jr,this,e)):process.nextTick(jr,this,e)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(o){!t&&o?r._writableState?r._writableState.errorEmitted?process.nextTick(Ft,r):(r._writableState.errorEmitted=!0,process.nextTick(wn,r,o)):process.nextTick(wn,r,o):t?(process.nextTick(Ft,r),t(o)):process.nextTick(Ft,r)}),this)}function wn(e,t){jr(e,t),Ft(e)}function Ft(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function wo(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function jr(e,t){e.emit("error",t)}function So(e,t){var r=e._readableState,n=e._writableState;r&&r.autoDestroy||n&&n.autoDestroy?e.destroy(t):e.emit("error",t)}var bi={destroy:_o,undestroy:wo,errorOrDestroy:So},nt={};function Eo(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var _i={};function Pe(e,t,r){r||(r=Error);function n(o,c,v){return typeof t=="string"?t:t(o,c,v)}var i=function(o){Eo(c,o);function c(v,g,S){return o.call(this,n(v,g,S))||this}return c}(r);i.prototype.name=r.name,i.prototype.code=e,_i[e]=i}function Sn(e,t){if(Array.isArray(e)){var r=e.length;return e=e.map(function(n){return String(n)}),r>2?"one of ".concat(t," ").concat(e.slice(0,r-1).join(", "),", or ")+e[r-1]:r===2?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}else return"of ".concat(t," ").concat(String(e))}function Ro(e,t,r){return e.substr(!r||r<0?0:+r,t.length)===t}function Co(e,t,r){return(r===void 0||r>e.length)&&(r=e.length),e.substring(r-t.length,r)===t}function Oo(e,t,r){return typeof r!="number"&&(r=0),r+t.length>e.length?!1:e.indexOf(t,r)!==-1}Pe("ERR_INVALID_OPT_VALUE",function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'},TypeError);Pe("ERR_INVALID_ARG_TYPE",function(e,t,r){var n;typeof t=="string"&&Ro(t,"not ")?(n="must not be",t=t.replace(/^not /,"")):n="must be";var i;if(Co(e," argument"))i="The ".concat(e," ").concat(n," ").concat(Sn(t,"type"));else{var o=Oo(e,".")?"property":"argument";i='The "'.concat(e,'" ').concat(o," ").concat(n," ").concat(Sn(t,"type"))}return i+=". Received type ".concat(typeof r),i},TypeError);Pe("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF");Pe("ERR_METHOD_NOT_IMPLEMENTED",function(e){return"The "+e+" method is not implemented"});Pe("ERR_STREAM_PREMATURE_CLOSE","Premature close");Pe("ERR_STREAM_DESTROYED",function(e){return"Cannot call "+e+" after a stream was destroyed"});Pe("ERR_MULTIPLE_CALLBACK","Callback called multiple times");Pe("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable");Pe("ERR_STREAM_WRITE_AFTER_END","write after end");Pe("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);Pe("ERR_UNKNOWN_ENCODING",function(e){return"Unknown encoding: "+e},TypeError);Pe("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");nt.codes=_i;var To=nt.codes.ERR_INVALID_OPT_VALUE;function Ao(e,t,r){return e.highWaterMark!=null?e.highWaterMark:t?e[r]:null}function Po(e,t,r,n){var i=Ao(t,n,r);if(i!=null){if(!(isFinite(i)&&Math.floor(i)===i)||i<0){var o=n?r:"highWaterMark";throw new To(o,i)}return Math.floor(i)}return e.objectMode?16:16*1024}var wi={getHighWaterMark:Po},yr,En;function Si(){if(En)return yr;En=1,yr=G;function e(R){var a=this;this.next=null,this.entry=null,this.finish=function(){se(a,R)}}var t;G.WritableState=K;var r={deprecate:pi},n=mi,i=Nt.Buffer,o=be.Uint8Array||function(){};function c(R){return i.from(R)}function v(R){return i.isBuffer(R)||R instanceof o}var g=bi,S=wi,C=S.getHighWaterMark,_=nt.codes,y=_.ERR_INVALID_ARG_TYPE,P=_.ERR_METHOD_NOT_IMPLEMENTED,w=_.ERR_MULTIPLE_CALLBACK,E=_.ERR_STREAM_CANNOT_PIPE,L=_.ERR_STREAM_DESTROYED,s=_.ERR_STREAM_NULL_VALUES,h=_.ERR_STREAM_WRITE_AFTER_END,T=_.ERR_UNKNOWN_ENCODING,j=g.errorOrDestroy;xe.exports(G,n);function B(){}function K(R,a,u){t=t||ut(),R=R||{},typeof u!="boolean"&&(u=a instanceof t),this.objectMode=!!R.objectMode,u&&(this.objectMode=this.objectMode||!!R.writableObjectMode),this.highWaterMark=C(this,R,"writableHighWaterMark",u),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var A=R.decodeStrings===!1;this.decodeStrings=!A,this.defaultEncoding=R.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(D){N(a,D)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=R.emitClose!==!1,this.autoDestroy=!!R.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new e(this)}K.prototype.getBuffer=function(){for(var a=this.bufferedRequest,u=[];a;)u.push(a),a=a.next;return u},function(){try{Object.defineProperty(K.prototype,"buffer",{get:r.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var X;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(X=Function.prototype[Symbol.hasInstance],Object.defineProperty(G,Symbol.hasInstance,{value:function(a){return X.call(this,a)?!0:this!==G?!1:a&&a._writableState instanceof K}})):X=function(a){return a instanceof this};function G(R){t=t||ut();var a=this instanceof t;if(!a&&!X.call(G,this))return new G(R);this._writableState=new K(R,this,a),this.writable=!0,R&&(typeof R.write=="function"&&(this._write=R.write),typeof R.writev=="function"&&(this._writev=R.writev),typeof R.destroy=="function"&&(this._destroy=R.destroy),typeof R.final=="function"&&(this._final=R.final)),n.call(this)}G.prototype.pipe=function(){j(this,new E)};function U(R,a){var u=new h;j(R,u),process.nextTick(a,u)}function oe(R,a,u,A){var D;return u===null?D=new s:typeof u!="string"&&!a.objectMode&&(D=new y("chunk",["string","Buffer"],u)),D?(j(R,D),process.nextTick(A,D),!1):!0}G.prototype.write=function(R,a,u){var A=this._writableState,D=!1,f=!A.objectMode&&v(R);return f&&!i.isBuffer(R)&&(R=c(R)),typeof a=="function"&&(u=a,a=null),f?a="buffer":a||(a=A.defaultEncoding),typeof u!="function"&&(u=B),A.ending?U(this,u):(f||oe(this,A,R,u))&&(A.pendingcb++,D=pe(this,A,f,R,a,u)),D},G.prototype.cork=function(){this._writableState.corked++},G.prototype.uncork=function(){var R=this._writableState;R.corked&&(R.corked--,!R.writing&&!R.corked&&!R.bufferProcessing&&R.bufferedRequest&&M(this,R))},G.prototype.setDefaultEncoding=function(a){if(typeof a=="string"&&(a=a.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((a+"").toLowerCase())>-1))throw new T(a);return this._writableState.defaultEncoding=a,this},Object.defineProperty(G.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function te(R,a,u){return!R.objectMode&&R.decodeStrings!==!1&&typeof a=="string"&&(a=i.from(a,u)),a}Object.defineProperty(G.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function pe(R,a,u,A,D,f){if(!u){var l=te(a,A,D);A!==l&&(u=!0,D="buffer",A=l)}var I=a.objectMode?1:A.length;a.length+=I;var W=a.length<a.highWaterMark;if(W||(a.needDrain=!0),a.writing||a.corked){var Q=a.lastBufferedRequest;a.lastBufferedRequest={chunk:A,encoding:D,isBuf:u,callback:f,next:null},Q?Q.next=a.lastBufferedRequest:a.bufferedRequest=a.lastBufferedRequest,a.bufferedRequestCount+=1}else ce(R,a,!1,I,A,D,f);return W}function ce(R,a,u,A,D,f,l){a.writelen=A,a.writecb=l,a.writing=!0,a.sync=!0,a.destroyed?a.onwrite(new L("write")):u?R._writev(D,a.onwrite):R._write(D,f,a.onwrite),a.sync=!1}function ge(R,a,u,A,D){--a.pendingcb,u?(process.nextTick(D,A),process.nextTick($,R,a),R._writableState.errorEmitted=!0,j(R,A)):(D(A),R._writableState.errorEmitted=!0,j(R,A),$(R,a))}function k(R){R.writing=!1,R.writecb=null,R.length-=R.writelen,R.writelen=0}function N(R,a){var u=R._writableState,A=u.sync,D=u.writecb;if(typeof D!="function")throw new w;if(k(u),a)ge(R,u,A,a,D);else{var f=x(u)||R.destroyed;!f&&!u.corked&&!u.bufferProcessing&&u.bufferedRequest&&M(R,u),A?process.nextTick(p,R,u,f,D):p(R,u,f,D)}}function p(R,a,u,A){u||b(R,a),a.pendingcb--,A(),$(R,a)}function b(R,a){a.length===0&&a.needDrain&&(a.needDrain=!1,R.emit("drain"))}function M(R,a){a.bufferProcessing=!0;var u=a.bufferedRequest;if(R._writev&&u&&u.next){var A=a.bufferedRequestCount,D=new Array(A),f=a.corkedRequestsFree;f.entry=u;for(var l=0,I=!0;u;)D[l]=u,u.isBuf||(I=!1),u=u.next,l+=1;D.allBuffers=I,ce(R,a,!0,a.length,D,"",f.finish),a.pendingcb++,a.lastBufferedRequest=null,f.next?(a.corkedRequestsFree=f.next,f.next=null):a.corkedRequestsFree=new e(a),a.bufferedRequestCount=0}else{for(;u;){var W=u.chunk,Q=u.encoding,z=u.callback,Z=a.objectMode?1:W.length;if(ce(R,a,!1,Z,W,Q,z),u=u.next,a.bufferedRequestCount--,a.writing)break}u===null&&(a.lastBufferedRequest=null)}a.bufferedRequest=u,a.bufferProcessing=!1}G.prototype._write=function(R,a,u){u(new P("_write()"))},G.prototype._writev=null,G.prototype.end=function(R,a,u){var A=this._writableState;return typeof R=="function"?(u=R,R=null,a=null):typeof a=="function"&&(u=a,a=null),R!=null&&this.write(R,a),A.corked&&(A.corked=1,this.uncork()),A.ending||ne(this,A,u),this},Object.defineProperty(G.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function x(R){return R.ending&&R.length===0&&R.bufferedRequest===null&&!R.finished&&!R.writing}function q(R,a){R._final(function(u){a.pendingcb--,u&&j(R,u),a.prefinished=!0,R.emit("prefinish"),$(R,a)})}function V(R,a){!a.prefinished&&!a.finalCalled&&(typeof R._final=="function"&&!a.destroyed?(a.pendingcb++,a.finalCalled=!0,process.nextTick(q,R,a)):(a.prefinished=!0,R.emit("prefinish")))}function $(R,a){var u=x(a);if(u&&(V(R,a),a.pendingcb===0&&(a.finished=!0,R.emit("finish"),a.autoDestroy))){var A=R._readableState;(!A||A.autoDestroy&&A.endEmitted)&&R.destroy()}return u}function ne(R,a,u){a.ending=!0,$(R,a),u&&(a.finished?process.nextTick(u):R.once("finish",u)),a.ended=!0,R.writable=!1}function se(R,a,u){var A=R.entry;for(R.entry=null;A;){var D=A.callback;a.pendingcb--,D(u),A=A.next}a.corkedRequestsFree.next=R}return Object.defineProperty(G.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(a){!this._writableState||(this._writableState.destroyed=a)}}),G.prototype.destroy=g.destroy,G.prototype._undestroy=g.undestroy,G.prototype._destroy=function(R,a){a(R)},yr}var mr,Rn;function ut(){if(Rn)return mr;Rn=1;var e=Object.keys||function(S){var C=[];for(var _ in S)C.push(_);return C};mr=c;var t=Ri(),r=Si();xe.exports(c,t);for(var n=e(r.prototype),i=0;i<n.length;i++){var o=n[i];c.prototype[o]||(c.prototype[o]=r.prototype[o])}function c(S){if(!(this instanceof c))return new c(S);t.call(this,S),r.call(this,S),this.allowHalfOpen=!0,S&&(S.readable===!1&&(this.readable=!1),S.writable===!1&&(this.writable=!1),S.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",v)))}Object.defineProperty(c.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(c.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(c.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function v(){this._writableState.ended||process.nextTick(g,this)}function g(S){S.end()}return Object.defineProperty(c.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(C){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=C,this._writableState.destroyed=C)}}),mr}var br={},Cn;function On(){if(Cn)return br;Cn=1;var e=oo.exports.Buffer,t=e.isEncoding||function(s){switch(s=""+s,s&&s.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function r(s){if(!s)return"utf8";for(var h;;)switch(s){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return s;default:if(h)return;s=(""+s).toLowerCase(),h=!0}}function n(s){var h=r(s);if(typeof h!="string"&&(e.isEncoding===t||!t(s)))throw new Error("Unknown encoding: "+s);return h||s}br.StringDecoder=i;function i(s){this.encoding=n(s);var h;switch(this.encoding){case"utf16le":this.text=_,this.end=y,h=4;break;case"utf8":this.fillLast=g,h=4;break;case"base64":this.text=P,this.end=w,h=3;break;default:this.write=E,this.end=L;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=e.allocUnsafe(h)}i.prototype.write=function(s){if(s.length===0)return"";var h,T;if(this.lastNeed){if(h=this.fillLast(s),h===void 0)return"";T=this.lastNeed,this.lastNeed=0}else T=0;return T<s.length?h?h+this.text(s,T):this.text(s,T):h||""},i.prototype.end=C,i.prototype.text=S,i.prototype.fillLast=function(s){if(this.lastNeed<=s.length)return s.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);s.copy(this.lastChar,this.lastTotal-this.lastNeed,0,s.length),this.lastNeed-=s.length};function o(s){return s<=127?0:s>>5===6?2:s>>4===14?3:s>>3===30?4:s>>6===2?-1:-2}function c(s,h,T){var j=h.length-1;if(j<T)return 0;var B=o(h[j]);return B>=0?(B>0&&(s.lastNeed=B-1),B):--j<T||B===-2?0:(B=o(h[j]),B>=0?(B>0&&(s.lastNeed=B-2),B):--j<T||B===-2?0:(B=o(h[j]),B>=0?(B>0&&(B===2?B=0:s.lastNeed=B-3),B):0))}function v(s,h,T){if((h[0]&192)!==128)return s.lastNeed=0,"\uFFFD";if(s.lastNeed>1&&h.length>1){if((h[1]&192)!==128)return s.lastNeed=1,"\uFFFD";if(s.lastNeed>2&&h.length>2&&(h[2]&192)!==128)return s.lastNeed=2,"\uFFFD"}}function g(s){var h=this.lastTotal-this.lastNeed,T=v(this,s);if(T!==void 0)return T;if(this.lastNeed<=s.length)return s.copy(this.lastChar,h,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);s.copy(this.lastChar,h,0,s.length),this.lastNeed-=s.length}function S(s,h){var T=c(this,s,h);if(!this.lastNeed)return s.toString("utf8",h);this.lastTotal=T;var j=s.length-(T-this.lastNeed);return s.copy(this.lastChar,0,j),s.toString("utf8",h,j)}function C(s){var h=s&&s.length?this.write(s):"";return this.lastNeed?h+"\uFFFD":h}function _(s,h){if((s.length-h)%2===0){var T=s.toString("utf16le",h);if(T){var j=T.charCodeAt(T.length-1);if(j>=55296&&j<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=s[s.length-2],this.lastChar[1]=s[s.length-1],T.slice(0,-1)}return T}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=s[s.length-1],s.toString("utf16le",h,s.length-1)}function y(s){var h=s&&s.length?this.write(s):"";if(this.lastNeed){var T=this.lastTotal-this.lastNeed;return h+this.lastChar.toString("utf16le",0,T)}return h}function P(s,h){var T=(s.length-h)%3;return T===0?s.toString("base64",h):(this.lastNeed=3-T,this.lastTotal=3,T===1?this.lastChar[0]=s[s.length-1]:(this.lastChar[0]=s[s.length-2],this.lastChar[1]=s[s.length-1]),s.toString("base64",h,s.length-T))}function w(s){var h=s&&s.length?this.write(s):"";return this.lastNeed?h+this.lastChar.toString("base64",0,3-this.lastNeed):h}function E(s){return s.toString(this.encoding)}function L(s){return s&&s.length?this.write(s):""}return br}var Tn=nt.codes.ERR_STREAM_PREMATURE_CLOSE;function Mo(e){var t=!1;return function(){if(!t){t=!0;for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];e.apply(this,n)}}}function Io(){}function Do(e){return e.setHeader&&typeof e.abort=="function"}function Ei(e,t,r){if(typeof t=="function")return Ei(e,null,t);t||(t={}),r=Mo(r||Io);var n=t.readable||t.readable!==!1&&e.readable,i=t.writable||t.writable!==!1&&e.writable,o=function(){e.writable||v()},c=e._writableState&&e._writableState.finished,v=function(){i=!1,c=!0,n||r.call(e)},g=e._readableState&&e._readableState.endEmitted,S=function(){n=!1,g=!0,i||r.call(e)},C=function(w){r.call(e,w)},_=function(){var w;if(n&&!g)return(!e._readableState||!e._readableState.ended)&&(w=new Tn),r.call(e,w);if(i&&!c)return(!e._writableState||!e._writableState.ended)&&(w=new Tn),r.call(e,w)},y=function(){e.req.on("finish",v)};return Do(e)?(e.on("complete",v),e.on("abort",_),e.req?y():e.on("request",y)):i&&!e._writableState&&(e.on("end",o),e.on("close",o)),e.on("end",S),e.on("finish",v),t.error!==!1&&e.on("error",C),e.on("close",_),function(){e.removeListener("complete",v),e.removeListener("abort",_),e.removeListener("request",y),e.req&&e.req.removeListener("finish",v),e.removeListener("end",o),e.removeListener("close",o),e.removeListener("finish",v),e.removeListener("end",S),e.removeListener("error",C),e.removeListener("close",_)}}var $r=Ei,_r,An;function No(){if(An)return _r;An=1;var e;function t(s,h,T){return h in s?Object.defineProperty(s,h,{value:T,enumerable:!0,configurable:!0,writable:!0}):s[h]=T,s}var r=$r,n=Symbol("lastResolve"),i=Symbol("lastReject"),o=Symbol("error"),c=Symbol("ended"),v=Symbol("lastPromise"),g=Symbol("handlePromise"),S=Symbol("stream");function C(s,h){return{value:s,done:h}}function _(s){var h=s[n];if(h!==null){var T=s[S].read();T!==null&&(s[v]=null,s[n]=null,s[i]=null,h(C(T,!1)))}}function y(s){process.nextTick(_,s)}function P(s,h){return function(T,j){s.then(function(){if(h[c]){T(C(void 0,!0));return}h[g](T,j)},j)}}var w=Object.getPrototypeOf(function(){}),E=Object.setPrototypeOf((e={get stream(){return this[S]},next:function(){var h=this,T=this[o];if(T!==null)return Promise.reject(T);if(this[c])return Promise.resolve(C(void 0,!0));if(this[S].destroyed)return new Promise(function(X,G){process.nextTick(function(){h[o]?G(h[o]):X(C(void 0,!0))})});var j=this[v],B;if(j)B=new Promise(P(j,this));else{var K=this[S].read();if(K!==null)return Promise.resolve(C(K,!1));B=new Promise(this[g])}return this[v]=B,B}},t(e,Symbol.asyncIterator,function(){return this}),t(e,"return",function(){var h=this;return new Promise(function(T,j){h[S].destroy(null,function(B){if(B){j(B);return}T(C(void 0,!0))})})}),e),w),L=function(h){var T,j=Object.create(E,(T={},t(T,S,{value:h,writable:!0}),t(T,n,{value:null,writable:!0}),t(T,i,{value:null,writable:!0}),t(T,o,{value:null,writable:!0}),t(T,c,{value:h._readableState.endEmitted,writable:!0}),t(T,g,{value:function(K,X){var G=j[S].read();G?(j[v]=null,j[n]=null,j[i]=null,K(C(G,!1))):(j[n]=K,j[i]=X)},writable:!0}),T));return j[v]=null,r(h,function(B){if(B&&B.code!=="ERR_STREAM_PREMATURE_CLOSE"){var K=j[i];K!==null&&(j[v]=null,j[n]=null,j[i]=null,K(B)),j[o]=B;return}var X=j[n];X!==null&&(j[v]=null,j[n]=null,j[i]=null,X(C(void 0,!0))),j[c]=!0}),h.on("readable",y.bind(null,j)),j};return _r=L,_r}var wr,Pn;function Lo(){return Pn||(Pn=1,wr=function(){throw new Error("Readable.from is not available in the browser")}),wr}var Sr,Mn;function Ri(){if(Mn)return Sr;Mn=1,Sr=U;var e;U.ReadableState=G,ht.exports.EventEmitter;var t=function(l,I){return l.listeners(I).length},r=mi,n=Nt.Buffer,i=be.Uint8Array||function(){};function o(f){return n.from(f)}function c(f){return n.isBuffer(f)||f instanceof i}var v=rt,g;v&&v.debuglog?g=v.debuglog("stream"):g=function(){};var S=bo(),C=bi,_=wi,y=_.getHighWaterMark,P=nt.codes,w=P.ERR_INVALID_ARG_TYPE,E=P.ERR_STREAM_PUSH_AFTER_EOF,L=P.ERR_METHOD_NOT_IMPLEMENTED,s=P.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,h,T,j;xe.exports(U,r);var B=C.errorOrDestroy,K=["error","close","destroy","pause","resume"];function X(f,l,I){if(typeof f.prependListener=="function")return f.prependListener(l,I);!f._events||!f._events[l]?f.on(l,I):Array.isArray(f._events[l])?f._events[l].unshift(I):f._events[l]=[I,f._events[l]]}function G(f,l,I){e=e||ut(),f=f||{},typeof I!="boolean"&&(I=l instanceof e),this.objectMode=!!f.objectMode,I&&(this.objectMode=this.objectMode||!!f.readableObjectMode),this.highWaterMark=y(this,f,"readableHighWaterMark",I),this.buffer=new S,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=f.emitClose!==!1,this.autoDestroy=!!f.autoDestroy,this.destroyed=!1,this.defaultEncoding=f.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,f.encoding&&(h||(h=On().StringDecoder),this.decoder=new h(f.encoding),this.encoding=f.encoding)}function U(f){if(e=e||ut(),!(this instanceof U))return new U(f);var l=this instanceof e;this._readableState=new G(f,this,l),this.readable=!0,f&&(typeof f.read=="function"&&(this._read=f.read),typeof f.destroy=="function"&&(this._destroy=f.destroy)),r.call(this)}Object.defineProperty(U.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(l){!this._readableState||(this._readableState.destroyed=l)}}),U.prototype.destroy=C.destroy,U.prototype._undestroy=C.undestroy,U.prototype._destroy=function(f,l){l(f)},U.prototype.push=function(f,l){var I=this._readableState,W;return I.objectMode?W=!0:typeof f=="string"&&(l=l||I.defaultEncoding,l!==I.encoding&&(f=n.from(f,l),l=""),W=!0),oe(this,f,l,!1,W)},U.prototype.unshift=function(f){return oe(this,f,null,!0,!1)};function oe(f,l,I,W,Q){g("readableAddChunk",l);var z=f._readableState;if(l===null)z.reading=!1,N(f,z);else{var Z;if(Q||(Z=pe(z,l)),Z)B(f,Z);else if(z.objectMode||l&&l.length>0)if(typeof l!="string"&&!z.objectMode&&Object.getPrototypeOf(l)!==n.prototype&&(l=o(l)),W)z.endEmitted?B(f,new s):te(f,z,l,!0);else if(z.ended)B(f,new E);else{if(z.destroyed)return!1;z.reading=!1,z.decoder&&!I?(l=z.decoder.write(l),z.objectMode||l.length!==0?te(f,z,l,!1):M(f,z)):te(f,z,l,!1)}else W||(z.reading=!1,M(f,z))}return!z.ended&&(z.length<z.highWaterMark||z.length===0)}function te(f,l,I,W){l.flowing&&l.length===0&&!l.sync?(l.awaitDrain=0,f.emit("data",I)):(l.length+=l.objectMode?1:I.length,W?l.buffer.unshift(I):l.buffer.push(I),l.needReadable&&p(f)),M(f,l)}function pe(f,l){var I;return!c(l)&&typeof l!="string"&&l!==void 0&&!f.objectMode&&(I=new w("chunk",["string","Buffer","Uint8Array"],l)),I}U.prototype.isPaused=function(){return this._readableState.flowing===!1},U.prototype.setEncoding=function(f){h||(h=On().StringDecoder);var l=new h(f);this._readableState.decoder=l,this._readableState.encoding=this._readableState.decoder.encoding;for(var I=this._readableState.buffer.head,W="";I!==null;)W+=l.write(I.data),I=I.next;return this._readableState.buffer.clear(),W!==""&&this._readableState.buffer.push(W),this._readableState.length=W.length,this};var ce=1073741824;function ge(f){return f>=ce?f=ce:(f--,f|=f>>>1,f|=f>>>2,f|=f>>>4,f|=f>>>8,f|=f>>>16,f++),f}function k(f,l){return f<=0||l.length===0&&l.ended?0:l.objectMode?1:f!==f?l.flowing&&l.length?l.buffer.head.data.length:l.length:(f>l.highWaterMark&&(l.highWaterMark=ge(f)),f<=l.length?f:l.ended?l.length:(l.needReadable=!0,0))}U.prototype.read=function(f){g("read",f),f=parseInt(f,10);var l=this._readableState,I=f;if(f!==0&&(l.emittedReadable=!1),f===0&&l.needReadable&&((l.highWaterMark!==0?l.length>=l.highWaterMark:l.length>0)||l.ended))return g("read: emitReadable",l.length,l.ended),l.length===0&&l.ended?u(this):p(this),null;if(f=k(f,l),f===0&&l.ended)return l.length===0&&u(this),null;var W=l.needReadable;g("need readable",W),(l.length===0||l.length-f<l.highWaterMark)&&(W=!0,g("length less than watermark",W)),l.ended||l.reading?(W=!1,g("reading or ended",W)):W&&(g("do read"),l.reading=!0,l.sync=!0,l.length===0&&(l.needReadable=!0),this._read(l.highWaterMark),l.sync=!1,l.reading||(f=k(I,l)));var Q;return f>0?Q=a(f,l):Q=null,Q===null?(l.needReadable=l.length<=l.highWaterMark,f=0):(l.length-=f,l.awaitDrain=0),l.length===0&&(l.ended||(l.needReadable=!0),I!==f&&l.ended&&u(this)),Q!==null&&this.emit("data",Q),Q};function N(f,l){if(g("onEofChunk"),!l.ended){if(l.decoder){var I=l.decoder.end();I&&I.length&&(l.buffer.push(I),l.length+=l.objectMode?1:I.length)}l.ended=!0,l.sync?p(f):(l.needReadable=!1,l.emittedReadable||(l.emittedReadable=!0,b(f)))}}function p(f){var l=f._readableState;g("emitReadable",l.needReadable,l.emittedReadable),l.needReadable=!1,l.emittedReadable||(g("emitReadable",l.flowing),l.emittedReadable=!0,process.nextTick(b,f))}function b(f){var l=f._readableState;g("emitReadable_",l.destroyed,l.length,l.ended),!l.destroyed&&(l.length||l.ended)&&(f.emit("readable"),l.emittedReadable=!1),l.needReadable=!l.flowing&&!l.ended&&l.length<=l.highWaterMark,R(f)}function M(f,l){l.readingMore||(l.readingMore=!0,process.nextTick(x,f,l))}function x(f,l){for(;!l.reading&&!l.ended&&(l.length<l.highWaterMark||l.flowing&&l.length===0);){var I=l.length;if(g("maybeReadMore read 0"),f.read(0),I===l.length)break}l.readingMore=!1}U.prototype._read=function(f){B(this,new L("_read()"))},U.prototype.pipe=function(f,l){var I=this,W=this._readableState;switch(W.pipesCount){case 0:W.pipes=f;break;case 1:W.pipes=[W.pipes,f];break;default:W.pipes.push(f);break}W.pipesCount+=1,g("pipe count=%d opts=%j",W.pipesCount,l);var Q=(!l||l.end!==!1)&&f!==process.stdout&&f!==process.stderr,z=Q?Ee:Ge;W.endEmitted?process.nextTick(z):I.once("end",z),f.on("unpipe",Z);function Z(He,De){g("onunpipe"),He===I&&De&&De.hasUnpiped===!1&&(De.hasUnpiped=!0,Be())}function Ee(){g("onend"),f.end()}var ke=q(I);f.on("drain",ke);var Me=!1;function Be(){g("cleanup"),f.removeListener("close",we),f.removeListener("finish",Re),f.removeListener("drain",ke),f.removeListener("error",fe),f.removeListener("unpipe",Z),I.removeListener("end",Ee),I.removeListener("end",Ge),I.removeListener("data",Ie),Me=!0,W.awaitDrain&&(!f._writableState||f._writableState.needDrain)&&ke()}I.on("data",Ie);function Ie(He){g("ondata");var De=f.write(He);g("dest.write",De),De===!1&&((W.pipesCount===1&&W.pipes===f||W.pipesCount>1&&D(W.pipes,f)!==-1)&&!Me&&(g("false write response, pause",W.awaitDrain),W.awaitDrain++),I.pause())}function fe(He){g("onerror",He),Ge(),f.removeListener("error",fe),t(f,"error")===0&&B(f,He)}X(f,"error",fe);function we(){f.removeListener("finish",Re),Ge()}f.once("close",we);function Re(){g("onfinish"),f.removeListener("close",we),Ge()}f.once("finish",Re);function Ge(){g("unpipe"),I.unpipe(f)}return f.emit("pipe",I),W.flowing||(g("pipe resume"),I.resume()),f};function q(f){return function(){var I=f._readableState;g("pipeOnDrain",I.awaitDrain),I.awaitDrain&&I.awaitDrain--,I.awaitDrain===0&&t(f,"data")&&(I.flowing=!0,R(f))}}U.prototype.unpipe=function(f){var l=this._readableState,I={hasUnpiped:!1};if(l.pipesCount===0)return this;if(l.pipesCount===1)return f&&f!==l.pipes?this:(f||(f=l.pipes),l.pipes=null,l.pipesCount=0,l.flowing=!1,f&&f.emit("unpipe",this,I),this);if(!f){var W=l.pipes,Q=l.pipesCount;l.pipes=null,l.pipesCount=0,l.flowing=!1;for(var z=0;z<Q;z++)W[z].emit("unpipe",this,{hasUnpiped:!1});return this}var Z=D(l.pipes,f);return Z===-1?this:(l.pipes.splice(Z,1),l.pipesCount-=1,l.pipesCount===1&&(l.pipes=l.pipes[0]),f.emit("unpipe",this,I),this)},U.prototype.on=function(f,l){var I=r.prototype.on.call(this,f,l),W=this._readableState;return f==="data"?(W.readableListening=this.listenerCount("readable")>0,W.flowing!==!1&&this.resume()):f==="readable"&&!W.endEmitted&&!W.readableListening&&(W.readableListening=W.needReadable=!0,W.flowing=!1,W.emittedReadable=!1,g("on readable",W.length,W.reading),W.length?p(this):W.reading||process.nextTick($,this)),I},U.prototype.addListener=U.prototype.on,U.prototype.removeListener=function(f,l){var I=r.prototype.removeListener.call(this,f,l);return f==="readable"&&process.nextTick(V,this),I},U.prototype.removeAllListeners=function(f){var l=r.prototype.removeAllListeners.apply(this,arguments);return(f==="readable"||f===void 0)&&process.nextTick(V,this),l};function V(f){var l=f._readableState;l.readableListening=f.listenerCount("readable")>0,l.resumeScheduled&&!l.paused?l.flowing=!0:f.listenerCount("data")>0&&f.resume()}function $(f){g("readable nexttick read 0"),f.read(0)}U.prototype.resume=function(){var f=this._readableState;return f.flowing||(g("resume"),f.flowing=!f.readableListening,ne(this,f)),f.paused=!1,this};function ne(f,l){l.resumeScheduled||(l.resumeScheduled=!0,process.nextTick(se,f,l))}function se(f,l){g("resume",l.reading),l.reading||f.read(0),l.resumeScheduled=!1,f.emit("resume"),R(f),l.flowing&&!l.reading&&f.read(0)}U.prototype.pause=function(){return g("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(g("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function R(f){var l=f._readableState;for(g("flow",l.flowing);l.flowing&&f.read()!==null;);}U.prototype.wrap=function(f){var l=this,I=this._readableState,W=!1;f.on("end",function(){if(g("wrapped end"),I.decoder&&!I.ended){var Z=I.decoder.end();Z&&Z.length&&l.push(Z)}l.push(null)}),f.on("data",function(Z){if(g("wrapped data"),I.decoder&&(Z=I.decoder.write(Z)),!(I.objectMode&&Z==null)&&!(!I.objectMode&&(!Z||!Z.length))){var Ee=l.push(Z);Ee||(W=!0,f.pause())}});for(var Q in f)this[Q]===void 0&&typeof f[Q]=="function"&&(this[Q]=function(Ee){return function(){return f[Ee].apply(f,arguments)}}(Q));for(var z=0;z<K.length;z++)f.on(K[z],this.emit.bind(this,K[z]));return this._read=function(Z){g("wrapped _read",Z),W&&(W=!1,f.resume())},this},typeof Symbol=="function"&&(U.prototype[Symbol.asyncIterator]=function(){return T===void 0&&(T=No()),T(this)}),Object.defineProperty(U.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(U.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(U.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(l){this._readableState&&(this._readableState.flowing=l)}}),U._fromList=a,Object.defineProperty(U.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function a(f,l){if(l.length===0)return null;var I;return l.objectMode?I=l.buffer.shift():!f||f>=l.length?(l.decoder?I=l.buffer.join(""):l.buffer.length===1?I=l.buffer.first():I=l.buffer.concat(l.length),l.buffer.clear()):I=l.buffer.consume(f,l.decoder),I}function u(f){var l=f._readableState;g("endReadable",l.endEmitted),l.endEmitted||(l.ended=!0,process.nextTick(A,l,f))}function A(f,l){if(g("endReadableNT",f.endEmitted,f.length),!f.endEmitted&&f.length===0&&(f.endEmitted=!0,l.readable=!1,l.emit("end"),f.autoDestroy)){var I=l._writableState;(!I||I.autoDestroy&&I.finished)&&l.destroy()}}typeof Symbol=="function"&&(U.from=function(f,l){return j===void 0&&(j=Lo()),j(U,f,l)});function D(f,l){for(var I=0,W=f.length;I<W;I++)if(f[I]===l)return I;return-1}return Sr}var Ci=We,Kt=nt.codes,jo=Kt.ERR_METHOD_NOT_IMPLEMENTED,xo=Kt.ERR_MULTIPLE_CALLBACK,ko=Kt.ERR_TRANSFORM_ALREADY_TRANSFORMING,Bo=Kt.ERR_TRANSFORM_WITH_LENGTH_0,Gt=ut();xe.exports(We,Gt);function Uo(e,t){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(n===null)return this.emit("error",new xo);r.writechunk=null,r.writecb=null,t!=null&&this.push(t),n(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function We(e){if(!(this instanceof We))return new We(e);Gt.call(this,e),this._transformState={afterTransform:Uo.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&(typeof e.transform=="function"&&(this._transform=e.transform),typeof e.flush=="function"&&(this._flush=e.flush)),this.on("prefinish",Wo)}function Wo(){var e=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(t,r){In(e,t,r)}):In(this,null,null)}We.prototype.push=function(e,t){return this._transformState.needTransform=!1,Gt.prototype.push.call(this,e,t)};We.prototype._transform=function(e,t,r){r(new jo("_transform()"))};We.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}};We.prototype._read=function(e){var t=this._transformState;t.writechunk!==null&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0};We.prototype._destroy=function(e,t){Gt.prototype._destroy.call(this,e,function(r){t(r)})};function In(e,t,r){if(t)return e.emit("error",t);if(r!=null&&e.push(r),e._writableState.length)throw new Bo;if(e._transformState.transforming)throw new ko;return e.push(null)}var Fo=Mt,Oi=Ci;xe.exports(Mt,Oi);function Mt(e){if(!(this instanceof Mt))return new Mt(e);Oi.call(this,e)}Mt.prototype._transform=function(e,t,r){r(null,e)};var Er;function Ho(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}}var Ti=nt.codes,qo=Ti.ERR_MISSING_ARGS,$o=Ti.ERR_STREAM_DESTROYED;function Dn(e){if(e)throw e}function Vo(e){return e.setHeader&&typeof e.abort=="function"}function Ko(e,t,r,n){n=Ho(n);var i=!1;e.on("close",function(){i=!0}),Er===void 0&&(Er=$r),Er(e,{readable:t,writable:r},function(c){if(c)return n(c);i=!0,n()});var o=!1;return function(c){if(!i&&!o){if(o=!0,Vo(e))return e.abort();if(typeof e.destroy=="function")return e.destroy();n(c||new $o("pipe"))}}}function Nn(e){e()}function Go(e,t){return e.pipe(t)}function zo(e){return!e.length||typeof e[e.length-1]!="function"?Dn:e.pop()}function Yo(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=zo(t);if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new qo("streams");var i,o=t.map(function(c,v){var g=v<t.length-1,S=v>0;return Ko(c,g,S,function(C){i||(i=C),C&&o.forEach(Nn),!g&&(o.forEach(Nn),n(i))})});return t.reduce(Go)}var Jo=Yo;(function(e,t){t=e.exports=Ri(),t.Stream=t,t.Readable=t,t.Writable=Si(),t.Duplex=ut(),t.Transform=Ci,t.PassThrough=Fo,t.finished=$r,t.pipeline=Jo})(st,st.exports);function Ln(e,t,r,n,i,o,c){try{var v=e[o](c),g=v.value}catch(S){r(S);return}v.done?t(g):Promise.resolve(g).then(n,i)}function Xe(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function c(g){Ln(o,n,i,c,v,"next",g)}function v(g){Ln(o,n,i,c,v,"throw",g)}c(void 0)})}}var Ai={exports:{}},Pi={exports:{}};(function(e){function t(r){return e.exports=t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports})(Pi);(function(e){var t=Pi.exports.default;function r(){e.exports=r=function(){return n},e.exports.__esModule=!0,e.exports.default=e.exports;var n={},i=Object.prototype,o=i.hasOwnProperty,c=Object.defineProperty||function(k,N,p){k[N]=p.value},v=typeof Symbol=="function"?Symbol:{},g=v.iterator||"@@iterator",S=v.asyncIterator||"@@asyncIterator",C=v.toStringTag||"@@toStringTag";function _(k,N,p){return Object.defineProperty(k,N,{value:p,enumerable:!0,configurable:!0,writable:!0}),k[N]}try{_({},"")}catch{_=function(p,b,M){return p[b]=M}}function y(k,N,p,b){var M=N&&N.prototype instanceof E?N:E,x=Object.create(M.prototype),q=new pe(b||[]);return c(x,"_invoke",{value:G(k,p,q)}),x}function P(k,N,p){try{return{type:"normal",arg:k.call(N,p)}}catch(b){return{type:"throw",arg:b}}}n.wrap=y;var w={};function E(){}function L(){}function s(){}var h={};_(h,g,function(){return this});var T=Object.getPrototypeOf,j=T&&T(T(ce([])));j&&j!==i&&o.call(j,g)&&(h=j);var B=s.prototype=E.prototype=Object.create(h);function K(k){["next","throw","return"].forEach(function(N){_(k,N,function(p){return this._invoke(N,p)})})}function X(k,N){function p(M,x,q,V){var $=P(k[M],k,x);if($.type!=="throw"){var ne=$.arg,se=ne.value;return se&&t(se)=="object"&&o.call(se,"__await")?N.resolve(se.__await).then(function(R){p("next",R,q,V)},function(R){p("throw",R,q,V)}):N.resolve(se).then(function(R){ne.value=R,q(ne)},function(R){return p("throw",R,q,V)})}V($.arg)}var b;c(this,"_invoke",{value:function(x,q){function V(){return new N(function($,ne){p(x,q,$,ne)})}return b=b?b.then(V,V):V()}})}function G(k,N,p){var b="suspendedStart";return function(M,x){if(b==="executing")throw new Error("Generator is already running");if(b==="completed"){if(M==="throw")throw x;return ge()}for(p.method=M,p.arg=x;;){var q=p.delegate;if(q){var V=U(q,p);if(V){if(V===w)continue;return V}}if(p.method==="next")p.sent=p._sent=p.arg;else if(p.method==="throw"){if(b==="suspendedStart")throw b="completed",p.arg;p.dispatchException(p.arg)}else p.method==="return"&&p.abrupt("return",p.arg);b="executing";var $=P(k,N,p);if($.type==="normal"){if(b=p.done?"completed":"suspendedYield",$.arg===w)continue;return{value:$.arg,done:p.done}}$.type==="throw"&&(b="completed",p.method="throw",p.arg=$.arg)}}}function U(k,N){var p=k.iterator[N.method];if(p===void 0){if(N.delegate=null,N.method==="throw"){if(k.iterator.return&&(N.method="return",N.arg=void 0,U(k,N),N.method==="throw"))return w;N.method="throw",N.arg=new TypeError("The iterator does not provide a 'throw' method")}return w}var b=P(p,k.iterator,N.arg);if(b.type==="throw")return N.method="throw",N.arg=b.arg,N.delegate=null,w;var M=b.arg;return M?M.done?(N[k.resultName]=M.value,N.next=k.nextLoc,N.method!=="return"&&(N.method="next",N.arg=void 0),N.delegate=null,w):M:(N.method="throw",N.arg=new TypeError("iterator result is not an object"),N.delegate=null,w)}function oe(k){var N={tryLoc:k[0]};1 in k&&(N.catchLoc=k[1]),2 in k&&(N.finallyLoc=k[2],N.afterLoc=k[3]),this.tryEntries.push(N)}function te(k){var N=k.completion||{};N.type="normal",delete N.arg,k.completion=N}function pe(k){this.tryEntries=[{tryLoc:"root"}],k.forEach(oe,this),this.reset(!0)}function ce(k){if(k){var N=k[g];if(N)return N.call(k);if(typeof k.next=="function")return k;if(!isNaN(k.length)){var p=-1,b=function M(){for(;++p<k.length;)if(o.call(k,p))return M.value=k[p],M.done=!1,M;return M.value=void 0,M.done=!0,M};return b.next=b}}return{next:ge}}function ge(){return{value:void 0,done:!0}}return L.prototype=s,c(B,"constructor",{value:s,configurable:!0}),c(s,"constructor",{value:L,configurable:!0}),L.displayName=_(s,C,"GeneratorFunction"),n.isGeneratorFunction=function(k){var N=typeof k=="function"&&k.constructor;return!!N&&(N===L||(N.displayName||N.name)==="GeneratorFunction")},n.mark=function(k){return Object.setPrototypeOf?Object.setPrototypeOf(k,s):(k.__proto__=s,_(k,C,"GeneratorFunction")),k.prototype=Object.create(B),k},n.awrap=function(k){return{__await:k}},K(X.prototype),_(X.prototype,S,function(){return this}),n.AsyncIterator=X,n.async=function(k,N,p,b,M){M===void 0&&(M=Promise);var x=new X(y(k,N,p,b),M);return n.isGeneratorFunction(N)?x:x.next().then(function(q){return q.done?q.value:x.next()})},K(B),_(B,C,"Generator"),_(B,g,function(){return this}),_(B,"toString",function(){return"[object Generator]"}),n.keys=function(k){var N=Object(k),p=[];for(var b in N)p.push(b);return p.reverse(),function M(){for(;p.length;){var x=p.pop();if(x in N)return M.value=x,M.done=!1,M}return M.done=!0,M}},n.values=ce,pe.prototype={constructor:pe,reset:function(N){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(te),!N)for(var p in this)p.charAt(0)==="t"&&o.call(this,p)&&!isNaN(+p.slice(1))&&(this[p]=void 0)},stop:function(){this.done=!0;var N=this.tryEntries[0].completion;if(N.type==="throw")throw N.arg;return this.rval},dispatchException:function(N){if(this.done)throw N;var p=this;function b(ne,se){return q.type="throw",q.arg=N,p.next=ne,se&&(p.method="next",p.arg=void 0),!!se}for(var M=this.tryEntries.length-1;M>=0;--M){var x=this.tryEntries[M],q=x.completion;if(x.tryLoc==="root")return b("end");if(x.tryLoc<=this.prev){var V=o.call(x,"catchLoc"),$=o.call(x,"finallyLoc");if(V&&$){if(this.prev<x.catchLoc)return b(x.catchLoc,!0);if(this.prev<x.finallyLoc)return b(x.finallyLoc)}else if(V){if(this.prev<x.catchLoc)return b(x.catchLoc,!0)}else{if(!$)throw new Error("try statement without catch or finally");if(this.prev<x.finallyLoc)return b(x.finallyLoc)}}}},abrupt:function(N,p){for(var b=this.tryEntries.length-1;b>=0;--b){var M=this.tryEntries[b];if(M.tryLoc<=this.prev&&o.call(M,"finallyLoc")&&this.prev<M.finallyLoc){var x=M;break}}x&&(N==="break"||N==="continue")&&x.tryLoc<=p&&p<=x.finallyLoc&&(x=null);var q=x?x.completion:{};return q.type=N,q.arg=p,x?(this.method="next",this.next=x.finallyLoc,w):this.complete(q)},complete:function(N,p){if(N.type==="throw")throw N.arg;return N.type==="break"||N.type==="continue"?this.next=N.arg:N.type==="return"?(this.rval=this.arg=N.arg,this.method="return",this.next="end"):N.type==="normal"&&p&&(this.next=p),w},finish:function(N){for(var p=this.tryEntries.length-1;p>=0;--p){var b=this.tryEntries[p];if(b.finallyLoc===N)return this.complete(b.completion,b.afterLoc),te(b),w}},catch:function(N){for(var p=this.tryEntries.length-1;p>=0;--p){var b=this.tryEntries[p];if(b.tryLoc===N){var M=b.completion;if(M.type==="throw"){var x=M.arg;te(b)}return x}}throw new Error("illegal catch attempt")},delegateYield:function(N,p,b){return this.delegate={iterator:ce(N),resultName:p,nextLoc:b},this.method==="next"&&(this.arg=void 0),w}},n}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports})(Ai);var Ht=Ai.exports(),ve=Ht;try{regeneratorRuntime=Ht}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=Ht:Function("r","regeneratorRuntime = r")(Ht)}var Xo=uo(),Zo={exports:{}},Vr={},Kr={};Object.defineProperty(Kr,"__esModule",{value:!0});function Qo(e){var t=4,r=e.length,n=r%t;if(!n)return e;var i=r,o=t-n,c=r+o,v=Buffer.alloc(c);for(v.write(e);o--;)v.write("=",i++);return v.toString()}Kr.default=Qo;Object.defineProperty(Vr,"__esModule",{value:!0});var es=Kr;function Mi(e,t){return t===void 0&&(t="utf8"),Buffer.isBuffer(e)?xr(e.toString("base64")):xr(Buffer.from(e,t).toString("base64"))}function ts(e,t){return t===void 0&&(t="utf8"),Buffer.from(Gr(e),"base64").toString(t)}function Gr(e){return e=e.toString(),es.default(e).replace(/\-/g,"+").replace(/_/g,"/")}function xr(e){return e.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function rs(e){return Buffer.from(Gr(e),"base64")}var mt=Mi;mt.encode=Mi;mt.decode=ts;mt.toBase64=Gr;mt.fromBase64=xr;mt.toBuffer=rs;Vr.default=mt;(function(e){e.exports=Vr.default,e.exports.default=e.exports})(Zo);const ns=()=>Xo(32).toString("hex");function is(e){return Function.toString.call(e).indexOf("[native code]")!==-1}function as(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function qt(e,t,r){return as()?qt=Reflect.construct.bind():qt=function(i,o,c){var v=[null];v.push.apply(v,o);var g=Function.bind.apply(i,v),S=new g;return c&&Pt(S,c.prototype),S},qt.apply(null,arguments)}function kr(e){var t=typeof Map=="function"?new Map:void 0;return kr=function(n){if(n===null||!is(n))return n;if(typeof n!="function")throw new TypeError("Super expression must either be null or a function");if(typeof t<"u"){if(t.has(n))return t.get(n);t.set(n,i)}function i(){return qt(n,arguments,_e(this).constructor)}return i.prototype=Object.create(n.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),Pt(i,n)},kr(e)}function os(e){if(Array.isArray(e))return e}function ss(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n=[],i=!0,o=!1,c,v;try{for(r=r.call(e);!(i=(c=r.next()).done)&&(n.push(c.value),!(t&&n.length===t));i=!0);}catch(g){o=!0,v=g}finally{try{!i&&r.return!=null&&r.return()}finally{if(o)throw v}}return n}}function jn(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function us(e,t){if(!!e){if(typeof e=="string")return jn(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return jn(e,t)}}function ls(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Rr(e,t){return os(e)||ss(e,t)||us(e,t)||ls()}var Br={},qe={};Object.defineProperty(qe,"__esModule",{value:!0});qe.EthereumProviderError=qe.EthereumRpcError=void 0;const fs=Hr;class Ii extends Error{constructor(t,r,n){if(!Number.isInteger(t))throw new Error('"code" must be an integer.');if(!r||typeof r!="string")throw new Error('"message" must be a nonempty string.');super(r),this.code=t,n!==void 0&&(this.data=n)}serialize(){const t={code:this.code,message:this.message};return this.data!==void 0&&(t.data=this.data),this.stack&&(t.stack=this.stack),t}toString(){return fs.default(this.serialize(),hs,2)}}qe.EthereumRpcError=Ii;class ds extends Ii{constructor(t,r,n){if(!cs(t))throw new Error('"code" must be an integer such that: 1000 <= code <= 4999');super(t,r,n)}}qe.EthereumProviderError=ds;function cs(e){return Number.isInteger(e)&&e>=1e3&&e<=4999}function hs(e,t){if(t!=="[Circular]")return t}var zr={},$e={};Object.defineProperty($e,"__esModule",{value:!0});$e.errorValues=$e.errorCodes=void 0;$e.errorCodes={rpc:{invalidInput:-32e3,resourceNotFound:-32001,resourceUnavailable:-32002,transactionRejected:-32003,methodNotSupported:-32004,limitExceeded:-32005,parse:-32700,invalidRequest:-32600,methodNotFound:-32601,invalidParams:-32602,internal:-32603},provider:{userRejectedRequest:4001,unauthorized:4100,unsupportedMethod:4200,disconnected:4900,chainDisconnected:4901}};$e.errorValues={"-32700":{standard:"JSON RPC 2.0",message:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."},"-32600":{standard:"JSON RPC 2.0",message:"The JSON sent is not a valid Request object."},"-32601":{standard:"JSON RPC 2.0",message:"The method does not exist / is not available."},"-32602":{standard:"JSON RPC 2.0",message:"Invalid method parameter(s)."},"-32603":{standard:"JSON RPC 2.0",message:"Internal JSON-RPC error."},"-32000":{standard:"EIP-1474",message:"Invalid input."},"-32001":{standard:"EIP-1474",message:"Resource not found."},"-32002":{standard:"EIP-1474",message:"Resource unavailable."},"-32003":{standard:"EIP-1474",message:"Transaction rejected."},"-32004":{standard:"EIP-1474",message:"Method not supported."},"-32005":{standard:"EIP-1474",message:"Request limit exceeded."},4001:{standard:"EIP-1193",message:"User rejected the request."},4100:{standard:"EIP-1193",message:"The requested account and/or method has not been authorized by the user."},4200:{standard:"EIP-1193",message:"The requested method is not supported by this Ethereum provider."},4900:{standard:"EIP-1193",message:"The provider is disconnected from all chains."},4901:{standard:"EIP-1193",message:"The provider is disconnected from the specified chain."}};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.serializeError=e.isValidCode=e.getMessageFromCode=e.JSON_RPC_SERVER_ERROR_MESSAGE=void 0;const t=$e,r=qe,n=t.errorCodes.rpc.internal,i="Unspecified error message. This is a bug, please report it.",o={code:n,message:c(n)};e.JSON_RPC_SERVER_ERROR_MESSAGE="Unspecified server error.";function c(y,P=i){if(Number.isInteger(y)){const w=y.toString();if(_(t.errorValues,w))return t.errorValues[w].message;if(S(y))return e.JSON_RPC_SERVER_ERROR_MESSAGE}return P}e.getMessageFromCode=c;function v(y){if(!Number.isInteger(y))return!1;const P=y.toString();return!!(t.errorValues[P]||S(y))}e.isValidCode=v;function g(y,{fallbackError:P=o,shouldIncludeStack:w=!1}={}){var E,L;if(!P||!Number.isInteger(P.code)||typeof P.message!="string")throw new Error("Must provide fallback error with integer number code and string message.");if(y instanceof r.EthereumRpcError)return y.serialize();const s={};if(y&&typeof y=="object"&&!Array.isArray(y)&&_(y,"code")&&v(y.code)){const T=y;s.code=T.code,T.message&&typeof T.message=="string"?(s.message=T.message,_(T,"data")&&(s.data=T.data)):(s.message=c(s.code),s.data={originalError:C(y)})}else{s.code=P.code;const T=(E=y)===null||E===void 0?void 0:E.message;s.message=T&&typeof T=="string"?T:P.message,s.data={originalError:C(y)}}const h=(L=y)===null||L===void 0?void 0:L.stack;return w&&y&&h&&typeof h=="string"&&(s.stack=h),s}e.serializeError=g;function S(y){return y>=-32099&&y<=-32e3}function C(y){return y&&typeof y=="object"&&!Array.isArray(y)?Object.assign({},y):y}function _(y,P){return Object.prototype.hasOwnProperty.call(y,P)}})(zr);var zt={};Object.defineProperty(zt,"__esModule",{value:!0});zt.ethErrors=void 0;const Yr=qe,Di=zr,ye=$e;zt.ethErrors={rpc:{parse:e=>Oe(ye.errorCodes.rpc.parse,e),invalidRequest:e=>Oe(ye.errorCodes.rpc.invalidRequest,e),invalidParams:e=>Oe(ye.errorCodes.rpc.invalidParams,e),methodNotFound:e=>Oe(ye.errorCodes.rpc.methodNotFound,e),internal:e=>Oe(ye.errorCodes.rpc.internal,e),server:e=>{if(!e||typeof e!="object"||Array.isArray(e))throw new Error("Ethereum RPC Server errors must provide single object argument.");const{code:t}=e;if(!Number.isInteger(t)||t>-32005||t<-32099)throw new Error('"code" must be an integer such that: -32099 <= code <= -32005');return Oe(t,e)},invalidInput:e=>Oe(ye.errorCodes.rpc.invalidInput,e),resourceNotFound:e=>Oe(ye.errorCodes.rpc.resourceNotFound,e),resourceUnavailable:e=>Oe(ye.errorCodes.rpc.resourceUnavailable,e),transactionRejected:e=>Oe(ye.errorCodes.rpc.transactionRejected,e),methodNotSupported:e=>Oe(ye.errorCodes.rpc.methodNotSupported,e),limitExceeded:e=>Oe(ye.errorCodes.rpc.limitExceeded,e)},provider:{userRejectedRequest:e=>Et(ye.errorCodes.provider.userRejectedRequest,e),unauthorized:e=>Et(ye.errorCodes.provider.unauthorized,e),unsupportedMethod:e=>Et(ye.errorCodes.provider.unsupportedMethod,e),disconnected:e=>Et(ye.errorCodes.provider.disconnected,e),chainDisconnected:e=>Et(ye.errorCodes.provider.chainDisconnected,e),custom:e=>{if(!e||typeof e!="object"||Array.isArray(e))throw new Error("Ethereum Provider custom errors must provide single object argument.");const{code:t,message:r,data:n}=e;if(!r||typeof r!="string")throw new Error('"message" must be a nonempty string');return new Yr.EthereumProviderError(t,r,n)}}};function Oe(e,t){const[r,n]=Ni(t);return new Yr.EthereumRpcError(e,r||Di.getMessageFromCode(e),n)}function Et(e,t){const[r,n]=Ni(t);return new Yr.EthereumProviderError(e,r||Di.getMessageFromCode(e),n)}function Ni(e){if(e){if(typeof e=="string")return[e];if(typeof e=="object"&&!Array.isArray(e)){const{message:t,data:r}=e;if(t&&typeof t!="string")throw new Error("Must specify string message.");return[t||void 0,r]}}return[]}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.getMessageFromCode=e.serializeError=e.EthereumProviderError=e.EthereumRpcError=e.ethErrors=e.errorCodes=void 0;const t=qe;Object.defineProperty(e,"EthereumRpcError",{enumerable:!0,get:function(){return t.EthereumRpcError}}),Object.defineProperty(e,"EthereumProviderError",{enumerable:!0,get:function(){return t.EthereumProviderError}});const r=zr;Object.defineProperty(e,"serializeError",{enumerable:!0,get:function(){return r.serializeError}}),Object.defineProperty(e,"getMessageFromCode",{enumerable:!0,get:function(){return r.getMessageFromCode}});const n=zt;Object.defineProperty(e,"ethErrors",{enumerable:!0,get:function(){return n.ethErrors}});const i=$e;Object.defineProperty(e,"errorCodes",{enumerable:!0,get:function(){return i.errorCodes}})})(Br);var Lt={exports:{}},ps=Li;function Li(e,t){if(e&&t)return Li(e)(t);if(typeof e!="function")throw new TypeError("need wrapper function");return Object.keys(e).forEach(function(n){r[n]=e[n]}),r;function r(){for(var n=new Array(arguments.length),i=0;i<n.length;i++)n[i]=arguments[i];var o=e.apply(this,n),c=n[n.length-1];return typeof o=="function"&&o!==c&&Object.keys(c).forEach(function(v){o[v]=c[v]}),o}}var ji=ps;Lt.exports=ji($t);Lt.exports.strict=ji(xi);$t.proto=$t(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return $t(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return xi(this)},configurable:!0})});function $t(e){var t=function(){return t.called?t.value:(t.called=!0,t.value=e.apply(this,arguments))};return t.called=!1,t}function xi(e){var t=function(){if(t.called)throw new Error(t.onceError);return t.called=!0,t.value=e.apply(this,arguments)},r=e.name||"Function wrapped with `once`";return t.onceError=r+" shouldn't be called more than once",t.called=!1,t}var gs=Lt.exports,vs=function(){},ys=function(e){return e.setHeader&&typeof e.abort=="function"},ms=function(e){return e.stdio&&Array.isArray(e.stdio)&&e.stdio.length===3},ki=function(e,t,r){if(typeof t=="function")return ki(e,null,t);t||(t={}),r=gs(r||vs);var n=e._writableState,i=e._readableState,o=t.readable||t.readable!==!1&&e.readable,c=t.writable||t.writable!==!1&&e.writable,v=!1,g=function(){e.writable||S()},S=function(){c=!1,o||r.call(e)},C=function(){o=!1,c||r.call(e)},_=function(L){r.call(e,L?new Error("exited with error code: "+L):null)},y=function(L){r.call(e,L)},P=function(){process.nextTick(w)},w=function(){if(!v){if(o&&!(i&&i.ended&&!i.destroyed))return r.call(e,new Error("premature close"));if(c&&!(n&&n.ended&&!n.destroyed))return r.call(e,new Error("premature close"))}},E=function(){e.req.on("finish",S)};return ys(e)?(e.on("complete",S),e.on("abort",P),e.req?E():e.on("request",E)):c&&!n&&(e.on("end",g),e.on("close",g)),ms(e)&&e.on("exit",_),e.on("end",C),e.on("finish",S),t.error!==!1&&e.on("error",y),e.on("close",P),function(){v=!0,e.removeListener("complete",S),e.removeListener("abort",P),e.removeListener("request",E),e.req&&e.req.removeListener("finish",S),e.removeListener("end",g),e.removeListener("close",g),e.removeListener("finish",S),e.removeListener("exit",_),e.removeListener("end",C),e.removeListener("error",y),e.removeListener("close",P)}},Ur=ki,bs=Lt.exports,_s=Ur,Cr=rt,It=function(){},ws=/^v?\.0/.test(process.version),Yt=function(e){return typeof e=="function"},Ss=function(e){return!ws||!Cr?!1:(e instanceof(Cr.ReadStream||It)||e instanceof(Cr.WriteStream||It))&&Yt(e.close)},Es=function(e){return e.setHeader&&Yt(e.abort)},Rs=function(e,t,r,n){n=bs(n);var i=!1;e.on("close",function(){i=!0}),_s(e,{readable:t,writable:r},function(c){if(c)return n(c);i=!0,n()});var o=!1;return function(c){if(!i&&!o){if(o=!0,Ss(e))return e.close(It);if(Es(e))return e.abort();if(Yt(e.destroy))return e.destroy();n(c||new Error("stream was destroyed"))}}},xn=function(e){e()},Cs=function(e,t){return e.pipe(t)},Os=function(){var e=Array.prototype.slice.call(arguments),t=Yt(e[e.length-1]||It)&&e.pop()||It;if(Array.isArray(e[0])&&(e=e[0]),e.length<2)throw new Error("pump requires two streams per minimum");var r,n=e.map(function(i,o){var c=o<e.length-1,v=o>0;return Rs(i,c,v,function(g){r||(r=g),g&&n.forEach(xn),!c&&(n.forEach(xn),t(r))})});return e.reduce(Cs)},Vt=Os;function Ts(e){var t=As();return function(){var n=_e(e),i;if(t){var o=_e(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return yt(this,i)}}function As(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Wt(){}var kn="SYN",Or="ACK",Bn="BRK",Un=function(e){vt(r,e);var t=Ts(r);function r(n){var i,o=n.name,c=n.target,v=n.targetWindow,g=v===void 0?window:v,S=n.targetOrigin,C=S===void 0?"*":S;if(pt(this,r),i=t.call(this,{objectMode:!0}),H(he(i),"_init",void 0),H(he(i),"_haveSyn",void 0),H(he(i),"_name",void 0),H(he(i),"_target",void 0),H(he(i),"_targetWindow",void 0),H(he(i),"_targetOrigin",void 0),H(he(i),"_onMessage",void 0),H(he(i),"_synIntervalId",void 0),!o||!c)throw new Error("Invalid input.");return i._init=!1,i._haveSyn=!1,i._name=o,i._target=c,i._targetWindow=g,i._targetOrigin=C,i._onMessage=i.onMessage.bind(he(i)),i._synIntervalId=null,window.addEventListener("message",i._onMessage,!1),i._handShake(),i}return gt(r,[{key:"_break",value:function(){this.cork(),this._write(Bn,null,Wt),this._haveSyn=!1,this._init=!1}},{key:"_handShake",value:function(){this._write(kn,null,Wt),this.cork()}},{key:"_onData",value:function(i){if(!this._init)i===kn?(this._haveSyn=!0,this._write(Or,null,Wt)):i===Or&&(this._init=!0,this._haveSyn||this._write(Or,null,Wt),this.uncork());else if(i===Bn)this._break();else try{this.push(i)}catch(o){this.emit("error",o)}}},{key:"_postMessage",value:function(i){var o=this._targetOrigin;this._targetWindow.postMessage({target:this._target,data:i},o)}},{key:"onMessage",value:function(i){var o=i.data;this._targetOrigin!=="*"&&i.origin!==this._targetOrigin||i.source!==this._targetWindow||At(o)!=="object"||o.target!==this._name||!o.data||this._onData(o.data)}},{key:"_read",value:function(){}},{key:"_write",value:function(i,o,c){this._postMessage(i),c()}},{key:"_destroy",value:function(){window.removeEventListener("message",this._onMessage,!1)}}]),r}(st.exports.Duplex);function Ps(e){var t=Ms();return function(){var n=_e(e),i;if(t){var o=_e(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return yt(this,i)}}function Ms(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Wn(e,t,r){try{Reflect.apply(e,t,r)}catch(n){setTimeout(function(){throw n})}}function Is(e){for(var t=e.length,r=new Array(t),n=0;n<t;n+=1)r[n]=e[n];return r}var Jt=function(e){vt(r,e);var t=Ps(r);function r(){return pt(this,r),t.apply(this,arguments)}return gt(r,[{key:"emit",value:function(i){var o=i==="error",c=this._events;if(c!==void 0)o=o&&c.error===void 0;else if(!o)return!1;for(var v=arguments.length,g=new Array(v>1?v-1:0),S=1;S<v;S++)g[S-1]=arguments[S];if(o){var C;if(g.length>0&&(C=g[0]),C instanceof Error)throw C;var _=new Error("Unhandled error.".concat(C?" (".concat(C.message,")"):""));throw _.context=C,_}var y=c[i];if(y===void 0)return!1;if(typeof y=="function")Wn(y,this,g);else for(var P=y.length,w=Is(y),E=0;E<P;E+=1)Wn(w[E],this,g);return!0}}]),r}(ht.exports.EventEmitter);function Ds(e){var t=Ns();return function(){var n=_e(e),i;if(t){var o=_e(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return yt(this,i)}}function Ns(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Rt=function(e){vt(r,e);var t=Ds(r);function r(n){var i,o=n.code,c=n.message,v=n.data;if(pt(this,r),!Number.isInteger(o))throw new Error("code must be an integer");if(!c||typeof c!="string")throw new Error("message must be string");return i=t.call(this,c),H(he(i),"code",void 0),H(he(i),"data",void 0),i.code=o,v!==void 0&&(i.data=v),i}return gt(r,[{key:"toString",value:function(){return Hr({code:this.code,message:this.message,data:this.data,stack:this.stack})}}]),r}(kr(Error));function Ls(){var e={};function t(){return!1}var r=new Jt;function n(g){var S=e[g.id];if(!S)throw new Error('StreamMiddleware - Unknown response id "'.concat(g.id,'"'));delete e[g.id],Object.assign(S.res,g),setTimeout(S.end)}function i(g){r.emit("notification",g)}function o(g,S,C){var _;try{var y=!g.id;y?i(g):n(g)}catch(P){_=P}C(_)}var c=new st.exports.Duplex({objectMode:!0,read:t,write:o}),v=function(S,C,_,y){c.push(S),e[S.id]={req:S,res:C,next:_,end:y}};return{events:r,middleware:v,stream:c}}function js(){return function(e,t,r,n){var i=e.id,o=ns();e.id=o,t.id=o,r(function(c){e.id=i,t.id=i,c()})}}function Fn(e,t){var r=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=xs(e))||t&&e&&typeof e.length=="number"){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(S){throw S},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o=!0,c=!1,v;return{s:function(){r=r.call(e)},n:function(){var S=r.next();return o=S.done,S},e:function(S){c=!0,v=S},f:function(){try{!o&&r.return!=null&&r.return()}finally{if(c)throw v}}}}function xs(e,t){if(!!e){if(typeof e=="string")return Hn(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Hn(e,t)}}function Hn(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function qn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function ks(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?qn(Object(r),!0).forEach(function(n){H(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qn(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Bs(e){var t=Us();return function(){var n=_e(e),i;if(t){var o=_e(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return yt(this,i)}}function Us(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Ws=function(e){vt(r,e);var t=Bs(r);function r(){var n;return pt(this,r),n=t.call(this),H(he(n),"_middleware",void 0),n._middleware=[],n}return gt(r,[{key:"push",value:function(i){this._middleware.push(i)}},{key:"handle",value:function(i,o){if(o&&typeof o!="function")throw new Error('"callback" must be a function if provided.');return Array.isArray(i)?o?this._handleBatch(i,o):this._handleBatch(i):o?this._handle(i,o):this._promiseHandle(i)}},{key:"asMiddleware",value:function(){var i=this;return function(){var o=Xe(ve.mark(function c(v,g,S,C){var _,y,P,w,E;return ve.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,r._runAllMiddleware(v,g,i._middleware);case 3:if(_=s.sent,y=Rr(_,3),P=y[0],w=y[1],E=y[2],!w){s.next=12;break}return s.next=11,r._runReturnHandlers(E);case 11:return s.abrupt("return",C(P));case 12:return s.abrupt("return",S(function(){var h=Xe(ve.mark(function T(j){return ve.wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return K.prev=0,K.next=3,r._runReturnHandlers(E);case 3:K.next=8;break;case 5:return K.prev=5,K.t0=K.catch(0),K.abrupt("return",j(K.t0));case 8:return K.abrupt("return",j());case 9:case"end":return K.stop()}},T,null,[[0,5]])}));return function(T){return h.apply(this,arguments)}}()));case 15:return s.prev=15,s.t0=s.catch(0),s.abrupt("return",C(s.t0));case 18:case"end":return s.stop()}},c,null,[[0,15]])}));return function(c,v,g,S){return o.apply(this,arguments)}}()}},{key:"_handleBatch",value:function(){var n=Xe(ve.mark(function o(c,v){var g;return ve.wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return C.prev=0,C.next=3,Promise.all(c.map(this._promiseHandle.bind(this)));case 3:if(g=C.sent,!v){C.next=6;break}return C.abrupt("return",v(null,g));case 6:return C.abrupt("return",g);case 9:if(C.prev=9,C.t0=C.catch(0),!v){C.next=13;break}return C.abrupt("return",v(C.t0));case 13:throw C.t0;case 14:case"end":return C.stop()}},o,this,[[0,9]])}));function i(o,c){return n.apply(this,arguments)}return i}()},{key:"_promiseHandle",value:function(i){var o=this;return new Promise(function(c){o._handle(i,function(v,g){c(g)})})}},{key:"_handle",value:function(){var n=Xe(ve.mark(function o(c,v){var g,S,C,_,y;return ve.wrap(function(w){for(;;)switch(w.prev=w.next){case 0:if(!(!c||Array.isArray(c)||At(c)!=="object")){w.next=3;break}return g=new Rt({code:-32603,message:"request must be plain object"}),w.abrupt("return",v(g,{id:void 0,jsonrpc:"2.0",error:g}));case 3:if(typeof c.method=="string"){w.next=6;break}return S=new Rt({code:-32603,message:"method must be string"}),w.abrupt("return",v(S,{id:c.id,jsonrpc:"2.0",error:S}));case 6:return C=ks({},c),_={id:C.id,jsonrpc:C.jsonrpc},y=null,w.prev=9,w.next=12,this._processRequest(C,_);case 12:w.next=17;break;case 14:w.prev=14,w.t0=w.catch(9),y=w.t0;case 17:return y&&(delete _.result,_.error||(_.error=Br.serializeError(y))),w.abrupt("return",v(y,_));case 19:case"end":return w.stop()}},o,this,[[9,14]])}));function i(o,c){return n.apply(this,arguments)}return i}()},{key:"_processRequest",value:function(){var n=Xe(ve.mark(function o(c,v){var g,S,C,_,y;return ve.wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return w.next=2,r._runAllMiddleware(c,v,this._middleware);case 2:return g=w.sent,S=Rr(g,3),C=S[0],_=S[1],y=S[2],r._checkForCompletion(c,v,_),w.next=10,r._runReturnHandlers(y);case 10:if(!C){w.next=12;break}throw C;case 12:case"end":return w.stop()}},o,this)}));function i(o,c){return n.apply(this,arguments)}return i}()}],[{key:"_runAllMiddleware",value:function(){var n=Xe(ve.mark(function o(c,v,g){var S,C,_,y,P,w,E,L;return ve.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:S=[],C=null,_=!1,y=Fn(g),h.prev=4,y.s();case 6:if((P=y.n()).done){h.next=18;break}return w=P.value,h.next=10,r._runMiddleware(c,v,w,S);case 10:if(E=h.sent,L=Rr(E,2),C=L[0],_=L[1],!_){h.next=16;break}return h.abrupt("break",18);case 16:h.next=6;break;case 18:h.next=23;break;case 20:h.prev=20,h.t0=h.catch(4),y.e(h.t0);case 23:return h.prev=23,y.f(),h.finish(23);case 26:return h.abrupt("return",[C,_,S.reverse()]);case 27:case"end":return h.stop()}},o,null,[[4,20,23,26]])}));function i(o,c,v){return n.apply(this,arguments)}return i}()},{key:"_runMiddleware",value:function(i,o,c,v){return new Promise(function(g){var S=function(y){var P=y||o.error;P&&(o.error=Br.serializeError(P)),g([P,!0])},C=function(y){o.error?S(o.error):(y&&(typeof y!="function"&&S(new Rt({code:-32603,message:"JRPCEngine: 'next' return handlers must be functions"})),v.push(y)),g([null,!1]))};try{c(i,o,C,S)}catch(_){S(_)}})}},{key:"_runReturnHandlers",value:function(){var n=Xe(ve.mark(function o(c){var v,g,S;return ve.wrap(function(_){for(;;)switch(_.prev=_.next){case 0:v=Fn(c),_.prev=1,S=ve.mark(function y(){var P;return ve.wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return P=g.value,E.next=3,new Promise(function(L,s){P(function(h){return h?s(h):L()})});case 3:case"end":return E.stop()}},y)}),v.s();case 4:if((g=v.n()).done){_.next=8;break}return _.delegateYield(S(),"t0",6);case 6:_.next=4;break;case 8:_.next=13;break;case 10:_.prev=10,_.t1=_.catch(1),v.e(_.t1);case 13:return _.prev=13,v.f(),_.finish(13);case 16:case"end":return _.stop()}},o,null,[[1,10,13,16]])}));function i(o){return n.apply(this,arguments)}return i}()},{key:"_checkForCompletion",value:function(i,o,c){if(!("result"in o)&&!("error"in o))throw new Rt({code:-32603,message:"Response has no error or result for request"});if(!c)throw new Rt({code:-32603,message:"Nothing ended request"})}}]),r}(Jt);function Fs(e){var t=Hs();return function(){var n=_e(e),i;if(t){var o=_e(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return yt(this,i)}}function Hs(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var qs=function(e){vt(r,e);var t=Fs(r);function r(n){var i,o=n.parent,c=n.name;return pt(this,r),i=t.call(this,{objectMode:!0}),H(he(i),"_parent",void 0),H(he(i),"_name",void 0),i._parent=o,i._name=c,i}return gt(r,[{key:"_read",value:function(){}},{key:"_write",value:function(i,o,c){this._parent.push({name:this._name,data:i}),c()}}]),r}(st.exports.Duplex);function $n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Vn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?$n(Object(r),!0).forEach(function(n){H(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$n(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function $s(e){var t=Vs();return function(){var n=_e(e),i;if(t){var o=_e(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return yt(this,i)}}function Vs(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Kn=Symbol("IGNORE_SUBSTREAM"),Bi=function(e){vt(r,e);var t=$s(r);function r(){var n,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return pt(this,r),n=t.call(this,Vn(Vn({},i),{},{objectMode:!0})),H(he(n),"_substreams",void 0),H(he(n),"getStream",void 0),n._substreams={},n}return gt(r,[{key:"createStream",value:function(i){if(!i)throw new Error("ObjectMultiplex - name must not be empty");if(this._substreams[i])throw new Error('ObjectMultiplex - Substream for name "'.concat(i,'" already exists'));var o=new qs({parent:this,name:i});return this._substreams[i]=o,Ks(this,function(c){return o.destroy(c||void 0)}),o}},{key:"ignoreStream",value:function(i){if(!i)throw new Error("ObjectMultiplex - name must not be empty");if(this._substreams[i])throw new Error('ObjectMultiplex - Substream for name "'.concat(i,'" already exists'));this._substreams[i]=Kn}},{key:"_read",value:function(){}},{key:"_write",value:function(i,o,c){var v=i.name,g=i.data;if(!v)return window.console.warn('ObjectMultiplex - malformed chunk without name "'.concat(i,'"')),c();var S=this._substreams[v];return S?(S!==Kn&&S.push(g),c()):(window.console.warn('ObjectMultiplex - orphaned data for stream "'.concat(v,'"')),c())}}]),r}(st.exports.Duplex);function Ks(e,t){var r=Lt.exports(t);Ur(e,{readable:!1},r),Ur(e,{writable:!1},r)}function Gs(e){var t=new Bi;return t.getStream=function(n){return this._substreams[n]?this._substreams[n]:this.createStream(n)},Vt(e,t,e,function(r){r&&window.console.error(r)}),t}var Wr={},Xt={};Object.defineProperty(Xt,"__esModule",{value:!0});Xt.storeAsStream=void 0;const zs=rt;class Ys extends zs.Duplex{constructor(t){super({objectMode:!0}),this.resume(),this.handler=r=>this.push(r),this.obsStore=t,this.obsStore.subscribe(this.handler)}pipe(t,r){const n=super.pipe(t,r);return t.write(this.obsStore.getState()),n}_write(t,r,n){this.obsStore.putState(t),n()}_read(t){}_destroy(t,r){this.obsStore.unsubscribe(this.handler),super._destroy(t,r)}}function Js(e){return new Ys(e)}Xt.storeAsStream=Js;var Zt={},bt={},Xs=be&&be.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(bt,"__esModule",{value:!0});bt.ObservableStore=void 0;const Zs=Xs(fo);class Qs extends Zs.default{constructor(t){super(),t?this._state=t:this._state={}}getState(){return this._getState()}putState(t){this._putState(t),this.emit("update",t)}updateState(t){if(t&&typeof t=="object"){const r=this.getState();this.putState(Object.assign(Object.assign({},r),t))}else this.putState(t)}subscribe(t){this.on("update",t)}unsubscribe(t){this.removeListener("update",t)}_getState(){return this._state}_putState(t){this._state=t}}bt.ObservableStore=Qs;Object.defineProperty(Zt,"__esModule",{value:!0});Zt.ComposedStore=void 0;const eu=bt;class tu extends eu.ObservableStore{constructor(t){super({}),this._children=t||{},Object.keys(this._children).forEach(r=>{const n=this._children[r];this._addChild(r,n)})}_addChild(t,r){const n=i=>{const o=this.getState();o[t]=i,this.putState(o)};r.subscribe(n),n(r.getState())}}Zt.ComposedStore=tu;var Qt={};Object.defineProperty(Qt,"__esModule",{value:!0});Qt.MergedStore=void 0;const ru=bt;class nu extends ru.ObservableStore{constructor(t=[]){super({}),this._children=t,t.forEach(r=>this._addChild(r)),this._updateWholeState()}_addChild(t){t.subscribe(()=>this._updateWholeState())}_updateWholeState(){const t=this._children.map(n=>n.getState()),r=Object.assign({},...t);this.putState(r)}}Qt.MergedStore=nu;var er={},tr={exports:{}},Fr={exports:{}},lt={exports:{}};typeof process>"u"||!process.version||process.version.indexOf("v0.")===0||process.version.indexOf("v1.")===0&&process.version.indexOf("v1.8.")!==0?lt.exports={nextTick:iu}:lt.exports=process;function iu(e,t,r,n){if(typeof e!="function")throw new TypeError('"callback" argument must be a function');var i=arguments.length,o,c;switch(i){case 0:case 1:return process.nextTick(e);case 2:return process.nextTick(function(){e.call(null,t)});case 3:return process.nextTick(function(){e.call(null,t,r)});case 4:return process.nextTick(function(){e.call(null,t,r,n)});default:for(o=new Array(i-1),c=0;c<o.length;)o[c++]=arguments[c];return process.nextTick(function(){e.apply(null,o)})}}var au={}.toString,ou=Array.isArray||function(e){return au.call(e)=="[object Array]"},Ui=ht.exports.EventEmitter,ft={exports:{}};(function(e,t){var r=Nt,n=r.Buffer;function i(c,v){for(var g in c)v[g]=c[g]}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?e.exports=r:(i(r,t),t.Buffer=o);function o(c,v,g){return n(c,v,g)}i(n,o),o.from=function(c,v,g){if(typeof c=="number")throw new TypeError("Argument must not be a number");return n(c,v,g)},o.alloc=function(c,v,g){if(typeof c!="number")throw new TypeError("Argument must be a number");var S=n(c);return v!==void 0?typeof g=="string"?S.fill(v,g):S.fill(v):S.fill(0),S},o.allocUnsafe=function(c){if(typeof c!="number")throw new TypeError("Argument must be a number");return n(c)},o.allocUnsafeSlow=function(c){if(typeof c!="number")throw new TypeError("Argument must be a number");return r.SlowBuffer(c)}})(ft,ft.exports);var le={};function su(e){return Array.isArray?Array.isArray(e):rr(e)==="[object Array]"}le.isArray=su;function uu(e){return typeof e=="boolean"}le.isBoolean=uu;function lu(e){return e===null}le.isNull=lu;function fu(e){return e==null}le.isNullOrUndefined=fu;function du(e){return typeof e=="number"}le.isNumber=du;function cu(e){return typeof e=="string"}le.isString=cu;function hu(e){return typeof e=="symbol"}le.isSymbol=hu;function pu(e){return e===void 0}le.isUndefined=pu;function gu(e){return rr(e)==="[object RegExp]"}le.isRegExp=gu;function vu(e){return typeof e=="object"&&e!==null}le.isObject=vu;function yu(e){return rr(e)==="[object Date]"}le.isDate=yu;function mu(e){return rr(e)==="[object Error]"||e instanceof Error}le.isError=mu;function bu(e){return typeof e=="function"}le.isFunction=bu;function _u(e){return e===null||typeof e=="boolean"||typeof e=="number"||typeof e=="string"||typeof e=="symbol"||typeof e>"u"}le.isPrimitive=_u;le.isBuffer=Nt.Buffer.isBuffer;function rr(e){return Object.prototype.toString.call(e)}var Tr={exports:{}},Gn;function wu(){return Gn||(Gn=1,function(e){function t(o,c){if(!(o instanceof c))throw new TypeError("Cannot call a class as a function")}var r=ft.exports.Buffer,n=rt;function i(o,c,v){o.copy(c,v)}e.exports=function(){function o(){t(this,o),this.head=null,this.tail=null,this.length=0}return o.prototype.push=function(v){var g={data:v,next:null};this.length>0?this.tail.next=g:this.head=g,this.tail=g,++this.length},o.prototype.unshift=function(v){var g={data:v,next:this.head};this.length===0&&(this.tail=g),this.head=g,++this.length},o.prototype.shift=function(){if(this.length!==0){var v=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,v}},o.prototype.clear=function(){this.head=this.tail=null,this.length=0},o.prototype.join=function(v){if(this.length===0)return"";for(var g=this.head,S=""+g.data;g=g.next;)S+=v+g.data;return S},o.prototype.concat=function(v){if(this.length===0)return r.alloc(0);if(this.length===1)return this.head.data;for(var g=r.allocUnsafe(v>>>0),S=this.head,C=0;S;)i(S.data,g,C),C+=S.data.length,S=S.next;return g},o}(),n&&n.inspect&&n.inspect.custom&&(e.exports.prototype[n.inspect.custom]=function(){var o=n.inspect({length:this.length});return this.constructor.name+" "+o})}(Tr)),Tr.exports}var zn=lt.exports;function Su(e,t){var r=this,n=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return n||i?(t?t(e):e&&(!this._writableState||!this._writableState.errorEmitted)&&zn.nextTick(Yn,this,e),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(o){!t&&o?(zn.nextTick(Yn,r,o),r._writableState&&(r._writableState.errorEmitted=!0)):t&&t(o)}),this)}function Eu(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function Yn(e,t){e.emit("error",t)}var Wi={destroy:Su,undestroy:Eu},Ar,Jn;function Fi(){if(Jn)return Ar;Jn=1;var e=lt.exports;Ar=E;function t(p){var b=this;this.next=null,this.entry=null,this.finish=function(){N(b,p)}}var r=!process.browser&&["v0.10","v0.9."].indexOf(process.version.slice(0,5))>-1?setImmediate:e.nextTick,n;E.WritableState=P;var i=Object.create(le);i.inherits=xe.exports;var o={deprecate:pi},c=Ui,v=ft.exports.Buffer,g=be.Uint8Array||function(){};function S(p){return v.from(p)}function C(p){return v.isBuffer(p)||p instanceof g}var _=Wi;i.inherits(E,c);function y(){}function P(p,b){n=n||dt(),p=p||{};var M=b instanceof n;this.objectMode=!!p.objectMode,M&&(this.objectMode=this.objectMode||!!p.writableObjectMode);var x=p.highWaterMark,q=p.writableHighWaterMark,V=this.objectMode?16:16*1024;x||x===0?this.highWaterMark=x:M&&(q||q===0)?this.highWaterMark=q:this.highWaterMark=V,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var $=p.decodeStrings===!1;this.decodeStrings=!$,this.defaultEncoding=p.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(ne){X(b,ne)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new t(this)}P.prototype.getBuffer=function(){for(var b=this.bufferedRequest,M=[];b;)M.push(b),b=b.next;return M},function(){try{Object.defineProperty(P.prototype,"buffer",{get:o.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var w;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(w=Function.prototype[Symbol.hasInstance],Object.defineProperty(E,Symbol.hasInstance,{value:function(p){return w.call(this,p)?!0:this!==E?!1:p&&p._writableState instanceof P}})):w=function(p){return p instanceof this};function E(p){if(n=n||dt(),!w.call(E,this)&&!(this instanceof n))return new E(p);this._writableState=new P(p,this),this.writable=!0,p&&(typeof p.write=="function"&&(this._write=p.write),typeof p.writev=="function"&&(this._writev=p.writev),typeof p.destroy=="function"&&(this._destroy=p.destroy),typeof p.final=="function"&&(this._final=p.final)),c.call(this)}E.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))};function L(p,b){var M=new Error("write after end");p.emit("error",M),e.nextTick(b,M)}function s(p,b,M,x){var q=!0,V=!1;return M===null?V=new TypeError("May not write null values to stream"):typeof M!="string"&&M!==void 0&&!b.objectMode&&(V=new TypeError("Invalid non-string/buffer chunk")),V&&(p.emit("error",V),e.nextTick(x,V),q=!1),q}E.prototype.write=function(p,b,M){var x=this._writableState,q=!1,V=!x.objectMode&&C(p);return V&&!v.isBuffer(p)&&(p=S(p)),typeof b=="function"&&(M=b,b=null),V?b="buffer":b||(b=x.defaultEncoding),typeof M!="function"&&(M=y),x.ended?L(this,M):(V||s(this,x,p,M))&&(x.pendingcb++,q=T(this,x,V,p,b,M)),q},E.prototype.cork=function(){var p=this._writableState;p.corked++},E.prototype.uncork=function(){var p=this._writableState;p.corked&&(p.corked--,!p.writing&&!p.corked&&!p.finished&&!p.bufferProcessing&&p.bufferedRequest&&oe(this,p))},E.prototype.setDefaultEncoding=function(b){if(typeof b=="string"&&(b=b.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((b+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+b);return this._writableState.defaultEncoding=b,this};function h(p,b,M){return!p.objectMode&&p.decodeStrings!==!1&&typeof b=="string"&&(b=v.from(b,M)),b}Object.defineProperty(E.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function T(p,b,M,x,q,V){if(!M){var $=h(b,x,q);x!==$&&(M=!0,q="buffer",x=$)}var ne=b.objectMode?1:x.length;b.length+=ne;var se=b.length<b.highWaterMark;if(se||(b.needDrain=!0),b.writing||b.corked){var R=b.lastBufferedRequest;b.lastBufferedRequest={chunk:x,encoding:q,isBuf:M,callback:V,next:null},R?R.next=b.lastBufferedRequest:b.bufferedRequest=b.lastBufferedRequest,b.bufferedRequestCount+=1}else j(p,b,!1,ne,x,q,V);return se}function j(p,b,M,x,q,V,$){b.writelen=x,b.writecb=$,b.writing=!0,b.sync=!0,M?p._writev(q,b.onwrite):p._write(q,V,b.onwrite),b.sync=!1}function B(p,b,M,x,q){--b.pendingcb,M?(e.nextTick(q,x),e.nextTick(ge,p,b),p._writableState.errorEmitted=!0,p.emit("error",x)):(q(x),p._writableState.errorEmitted=!0,p.emit("error",x),ge(p,b))}function K(p){p.writing=!1,p.writecb=null,p.length-=p.writelen,p.writelen=0}function X(p,b){var M=p._writableState,x=M.sync,q=M.writecb;if(K(M),b)B(p,M,x,b,q);else{var V=te(M);!V&&!M.corked&&!M.bufferProcessing&&M.bufferedRequest&&oe(p,M),x?r(G,p,M,V,q):G(p,M,V,q)}}function G(p,b,M,x){M||U(p,b),b.pendingcb--,x(),ge(p,b)}function U(p,b){b.length===0&&b.needDrain&&(b.needDrain=!1,p.emit("drain"))}function oe(p,b){b.bufferProcessing=!0;var M=b.bufferedRequest;if(p._writev&&M&&M.next){var x=b.bufferedRequestCount,q=new Array(x),V=b.corkedRequestsFree;V.entry=M;for(var $=0,ne=!0;M;)q[$]=M,M.isBuf||(ne=!1),M=M.next,$+=1;q.allBuffers=ne,j(p,b,!0,b.length,q,"",V.finish),b.pendingcb++,b.lastBufferedRequest=null,V.next?(b.corkedRequestsFree=V.next,V.next=null):b.corkedRequestsFree=new t(b),b.bufferedRequestCount=0}else{for(;M;){var se=M.chunk,R=M.encoding,a=M.callback,u=b.objectMode?1:se.length;if(j(p,b,!1,u,se,R,a),M=M.next,b.bufferedRequestCount--,b.writing)break}M===null&&(b.lastBufferedRequest=null)}b.bufferedRequest=M,b.bufferProcessing=!1}E.prototype._write=function(p,b,M){M(new Error("_write() is not implemented"))},E.prototype._writev=null,E.prototype.end=function(p,b,M){var x=this._writableState;typeof p=="function"?(M=p,p=null,b=null):typeof b=="function"&&(M=b,b=null),p!=null&&this.write(p,b),x.corked&&(x.corked=1,this.uncork()),!x.ending&&!x.finished&&k(this,x,M)};function te(p){return p.ending&&p.length===0&&p.bufferedRequest===null&&!p.finished&&!p.writing}function pe(p,b){p._final(function(M){b.pendingcb--,M&&p.emit("error",M),b.prefinished=!0,p.emit("prefinish"),ge(p,b)})}function ce(p,b){!b.prefinished&&!b.finalCalled&&(typeof p._final=="function"?(b.pendingcb++,b.finalCalled=!0,e.nextTick(pe,p,b)):(b.prefinished=!0,p.emit("prefinish")))}function ge(p,b){var M=te(b);return M&&(ce(p,b),b.pendingcb===0&&(b.finished=!0,p.emit("finish"))),M}function k(p,b,M){b.ending=!0,ge(p,b),M&&(b.finished?e.nextTick(M):p.once("finish",M)),b.ended=!0,p.writable=!1}function N(p,b,M){var x=p.entry;for(p.entry=null;x;){var q=x.callback;b.pendingcb--,q(M),x=x.next}b.corkedRequestsFree?b.corkedRequestsFree.next=p:b.corkedRequestsFree=p}return Object.defineProperty(E.prototype,"destroyed",{get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(p){!this._writableState||(this._writableState.destroyed=p)}}),E.prototype.destroy=_.destroy,E.prototype._undestroy=_.undestroy,E.prototype._destroy=function(p,b){this.end(),b(p)},Ar}var Pr,Xn;function dt(){if(Xn)return Pr;Xn=1;var e=lt.exports,t=Object.keys||function(_){var y=[];for(var P in _)y.push(P);return y};Pr=g;var r=Object.create(le);r.inherits=xe.exports;var n=Hi(),i=Fi();r.inherits(g,n);for(var o=t(i.prototype),c=0;c<o.length;c++){var v=o[c];g.prototype[v]||(g.prototype[v]=i.prototype[v])}function g(_){if(!(this instanceof g))return new g(_);n.call(this,_),i.call(this,_),_&&_.readable===!1&&(this.readable=!1),_&&_.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,_&&_.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",S)}Object.defineProperty(g.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function S(){this.allowHalfOpen||this._writableState.ended||e.nextTick(C,this)}function C(_){_.end()}return Object.defineProperty(g.prototype,"destroyed",{get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(_){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=_,this._writableState.destroyed=_)}}),g.prototype._destroy=function(_,y){this.push(null),this.end(),e.nextTick(y,_)},Pr}var Mr={},Zn;function Qn(){if(Zn)return Mr;Zn=1;var e=ft.exports.Buffer,t=e.isEncoding||function(s){switch(s=""+s,s&&s.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function r(s){if(!s)return"utf8";for(var h;;)switch(s){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return s;default:if(h)return;s=(""+s).toLowerCase(),h=!0}}function n(s){var h=r(s);if(typeof h!="string"&&(e.isEncoding===t||!t(s)))throw new Error("Unknown encoding: "+s);return h||s}Mr.StringDecoder=i;function i(s){this.encoding=n(s);var h;switch(this.encoding){case"utf16le":this.text=_,this.end=y,h=4;break;case"utf8":this.fillLast=g,h=4;break;case"base64":this.text=P,this.end=w,h=3;break;default:this.write=E,this.end=L;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=e.allocUnsafe(h)}i.prototype.write=function(s){if(s.length===0)return"";var h,T;if(this.lastNeed){if(h=this.fillLast(s),h===void 0)return"";T=this.lastNeed,this.lastNeed=0}else T=0;return T<s.length?h?h+this.text(s,T):this.text(s,T):h||""},i.prototype.end=C,i.prototype.text=S,i.prototype.fillLast=function(s){if(this.lastNeed<=s.length)return s.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);s.copy(this.lastChar,this.lastTotal-this.lastNeed,0,s.length),this.lastNeed-=s.length};function o(s){return s<=127?0:s>>5===6?2:s>>4===14?3:s>>3===30?4:s>>6===2?-1:-2}function c(s,h,T){var j=h.length-1;if(j<T)return 0;var B=o(h[j]);return B>=0?(B>0&&(s.lastNeed=B-1),B):--j<T||B===-2?0:(B=o(h[j]),B>=0?(B>0&&(s.lastNeed=B-2),B):--j<T||B===-2?0:(B=o(h[j]),B>=0?(B>0&&(B===2?B=0:s.lastNeed=B-3),B):0))}function v(s,h,T){if((h[0]&192)!==128)return s.lastNeed=0,"\uFFFD";if(s.lastNeed>1&&h.length>1){if((h[1]&192)!==128)return s.lastNeed=1,"\uFFFD";if(s.lastNeed>2&&h.length>2&&(h[2]&192)!==128)return s.lastNeed=2,"\uFFFD"}}function g(s){var h=this.lastTotal-this.lastNeed,T=v(this,s);if(T!==void 0)return T;if(this.lastNeed<=s.length)return s.copy(this.lastChar,h,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);s.copy(this.lastChar,h,0,s.length),this.lastNeed-=s.length}function S(s,h){var T=c(this,s,h);if(!this.lastNeed)return s.toString("utf8",h);this.lastTotal=T;var j=s.length-(T-this.lastNeed);return s.copy(this.lastChar,0,j),s.toString("utf8",h,j)}function C(s){var h=s&&s.length?this.write(s):"";return this.lastNeed?h+"\uFFFD":h}function _(s,h){if((s.length-h)%2===0){var T=s.toString("utf16le",h);if(T){var j=T.charCodeAt(T.length-1);if(j>=55296&&j<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=s[s.length-2],this.lastChar[1]=s[s.length-1],T.slice(0,-1)}return T}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=s[s.length-1],s.toString("utf16le",h,s.length-1)}function y(s){var h=s&&s.length?this.write(s):"";if(this.lastNeed){var T=this.lastTotal-this.lastNeed;return h+this.lastChar.toString("utf16le",0,T)}return h}function P(s,h){var T=(s.length-h)%3;return T===0?s.toString("base64",h):(this.lastNeed=3-T,this.lastTotal=3,T===1?this.lastChar[0]=s[s.length-1]:(this.lastChar[0]=s[s.length-2],this.lastChar[1]=s[s.length-1]),s.toString("base64",h,s.length-T))}function w(s){var h=s&&s.length?this.write(s):"";return this.lastNeed?h+this.lastChar.toString("base64",0,3-this.lastNeed):h}function E(s){return s.toString(this.encoding)}function L(s){return s&&s.length?this.write(s):""}return Mr}var Ir,ei;function Hi(){if(ei)return Ir;ei=1;var e=lt.exports;Ir=h;var t=ou,r;h.ReadableState=s,ht.exports.EventEmitter;var n=function(a,u){return a.listeners(u).length},i=Ui,o=ft.exports.Buffer,c=be.Uint8Array||function(){};function v(a){return o.from(a)}function g(a){return o.isBuffer(a)||a instanceof c}var S=Object.create(le);S.inherits=xe.exports;var C=rt,_=void 0;C&&C.debuglog?_=C.debuglog("stream"):_=function(){};var y=wu(),P=Wi,w;S.inherits(h,i);var E=["error","close","destroy","pause","resume"];function L(a,u,A){if(typeof a.prependListener=="function")return a.prependListener(u,A);!a._events||!a._events[u]?a.on(u,A):t(a._events[u])?a._events[u].unshift(A):a._events[u]=[A,a._events[u]]}function s(a,u){r=r||dt(),a=a||{};var A=u instanceof r;this.objectMode=!!a.objectMode,A&&(this.objectMode=this.objectMode||!!a.readableObjectMode);var D=a.highWaterMark,f=a.readableHighWaterMark,l=this.objectMode?16:16*1024;D||D===0?this.highWaterMark=D:A&&(f||f===0)?this.highWaterMark=f:this.highWaterMark=l,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new y,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=a.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,a.encoding&&(w||(w=Qn().StringDecoder),this.decoder=new w(a.encoding),this.encoding=a.encoding)}function h(a){if(r=r||dt(),!(this instanceof h))return new h(a);this._readableState=new s(a,this),this.readable=!0,a&&(typeof a.read=="function"&&(this._read=a.read),typeof a.destroy=="function"&&(this._destroy=a.destroy)),i.call(this)}Object.defineProperty(h.prototype,"destroyed",{get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(a){!this._readableState||(this._readableState.destroyed=a)}}),h.prototype.destroy=P.destroy,h.prototype._undestroy=P.undestroy,h.prototype._destroy=function(a,u){this.push(null),u(a)},h.prototype.push=function(a,u){var A=this._readableState,D;return A.objectMode?D=!0:typeof a=="string"&&(u=u||A.defaultEncoding,u!==A.encoding&&(a=o.from(a,u),u=""),D=!0),T(this,a,u,!1,D)},h.prototype.unshift=function(a){return T(this,a,null,!0,!1)};function T(a,u,A,D,f){var l=a._readableState;if(u===null)l.reading=!1,oe(a,l);else{var I;f||(I=B(l,u)),I?a.emit("error",I):l.objectMode||u&&u.length>0?(typeof u!="string"&&!l.objectMode&&Object.getPrototypeOf(u)!==o.prototype&&(u=v(u)),D?l.endEmitted?a.emit("error",new Error("stream.unshift() after end event")):j(a,l,u,!0):l.ended?a.emit("error",new Error("stream.push() after EOF")):(l.reading=!1,l.decoder&&!A?(u=l.decoder.write(u),l.objectMode||u.length!==0?j(a,l,u,!1):ce(a,l)):j(a,l,u,!1))):D||(l.reading=!1)}return K(l)}function j(a,u,A,D){u.flowing&&u.length===0&&!u.sync?(a.emit("data",A),a.read(0)):(u.length+=u.objectMode?1:A.length,D?u.buffer.unshift(A):u.buffer.push(A),u.needReadable&&te(a)),ce(a,u)}function B(a,u){var A;return!g(u)&&typeof u!="string"&&u!==void 0&&!a.objectMode&&(A=new TypeError("Invalid non-string/buffer chunk")),A}function K(a){return!a.ended&&(a.needReadable||a.length<a.highWaterMark||a.length===0)}h.prototype.isPaused=function(){return this._readableState.flowing===!1},h.prototype.setEncoding=function(a){return w||(w=Qn().StringDecoder),this._readableState.decoder=new w(a),this._readableState.encoding=a,this};var X=8388608;function G(a){return a>=X?a=X:(a--,a|=a>>>1,a|=a>>>2,a|=a>>>4,a|=a>>>8,a|=a>>>16,a++),a}function U(a,u){return a<=0||u.length===0&&u.ended?0:u.objectMode?1:a!==a?u.flowing&&u.length?u.buffer.head.data.length:u.length:(a>u.highWaterMark&&(u.highWaterMark=G(a)),a<=u.length?a:u.ended?u.length:(u.needReadable=!0,0))}h.prototype.read=function(a){_("read",a),a=parseInt(a,10);var u=this._readableState,A=a;if(a!==0&&(u.emittedReadable=!1),a===0&&u.needReadable&&(u.length>=u.highWaterMark||u.ended))return _("read: emitReadable",u.length,u.ended),u.length===0&&u.ended?ne(this):te(this),null;if(a=U(a,u),a===0&&u.ended)return u.length===0&&ne(this),null;var D=u.needReadable;_("need readable",D),(u.length===0||u.length-a<u.highWaterMark)&&(D=!0,_("length less than watermark",D)),u.ended||u.reading?(D=!1,_("reading or ended",D)):D&&(_("do read"),u.reading=!0,u.sync=!0,u.length===0&&(u.needReadable=!0),this._read(u.highWaterMark),u.sync=!1,u.reading||(a=U(A,u)));var f;return a>0?f=x(a,u):f=null,f===null?(u.needReadable=!0,a=0):u.length-=a,u.length===0&&(u.ended||(u.needReadable=!0),A!==a&&u.ended&&ne(this)),f!==null&&this.emit("data",f),f};function oe(a,u){if(!u.ended){if(u.decoder){var A=u.decoder.end();A&&A.length&&(u.buffer.push(A),u.length+=u.objectMode?1:A.length)}u.ended=!0,te(a)}}function te(a){var u=a._readableState;u.needReadable=!1,u.emittedReadable||(_("emitReadable",u.flowing),u.emittedReadable=!0,u.sync?e.nextTick(pe,a):pe(a))}function pe(a){_("emit readable"),a.emit("readable"),M(a)}function ce(a,u){u.readingMore||(u.readingMore=!0,e.nextTick(ge,a,u))}function ge(a,u){for(var A=u.length;!u.reading&&!u.flowing&&!u.ended&&u.length<u.highWaterMark&&(_("maybeReadMore read 0"),a.read(0),A!==u.length);)A=u.length;u.readingMore=!1}h.prototype._read=function(a){this.emit("error",new Error("_read() is not implemented"))},h.prototype.pipe=function(a,u){var A=this,D=this._readableState;switch(D.pipesCount){case 0:D.pipes=a;break;case 1:D.pipes=[D.pipes,a];break;default:D.pipes.push(a);break}D.pipesCount+=1,_("pipe count=%d opts=%j",D.pipesCount,u);var f=(!u||u.end!==!1)&&a!==process.stdout&&a!==process.stderr,l=f?W:fe;D.endEmitted?e.nextTick(l):A.once("end",l),a.on("unpipe",I);function I(we,Re){_("onunpipe"),we===A&&Re&&Re.hasUnpiped===!1&&(Re.hasUnpiped=!0,Z())}function W(){_("onend"),a.end()}var Q=k(A);a.on("drain",Q);var z=!1;function Z(){_("cleanup"),a.removeListener("close",Be),a.removeListener("finish",Ie),a.removeListener("drain",Q),a.removeListener("error",Me),a.removeListener("unpipe",I),A.removeListener("end",W),A.removeListener("end",fe),A.removeListener("data",ke),z=!0,D.awaitDrain&&(!a._writableState||a._writableState.needDrain)&&Q()}var Ee=!1;A.on("data",ke);function ke(we){_("ondata"),Ee=!1;var Re=a.write(we);Re===!1&&!Ee&&((D.pipesCount===1&&D.pipes===a||D.pipesCount>1&&R(D.pipes,a)!==-1)&&!z&&(_("false write response, pause",A._readableState.awaitDrain),A._readableState.awaitDrain++,Ee=!0),A.pause())}function Me(we){_("onerror",we),fe(),a.removeListener("error",Me),n(a,"error")===0&&a.emit("error",we)}L(a,"error",Me);function Be(){a.removeListener("finish",Ie),fe()}a.once("close",Be);function Ie(){_("onfinish"),a.removeListener("close",Be),fe()}a.once("finish",Ie);function fe(){_("unpipe"),A.unpipe(a)}return a.emit("pipe",A),D.flowing||(_("pipe resume"),A.resume()),a};function k(a){return function(){var u=a._readableState;_("pipeOnDrain",u.awaitDrain),u.awaitDrain&&u.awaitDrain--,u.awaitDrain===0&&n(a,"data")&&(u.flowing=!0,M(a))}}h.prototype.unpipe=function(a){var u=this._readableState,A={hasUnpiped:!1};if(u.pipesCount===0)return this;if(u.pipesCount===1)return a&&a!==u.pipes?this:(a||(a=u.pipes),u.pipes=null,u.pipesCount=0,u.flowing=!1,a&&a.emit("unpipe",this,A),this);if(!a){var D=u.pipes,f=u.pipesCount;u.pipes=null,u.pipesCount=0,u.flowing=!1;for(var l=0;l<f;l++)D[l].emit("unpipe",this,A);return this}var I=R(u.pipes,a);return I===-1?this:(u.pipes.splice(I,1),u.pipesCount-=1,u.pipesCount===1&&(u.pipes=u.pipes[0]),a.emit("unpipe",this,A),this)},h.prototype.on=function(a,u){var A=i.prototype.on.call(this,a,u);if(a==="data")this._readableState.flowing!==!1&&this.resume();else if(a==="readable"){var D=this._readableState;!D.endEmitted&&!D.readableListening&&(D.readableListening=D.needReadable=!0,D.emittedReadable=!1,D.reading?D.length&&te(this):e.nextTick(N,this))}return A},h.prototype.addListener=h.prototype.on;function N(a){_("readable nexttick read 0"),a.read(0)}h.prototype.resume=function(){var a=this._readableState;return a.flowing||(_("resume"),a.flowing=!0,p(this,a)),this};function p(a,u){u.resumeScheduled||(u.resumeScheduled=!0,e.nextTick(b,a,u))}function b(a,u){u.reading||(_("resume read 0"),a.read(0)),u.resumeScheduled=!1,u.awaitDrain=0,a.emit("resume"),M(a),u.flowing&&!u.reading&&a.read(0)}h.prototype.pause=function(){return _("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(_("pause"),this._readableState.flowing=!1,this.emit("pause")),this};function M(a){var u=a._readableState;for(_("flow",u.flowing);u.flowing&&a.read()!==null;);}h.prototype.wrap=function(a){var u=this,A=this._readableState,D=!1;a.on("end",function(){if(_("wrapped end"),A.decoder&&!A.ended){var I=A.decoder.end();I&&I.length&&u.push(I)}u.push(null)}),a.on("data",function(I){if(_("wrapped data"),A.decoder&&(I=A.decoder.write(I)),!(A.objectMode&&I==null)&&!(!A.objectMode&&(!I||!I.length))){var W=u.push(I);W||(D=!0,a.pause())}});for(var f in a)this[f]===void 0&&typeof a[f]=="function"&&(this[f]=function(I){return function(){return a[I].apply(a,arguments)}}(f));for(var l=0;l<E.length;l++)a.on(E[l],this.emit.bind(this,E[l]));return this._read=function(I){_("wrapped _read",I),D&&(D=!1,a.resume())},this},Object.defineProperty(h.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),h._fromList=x;function x(a,u){if(u.length===0)return null;var A;return u.objectMode?A=u.buffer.shift():!a||a>=u.length?(u.decoder?A=u.buffer.join(""):u.buffer.length===1?A=u.buffer.head.data:A=u.buffer.concat(u.length),u.buffer.clear()):A=q(a,u.buffer,u.decoder),A}function q(a,u,A){var D;return a<u.head.data.length?(D=u.head.data.slice(0,a),u.head.data=u.head.data.slice(a)):a===u.head.data.length?D=u.shift():D=A?V(a,u):$(a,u),D}function V(a,u){var A=u.head,D=1,f=A.data;for(a-=f.length;A=A.next;){var l=A.data,I=a>l.length?l.length:a;if(I===l.length?f+=l:f+=l.slice(0,a),a-=I,a===0){I===l.length?(++D,A.next?u.head=A.next:u.head=u.tail=null):(u.head=A,A.data=l.slice(I));break}++D}return u.length-=D,f}function $(a,u){var A=o.allocUnsafe(a),D=u.head,f=1;for(D.data.copy(A),a-=D.data.length;D=D.next;){var l=D.data,I=a>l.length?l.length:a;if(l.copy(A,A.length-a,0,I),a-=I,a===0){I===l.length?(++f,D.next?u.head=D.next:u.head=u.tail=null):(u.head=D,D.data=l.slice(I));break}++f}return u.length-=f,A}function ne(a){var u=a._readableState;if(u.length>0)throw new Error('"endReadable()" called on non-empty stream');u.endEmitted||(u.ended=!0,e.nextTick(se,u,a))}function se(a,u){!a.endEmitted&&a.length===0&&(a.endEmitted=!0,u.readable=!1,u.emit("end"))}function R(a,u){for(var A=0,D=a.length;A<D;A++)if(a[A]===u)return A;return-1}return Ir}var qi=Fe,nr=dt(),$i=Object.create(le);$i.inherits=xe.exports;$i.inherits(Fe,nr);function Ru(e,t){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(!n)return this.emit("error",new Error("write callback called multiple times"));r.writechunk=null,r.writecb=null,t!=null&&this.push(t),n(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function Fe(e){if(!(this instanceof Fe))return new Fe(e);nr.call(this,e),this._transformState={afterTransform:Ru.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&(typeof e.transform=="function"&&(this._transform=e.transform),typeof e.flush=="function"&&(this._flush=e.flush)),this.on("prefinish",Cu)}function Cu(){var e=this;typeof this._flush=="function"?this._flush(function(t,r){ti(e,t,r)}):ti(this,null,null)}Fe.prototype.push=function(e,t){return this._transformState.needTransform=!1,nr.prototype.push.call(this,e,t)};Fe.prototype._transform=function(e,t,r){throw new Error("_transform() is not implemented")};Fe.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}};Fe.prototype._read=function(e){var t=this._transformState;t.writechunk!==null&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0};Fe.prototype._destroy=function(e,t){var r=this;nr.prototype._destroy.call(this,e,function(n){t(n),r.emit("close")})};function ti(e,t,r){if(t)return e.emit("error",t);if(r!=null&&e.push(r),e._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(e._transformState.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}var Ou=Dt,Vi=qi,Ki=Object.create(le);Ki.inherits=xe.exports;Ki.inherits(Dt,Vi);function Dt(e){if(!(this instanceof Dt))return new Dt(e);Vi.call(this,e)}Dt.prototype._transform=function(e,t,r){r(null,e)};(function(e,t){t=e.exports=Hi(),t.Stream=t,t.Readable=t,t.Writable=Fi(),t.Duplex=dt(),t.Transform=qi,t.PassThrough=Ou})(Fr,Fr.exports);var Gi=Fr.exports.Transform,zi=rt.inherits,Yi=so;function ct(e){Gi.call(this,e),this._destroyed=!1}zi(ct,Gi);ct.prototype.destroy=function(e){if(!this._destroyed){this._destroyed=!0;var t=this;process.nextTick(function(){e&&t.emit("error",e),t.emit("close")})}};function Tu(e,t,r){r(null,e)}function Jr(e){return function(t,r,n){return typeof t=="function"&&(n=r,r=t,t={}),typeof r!="function"&&(r=Tu),typeof n!="function"&&(n=null),e(t,r,n)}}tr.exports=Jr(function(e,t,r){var n=new ct(e);return n._transform=t,r&&(n._flush=r),n});tr.exports.ctor=Jr(function(e,t,r){function n(i){if(!(this instanceof n))return new n(i);this.options=Yi(e,i),ct.call(this,this.options)}return zi(n,ct),n.prototype._transform=t,r&&(n.prototype._flush=r),n});tr.exports.obj=Jr(function(e,t,r){var n=new ct(Yi({objectMode:!0,highWaterMark:16},e));return n._transform=t,r&&(n._flush=r),n});Object.defineProperty(er,"__esModule",{value:!0});er.storeTransformStream=void 0;const Au=tr.exports;function Pu(e){return Au.obj((t,r,n)=>{try{const i=e(t);n(null,i);return}catch(i){n(i);return}})}er.storeTransformStream=Pu;(function(e){var t=be&&be.__createBinding||(Object.create?function(n,i,o,c){c===void 0&&(c=o),Object.defineProperty(n,c,{enumerable:!0,get:function(){return i[o]}})}:function(n,i,o,c){c===void 0&&(c=o),n[c]=i[o]}),r=be&&be.__exportStar||function(n,i){for(var o in n)o!=="default"&&!Object.prototype.hasOwnProperty.call(i,o)&&t(i,n,o)};Object.defineProperty(e,"__esModule",{value:!0}),r(Xt,e),r(Zt,e),r(Qt,e),r(bt,e),r(er,e)})(Wr);var tt={},Ve={};Object.defineProperty(Ve,"__esModule",{value:!0});Ve.EthereumProviderError=Ve.EthereumRpcError=void 0;const Mu=Hr;class Ji extends Error{constructor(t,r,n){if(!Number.isInteger(t))throw new Error('"code" must be an integer.');if(!r||typeof r!="string")throw new Error('"message" must be a nonempty string.');super(r),this.code=t,n!==void 0&&(this.data=n)}serialize(){const t={code:this.code,message:this.message};return this.data!==void 0&&(t.data=this.data),this.stack&&(t.stack=this.stack),t}toString(){return Mu.default(this.serialize(),Nu,2)}}Ve.EthereumRpcError=Ji;class Iu extends Ji{constructor(t,r,n){if(!Du(t))throw new Error('"code" must be an integer such that: 1000 <= code <= 4999');super(t,r,n)}}Ve.EthereumProviderError=Iu;function Du(e){return Number.isInteger(e)&&e>=1e3&&e<=4999}function Nu(e,t){if(t!=="[Circular]")return t}var Xr={},Ke={};Object.defineProperty(Ke,"__esModule",{value:!0});Ke.errorValues=Ke.errorCodes=void 0;Ke.errorCodes={rpc:{invalidInput:-32e3,resourceNotFound:-32001,resourceUnavailable:-32002,transactionRejected:-32003,methodNotSupported:-32004,limitExceeded:-32005,parse:-32700,invalidRequest:-32600,methodNotFound:-32601,invalidParams:-32602,internal:-32603},provider:{userRejectedRequest:4001,unauthorized:4100,unsupportedMethod:4200,disconnected:4900,chainDisconnected:4901}};Ke.errorValues={"-32700":{standard:"JSON RPC 2.0",message:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."},"-32600":{standard:"JSON RPC 2.0",message:"The JSON sent is not a valid Request object."},"-32601":{standard:"JSON RPC 2.0",message:"The method does not exist / is not available."},"-32602":{standard:"JSON RPC 2.0",message:"Invalid method parameter(s)."},"-32603":{standard:"JSON RPC 2.0",message:"Internal JSON-RPC error."},"-32000":{standard:"EIP-1474",message:"Invalid input."},"-32001":{standard:"EIP-1474",message:"Resource not found."},"-32002":{standard:"EIP-1474",message:"Resource unavailable."},"-32003":{standard:"EIP-1474",message:"Transaction rejected."},"-32004":{standard:"EIP-1474",message:"Method not supported."},"-32005":{standard:"EIP-1474",message:"Request limit exceeded."},4001:{standard:"EIP-1193",message:"User rejected the request."},4100:{standard:"EIP-1193",message:"The requested account and/or method has not been authorized by the user."},4200:{standard:"EIP-1193",message:"The requested method is not supported by this Ethereum provider."},4900:{standard:"EIP-1193",message:"The provider is disconnected from all chains."},4901:{standard:"EIP-1193",message:"The provider is disconnected from the specified chain."}};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.serializeError=e.isValidCode=e.getMessageFromCode=e.JSON_RPC_SERVER_ERROR_MESSAGE=void 0;const t=Ke,r=Ve,n=t.errorCodes.rpc.internal,i="Unspecified error message. This is a bug, please report it.",o={code:n,message:c(n)};e.JSON_RPC_SERVER_ERROR_MESSAGE="Unspecified server error.";function c(y,P=i){if(Number.isInteger(y)){const w=y.toString();if(_(t.errorValues,w))return t.errorValues[w].message;if(S(y))return e.JSON_RPC_SERVER_ERROR_MESSAGE}return P}e.getMessageFromCode=c;function v(y){if(!Number.isInteger(y))return!1;const P=y.toString();return!!(t.errorValues[P]||S(y))}e.isValidCode=v;function g(y,{fallbackError:P=o,shouldIncludeStack:w=!1}={}){var E,L;if(!P||!Number.isInteger(P.code)||typeof P.message!="string")throw new Error("Must provide fallback error with integer number code and string message.");if(y instanceof r.EthereumRpcError)return y.serialize();const s={};if(y&&typeof y=="object"&&!Array.isArray(y)&&_(y,"code")&&v(y.code)){const T=y;s.code=T.code,T.message&&typeof T.message=="string"?(s.message=T.message,_(T,"data")&&(s.data=T.data)):(s.message=c(s.code),s.data={originalError:C(y)})}else{s.code=P.code;const T=(E=y)===null||E===void 0?void 0:E.message;s.message=T&&typeof T=="string"?T:P.message,s.data={originalError:C(y)}}const h=(L=y)===null||L===void 0?void 0:L.stack;return w&&y&&h&&typeof h=="string"&&(s.stack=h),s}e.serializeError=g;function S(y){return y>=-32099&&y<=-32e3}function C(y){return y&&typeof y=="object"&&!Array.isArray(y)?Object.assign({},y):y}function _(y,P){return Object.prototype.hasOwnProperty.call(y,P)}})(Xr);var ir={};Object.defineProperty(ir,"__esModule",{value:!0});ir.ethErrors=void 0;const Zr=Ve,Xi=Xr,me=Ke;ir.ethErrors={rpc:{parse:e=>Te(me.errorCodes.rpc.parse,e),invalidRequest:e=>Te(me.errorCodes.rpc.invalidRequest,e),invalidParams:e=>Te(me.errorCodes.rpc.invalidParams,e),methodNotFound:e=>Te(me.errorCodes.rpc.methodNotFound,e),internal:e=>Te(me.errorCodes.rpc.internal,e),server:e=>{if(!e||typeof e!="object"||Array.isArray(e))throw new Error("Ethereum RPC Server errors must provide single object argument.");const{code:t}=e;if(!Number.isInteger(t)||t>-32005||t<-32099)throw new Error('"code" must be an integer such that: -32099 <= code <= -32005');return Te(t,e)},invalidInput:e=>Te(me.errorCodes.rpc.invalidInput,e),resourceNotFound:e=>Te(me.errorCodes.rpc.resourceNotFound,e),resourceUnavailable:e=>Te(me.errorCodes.rpc.resourceUnavailable,e),transactionRejected:e=>Te(me.errorCodes.rpc.transactionRejected,e),methodNotSupported:e=>Te(me.errorCodes.rpc.methodNotSupported,e),limitExceeded:e=>Te(me.errorCodes.rpc.limitExceeded,e)},provider:{userRejectedRequest:e=>Ct(me.errorCodes.provider.userRejectedRequest,e),unauthorized:e=>Ct(me.errorCodes.provider.unauthorized,e),unsupportedMethod:e=>Ct(me.errorCodes.provider.unsupportedMethod,e),disconnected:e=>Ct(me.errorCodes.provider.disconnected,e),chainDisconnected:e=>Ct(me.errorCodes.provider.chainDisconnected,e),custom:e=>{if(!e||typeof e!="object"||Array.isArray(e))throw new Error("Ethereum Provider custom errors must provide single object argument.");const{code:t,message:r,data:n}=e;if(!r||typeof r!="string")throw new Error('"message" must be a nonempty string');return new Zr.EthereumProviderError(t,r,n)}}};function Te(e,t){const[r,n]=Zi(t);return new Zr.EthereumRpcError(e,r||Xi.getMessageFromCode(e),n)}function Ct(e,t){const[r,n]=Zi(t);return new Zr.EthereumProviderError(e,r||Xi.getMessageFromCode(e),n)}function Zi(e){if(e){if(typeof e=="string")return[e];if(typeof e=="object"&&!Array.isArray(e)){const{message:t,data:r}=e;if(t&&typeof t!="string")throw new Error("Must specify string message.");return[t||void 0,r]}}return[]}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.getMessageFromCode=e.serializeError=e.EthereumProviderError=e.EthereumRpcError=e.ethErrors=e.errorCodes=void 0;const t=Ve;Object.defineProperty(e,"EthereumRpcError",{enumerable:!0,get:function(){return t.EthereumRpcError}}),Object.defineProperty(e,"EthereumProviderError",{enumerable:!0,get:function(){return t.EthereumProviderError}});const r=Xr;Object.defineProperty(e,"serializeError",{enumerable:!0,get:function(){return r.serializeError}}),Object.defineProperty(e,"getMessageFromCode",{enumerable:!0,get:function(){return r.getMessageFromCode}});const n=ir;Object.defineProperty(e,"ethErrors",{enumerable:!0,get:function(){return n.ethErrors}});const i=Ke;Object.defineProperty(e,"errorCodes",{enumerable:!0,get:function(){return i.errorCodes}})})(tt);var Lu=function e(t,r){if(t===r)return!0;if(t&&r&&typeof t=="object"&&typeof r=="object"){if(t.constructor!==r.constructor)return!1;var n,i,o;if(Array.isArray(t)){if(n=t.length,n!=r.length)return!1;for(i=n;i--!==0;)if(!e(t[i],r[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if(o=Object.keys(t),n=o.length,n!==Object.keys(r).length)return!1;for(i=n;i--!==0;)if(!Object.prototype.hasOwnProperty.call(r,o[i]))return!1;for(i=n;i--!==0;){var c=o[i];if(!e(t[c],r[c]))return!1}return!0}return t!==t&&r!==r};const je=e=>e!==null&&typeof e=="object"&&typeof e.pipe=="function";je.writable=e=>je(e)&&e.writable!==!1&&typeof e._write=="function"&&typeof e._writableState=="object";je.readable=e=>je(e)&&e.readable!==!1&&typeof e._read=="function"&&typeof e._readableState=="object";je.duplex=e=>je.writable(e)&&je.readable(e);je.transform=e=>je.duplex(e)&&typeof e._transform=="function";var ju=je;const Ot={GOOGLE:"google",FACEBOOK:"facebook",TWITCH:"twitch",REDDIT:"reddit",DISCORD:"discord"},Qe={GOOGLE:"google",FACEBOOK:"facebook",TWITCH:"twitch",REDDIT:"reddit",DISCORD:"discord",EMAIL_PASSWORDLESS:"torus-auth0-email-passwordless"},ri={[Qe.GOOGLE]:"tkey-google",[Qe.FACEBOOK]:"tkey-facebook",[Qe.TWITCH]:"tkey-twitch",[Qe.REDDIT]:"tkey-reddit",[Qe.DISCORD]:"tkey-discord",[Qe.EMAIL_PASSWORDLESS]:"tkey-auth0-email-passwordless"},ue={MOONPAY:"moonpay",WYRE:"wyre",RAMPNETWORK:"rampnetwork",XANPOOL:"xanpool",MERCURYO:"mercuryo",TRANSAK:"transak",BANXA:"banxa"},de={MAINNET:"mainnet",MATIC:"matic",BSC_MAINNET:"bsc_mainnet",AVALANCHE_MAINNET:"avalanche_mainnet",XDAI:"xdai"},xu={PRODUCTION:"production",DEVELOPMENT:"development",BINANCE:"binance",TESTING:"testing",LRC:"lrc",BETA:"beta",BNB:"bnb",POLYGON:"polygon"},ot={BOTTOM_LEFT:"bottom-left",TOP_LEFT:"top-left",BOTTOM_RIGHT:"bottom-right",TOP_RIGHT:"top-right"},ku=["ETH","USDT","USDC","TUSD","EOSDT","USD","DAI","GUSD","DKKT","PAX","ILS","RUB","BYN","EUR","GBP","JPY","KRW","PLN","MXN","AUD","BRL","CAD","CHF","KPW","LAK","LBP","LKR","XOF","CNHT","DOGE","UAH","TRY","HKD","XJP","SGD","USC","NZD","NGN","RUR","COP","GHS","EGP","IDR","BHD","CRC","PEN","AED","DOP","PKR","HUF","VND","XAR","LTC","RON","OMR","MYR","DKK","UGX","ZMW","SAR","SEK","GEL","RWF","IRR","TZS","CNY","VEF","BDT","HRK","CLP","THB","XAF","ARS","UYU","SZL","KZT","NOK","KES","PAB","INR","CZK","MAD","TWD","PHP","ZAR","BOB","CDF","DASH","VES","ISK","MWK","BAM","TTD","XRP","JOD","RSD","HNL","BGN","GTQ","BWP","XMR","MMK","QAR","AOA","KWD","MUR","WUSD","WEUR","WAVES","WTRY","LRD","LSL","LYD","AWG","MDL","BTO","EURS","CHFT","MKD","MNT","MOP","MRO","MVR","VOLLAR","CKUSD","KHR","VUV","BITCNY","QC","BBD","NAD","NPR","PGK","PYG","BIF","BMD","BND","XLM","BNB","SCR","BAT","CRO","HT","KCS","LEO","LINK","MKR","NPXS","OMG","REP","ZB","ZIL","ZRX","BCH","BZD","CUP","CVE","DJF","DZD","ERN","ETB","FJD","FKP","BUSD","ANCT","ALL","AMD","ANG","CNYX","IQD","UZS","TND","GGP","XAU","KGS","GIP","JMD","ZEC","USDP","BSV","EMC2","SNT","GTO","POWR","EUSD","EURT","BCY","BTS","ATM","BLOCKPAY","ARDR","AMP","B2X","BITGOLD","BITEUR","ATB","BITUSD","AGRS","DFXT","HIKEN","BIX","KNC","EOS","COB","COSS","BMH","NANO","BDG","BNT","XVG","LKK1Y","LKK","USDK","EURN","NZDT","JSE","GMD","GNF","GYD","YER","XPF","HTG","SLL","SOS","WST","SVC","SYP","NEO","KMF","JUMP","AYA","BLAST","WGR","BCN","BTG","URALS","INN","USDQ","CNH","HUSD","BKRW","NZDX","EURX","CADX","USDEX","JPYX","AUDX","VNDC","EON","GBPX","CHFX","USDJ","IDRT","USDS","USDN","BIDR","IDK","BSD","BTN","KYD","NIO","SBD","SDG","SHP","TOP","XCD","XCHF","CNYT","GYEN","ZUSD","GOLD","TRX","TRYB","PLATC","STRAX","UST","GLM","VAI","BRZ","DDRST","XAUT","MIM"],Bu={[ue.MOONPAY]:["AUD","BGN","BRL","CAD","CHF","CNY","COP","CZK","DKK","DOP","EGP","EUR","GBP","HKD","HRK","IDR","ILS","JPY","JOD","KES","KRW","KWD","LKR","MAD","MXN","MYR","NGN","NOK","NZD","OMR","PEN","PKR","PLN","RON","RUB","SEK","SGD","THB","TRY","TWD","USD","VND","ZAR"],[ue.WYRE]:["USD","EUR","GBP","AUD","CAD","NZD","ARS","BRL","CHF","CLP","COP","CZK","DKK","HKD","ILS","INR","ISK","JPY","KRW","MXN","MYR","NOK","PHP","PLN","SEK","THB","VND","ZAR"],[ue.RAMPNETWORK]:["USD","EUR","GBP"],[ue.XANPOOL]:["SGD","HKD","THB","PHP","INR","IDR","MYR","AUD","NZD","KRW"],[ue.MERCURYO]:["EUR","USD","GBP","TRY","JPY","BRL","NGN","VND","MXN","KRW"],[ue.TRANSAK]:["ARS","AUD","BBD","BGN","BMD","BRL","CAD","CHF","CLP","CRC","CZK","DKK","DOP","EUR","FJD","FKP","GBP","GIP","HRK","HUF","IDR","ILS","ISK","JMD","JPY","KES","KRW","MDL","MXN","MYR","NOK","NZD","PEN","PHP","PLN","PYG","RON","SEK","SGD","THB","TRY","TZS","USD","ZAR"],[ue.BANXA]:["EUR","GBP","USD"]},Uu=new Set(ku);function Ze(e){return Bu[e].filter(r=>Uu.has(r))}const Wu={[ue.MOONPAY]:{line1:"Credit/ Debit Card/ Apple Pay",line2:"4.5% or 5 USD",line3:"2,000\u20AC/day, 10,000\u20AC/mo",supportPage:"https://help.moonpay.io/en/",minOrderValue:24.99,maxOrderValue:5e4,validCurrencies:Ze(ue.MOONPAY),validCryptoCurrenciesByChain:{[de.MAINNET]:[{value:"aave",display:"AAVE"},{value:"bat",display:"BAT"},{value:"dai",display:"DAI"},{value:"eth",display:"ETH"},{value:"mkr",display:"MKR"},{value:"matic",display:"MATIC"},{value:"usdt",display:"USDT"},{value:"usdc",display:"USDC"}],[de.MATIC]:[{value:"eth_polygon",display:"ETH"},{value:"matic_polygon",display:"MATIC"},{value:"usdc_polygon",display:"USDC"}],[de.BSC_MAINNET]:[{value:"bnb_bsc",display:"BNB"},{value:"busd_bsc",display:"BUSD"}],[de.AVALANCHE_MAINNET]:[{value:"avax_cchain",display:"AVAX"}]},includeFees:!0,api:!0,enforceMax:!1},[ue.WYRE]:{line1:"Apple Pay/ Debit/ Credit Card",line2:"4.9% + 30\xA2 or 5 USD",line3:"$250/day",supportPage:"https://support.sendwyre.com/en/",minOrderValue:5,maxOrderValue:500,validCurrencies:Ze(ue.WYRE),validCryptoCurrenciesByChain:{[de.MAINNET]:[{value:"AAVE",display:"AAVE"},{value:"BAT",display:"BAT"},{value:"BUSD",display:"BUSD"},{value:"DAI",display:"DAI"},{value:"ETH",display:"ETH"},{value:"MKR",display:"MKR"},{value:"UNI",display:"UNI"},{value:"USDC",display:"USDC"},{value:"USDT",display:"USDT"}],[de.MATIC]:[{value:"MUSDC",display:"USDC"}],[de.AVALANCHE_MAINNET]:[{value:"AVAXC",display:"AVAXC"}]},includeFees:!1,api:!0,enforceMax:!1},[ue.RAMPNETWORK]:{line1:"Debit Card/ <br>Apple Pay/ Bank transfer",line2:"0.49% - 2.9%",line3:"5,000\u20AC/purchase, 20,000\u20AC/mo",supportPage:"https://instant.ramp.network/",minOrderValue:50,maxOrderValue:2e4,validCurrencies:Ze(ue.RAMPNETWORK),validCryptoCurrenciesByChain:{[de.MAINNET]:[{value:"ETH",display:"ETH"},{value:"DAI",display:"DAI"},{value:"USDC",display:"USDC"},{value:"USDT",display:"USDT"}],[de.MATIC]:[{value:"MATIC_DAI",display:"DAI"},{value:"MATIC_MATIC",display:"MATIC"},{value:"MATIC_USDC",display:"USDC"}],[de.AVALANCHE_MAINNET]:[{value:"AVAX",display:"AVAX"}]},includeFees:!0,api:!0,receiveHint:"walletTopUp.receiveHintRamp",enforceMax:!1},[ue.XANPOOL]:{line1:"PayNow/ InstaPay/ FPS/ GoJekPay/ UPI/ PromptPay/ <br>ViettelPay/ DuitNow",line2:"2.5% buying, 3% selling",line3:"$2,500 / day",supportPage:"mailto:support@xanpool.com",minOrderValue:100,maxOrderValue:2500,validCurrencies:Ze(ue.XANPOOL),validCryptoCurrenciesByChain:{[de.MAINNET]:[{value:"ETH",display:"ETH"},{value:"USDT",display:"USDT"}]},includeFees:!0,api:!0,sell:!0,enforceMax:!1},[ue.MERCURYO]:{line1:"Credit/ Debit Card/ Apple Pay",line2:"3.95% or 4 USD",line3:"10,000\u20AC/day, 25,000\u20AC/mo",supportPage:"mailto:support@mercuryo.io",minOrderValue:30,maxOrderValue:5e3,validCurrencies:Ze(ue.MERCURYO),validCryptoCurrenciesByChain:{[de.MAINNET]:[{value:"ETH",display:"ETH"},{value:"BAT",display:"BAT"},{value:"USDT",display:"USDT"},{value:"DAI",display:"DAI"}],[de.BSC_MAINNET]:[{value:"BNB",display:"BNB"},{value:"BUSD",display:"BUSD"},{value:"1INCH",display:"1INCH"}]},includeFees:!0,api:!0,enforceMax:!1},[ue.TRANSAK]:{line1:"Apple & Google Pay / Credit/Debit Card<br/>Bangkok Bank Mobile & iPay<br/>Bank Transfer (sepa/gbp) / SCB Mobile & Easy",line2:"0.99% - 5.5% or 5 USD",line3:"$5,000/day, $28,000/mo",supportPage:"https://support.transak.com/hc/en-US",minOrderValue:30,maxOrderValue:500,validCurrencies:Ze(ue.TRANSAK),validCryptoCurrenciesByChain:{[de.MAINNET]:[{value:"AAVE",display:"AAVE"},{value:"DAI",display:"DAI"},{value:"ETH",display:"ETH"},{value:"USDC",display:"USDC"},{value:"USDT",display:"USDT"}],[de.MATIC]:[{value:"AAVE",display:"AAVE"},{value:"DAI",display:"DAI"},{value:"MATIC",display:"MATIC"},{value:"USDC",display:"USDC"},{value:"USDT",display:"USDT"},{value:"WETH",display:"WETH"}],[de.BSC_MAINNET]:[{value:"BNB",display:"BNB"},{value:"BUSD",display:"BUSD"}],[de.AVALANCHE_MAINNET]:[{value:"AVAX",display:"AVAX"}]},includeFees:!0,enforceMax:!0},[ue.BANXA]:{line1:"Debit Card/ <br>Apple Pay/ Bank transfer",line2:"0.49% - 2.9%",line3:"5,000\u20AC/purchase, 20,000\u20AC/mo",supportPage:"https://support.banxa.com",minOrderValue:20,maxOrderValue:15e3,validCurrencies:Ze(ue.BANXA),validCryptoCurrenciesByChain:{[de.MAINNET]:[{value:"ETH",display:"ETH"},{value:"USDT",display:"USDT"},{value:"BUSD",display:"BUSD"},{value:"LINK",display:"LINK"},{value:"USDC",display:"USDC"},{value:"CHZ",display:"CHZ"},{value:"BAT",display:"BAT"},{value:"MANA",display:"MANA"},{value:"AAVE",display:"AAVE"},{value:"COMP",display:"COMP"},{value:"ENJ",display:"ENJ"}],[de.MATIC]:[{value:"MATIC",display:"MATIC"}]},includeFees:!0,enforceMax:!0}},Fu={en:{embed:{continue:"Continue",actionRequired:"Authorization required",pendingAction:"Click continue to proceed with your request in a popup",cookiesRequired:"Cookies Required",enableCookies:"Please enable cookies in your browser preferences to access Torus",clickHere:"More Info"}},de:{embed:{continue:"Fortsetzen",actionRequired:"Autorisierung erforderlich",pendingAction:"Klicken Sie in einem Popup auf Weiter, um mit Ihrer Anfrage fortzufahren",cookiesRequired:"Cookies ben\xF6tigt",enableCookies:"Bitte aktivieren Sie Cookies in Ihren Browsereinstellungen, um auf Torus zuzugreifen",clickHere:"Mehr Info"}},ja:{embed:{continue:"\u7D99\u7D9A\u3059\u308B",actionRequired:"\u8A8D\u8A3C\u304C\u5FC5\u8981\u3067\u3059",pendingAction:"\u7D9A\u884C\u3092\u30AF\u30EA\u30C3\u30AF\u3057\u3066\u3001\u30DD\u30C3\u30D7\u30A2\u30C3\u30D7\u3067\u30EA\u30AF\u30A8\u30B9\u30C8\u3092\u7D9A\u884C\u3057\u307E\u3059",cookiesRequired:"\u5FC5\u8981\u306A\u30AF\u30C3\u30AD\u30FC",enableCookies:"Torus\u306B\u30A2\u30AF\u30BB\u30B9\u3059\u308B\u306B\u306F\u3001\u30D6\u30E9\u30A6\u30B6\u306E\u8A2D\u5B9A\u3067Cookie\u3092\u6709\u52B9\u306B\u3057\u3066\u304F\u3060\u3055\u3044\u3002",clickHere:"\u8A73\u3057\u304F\u306F"}},ko:{embed:{continue:"\uACC4\uC18D\uD558\uB2E4",actionRequired:"\uC2B9\uC778 \uD544\uC694",pendingAction:"\uD31D\uC5C5\uC5D0\uC11C \uC694\uCCAD\uC744 \uC9C4\uD589\uD558\uB824\uBA74 \uACC4\uC18D\uC744 \uD074\uB9AD\uD558\uC2ED\uC2DC\uC624.",cookiesRequired:"\uCFE0\uD0A4 \uD544\uC694",enableCookies:"\uBE0C\uB77C\uC6B0\uC800 \uD658\uACBD \uC124\uC815\uC5D0\uC11C \uCFE0\uD0A4\uB97C \uD65C\uC131\uD654\uD558\uC5EC Torus\uC5D0 \uC561\uC138\uC2A4\uD558\uC2ED\uC2DC\uC624.",clickHere:"\uB354 \uB9CE\uC740 \uC815\uBCF4"}},zh:{embed:{continue:"\u7EE7\u7EED",actionRequired:"\u9700\u8981\u6388\u6743",pendingAction:"\u5355\u51FB\u7EE7\u7EED\u4EE5\u5728\u5F39\u51FA\u7A97\u53E3\u4E2D\u7EE7\u7EED\u60A8\u7684\u8BF7\u6C42",cookiesRequired:"\u5FC5\u586BCookie",enableCookies:"\u8BF7\u5728\u60A8\u7684\u6D4F\u89C8\u5668\u9996\u9009\u9879\u4E2D\u542F\u7528cookie\u4EE5\u8BBF\u95EETorus\u3002",clickHere:"\u66F4\u591A\u4FE1\u606F"}}};var Le={supportedVerifierList:Object.values(Qe),paymentProviders:Wu,api:"https://api.tor.us",translations:Fu,prodTorusUrl:"",localStorageKeyPrefix:"torus-"};const ni=e=>new Promise((t,r)=>{window.document.body!=null?Promise.resolve(e()).then(t).catch(r):window.document.addEventListener("DOMContentLoaded",()=>{Promise.resolve(e()).then(t).catch(r)})}),Tt=e=>{const t=window.document.createElement("template"),r=e.trim();return t.innerHTML=r,t.content.firstChild},Hu=function(e,t,r){for(var n=arguments.length,i=new Array(n>3?n-3:0),o=3;o<n;o++)i[o-3]=arguments[o];const c=()=>{r(...i),e.removeEventListener(t,c)};e.addEventListener(t,c)},Ne=(e,t,r)=>{const n=i=>{r(i),e.removeListener(t,n)};e.on(t,n)};async function qu(){return new Promise(e=>{document.readyState!=="loading"?e():Hu(document,"DOMContentLoaded",e)})}var ee=vi.getLogger("torus-embed"),Ae={errors:{disconnected:()=>"Torus: Lost connection to Torus.",permanentlyDisconnected:()=>"Torus: Disconnected from iframe. Page reload required.",sendSiteMetadata:()=>"Torus: Failed to send site metadata. This is an internal error, please report this bug.",unsupportedSync:e=>`Torus: The Torus Ethereum provider does not support synchronous methods like ${e} without a callback parameter.`,invalidDuplexStream:()=>"Must provide a Node.js-style duplex stream.",invalidOptions:(e,t)=>`Invalid options. Received: { maxEventListeners: ${e}, shouldSendMetadata: ${t} }`,invalidRequestArgs:()=>"Expected a single, non-array, object argument.",invalidRequestMethod:()=>"'args.method' must be a non-empty string.",invalidRequestParams:()=>"'args.params' must be an object or array if provided.",invalidLoggerObject:()=>"'args.logger' must be an object if provided.",invalidLoggerMethod:e=>`'args.logger' must include required method '${e}'.`},info:{connected:e=>`Torus: Connected to chain with ID "${e}".`},warnings:{enableDeprecation:'Torus: ""ethereum.enable()" is deprecated and may be removed in the future. Please use "ethereum.send("eth_requestAccounts")" instead. For more information, see: https://eips.ethereum.org/EIPS/eip-1102',sendDeprecation:`Torus: "ethereum.send(...)" is deprecated and may be removed in the future. Please use "ethereum.sendAsync(...)" or "ethereum.request(...)" instead.
For more information, see: https://eips.ethereum.org/EIPS/eip-1193`,events:{close:`Torus: The event "close" is deprecated and may be removed in the future. Please use "disconnect" instead.
For more information, see: https://eips.ethereum.org/EIPS/eip-1193`,data:`Torus: The event "data" is deprecated and will be removed in the future.Use "message" instead.
For more information, see: https://eips.ethereum.org/EIPS/eip-1193#message`,networkChanged:`Torus: The event "networkChanged" is deprecated and may be removed in the future. Please use "chainChanged" instead.
For more information, see: https://eips.ethereum.org/EIPS/eip-1193`,notification:`Torus: The event "notification" is deprecated and may be removed in the future. Please use "message" instead.
For more information, see: https://eips.ethereum.org/EIPS/eip-1193`},publicConfigStore:'Torus: The property "publicConfigStore" is deprecated and WILL be removed in the future.'}};const{paymentProviders:ii}=Le,$u=(e,t)=>{const r={};if(!e)return{errors:r,isValid:!0};if(e&&!ii[e])return r.provider="Invalid Provider",{errors:r,isValid:Object.keys(r).length===0};const n=ii[e],i=t||{};if(i.fiatValue){const o=+parseFloat(i.fiatValue.toString())||0;o<n.minOrderValue&&(r.fiatValue="Requested amount is lower than supported"),o>n.maxOrderValue&&n.enforceMax&&(r.fiatValue="Requested amount is higher than supported")}if(i.selectedCurrency&&!n.validCurrencies.includes(i.selectedCurrency)&&(r.selectedCurrency="Unsupported currency"),i.selectedCryptoCurrency){const o=Object.values(n.validCryptoCurrenciesByChain).flat().map(v=>v.value),c=e===ue.MOONPAY?i.selectedCryptoCurrency.toLowerCase():i.selectedCryptoCurrency;o&&!o.includes(c)&&(r.selectedCryptoCurrency="Unsupported cryptoCurrency")}return{errors:r,isValid:Object.keys(r).length===0}};function Vu(){return(e,t,r)=>{(typeof e.method!="string"||!e.method)&&(t.error=tt.ethErrors.rpc.invalidRequest({message:"The request 'method' must be a non-empty string.",data:e})),r(n=>{const{error:i}=t;return i&&ee.error(`MetaMask - RPC Error: ${i.message}`,i),n()})}}function ai(e,t,r){let n=`MetaMask: Lost connection to "${e}".`;t!=null&&t.stack&&(n+=`
${t.stack}`),ee.warn(n),r&&r.listenerCount("error")>0&&r.emit("error",n)}const et=()=>Math.random().toString(36).slice(2),Qi=async(e,t)=>{let r,n;const i="1.37.2";let o=t.version||i;try{if((e==="binance"||e==="production")&&!t.version){let c;Le.prodTorusUrl?c={data:Le.prodTorusUrl}:c=await yi(`${Le.api}/latestversion?name=@toruslabs/torus-embed&version=${i}`,{},{useAPIKey:!0}),o=c.data,Le.prodTorusUrl=c.data}}catch(c){ee.error(c,"unable to fetch latest version")}switch(ee.info("version used: ",o),e){case"binance":r=`https://binance.tor.us/v${o}`,n="info";break;case"testing":r="https://testing.tor.us",n="debug";break;case"bnb":r="https://bnb.tor.us",n="error";break;case"polygon":r="https://polygon.tor.us",n="error";break;case"lrc":r="https://lrc.tor.us",n="debug";break;case"beta":r="https://beta.tor.us",n="debug";break;case"development":r="http://localhost:4050",n="debug";break;default:r=`https://app.tor.us/v${o}`,n="error";break}return{torusUrl:r,logLevel:n}},oi=()=>{let e=window.navigator.language||"en-US";const t=e.split("-");return e=Object.prototype.hasOwnProperty.call(Le.translations,t[0])?t[0]:"en",e},Ku=["eth_subscription"],ea=()=>{},si="directories=0,titlebar=0,toolbar=0,status=0,location=0,menubar=0,height=660,width=375",Gu="directories=0,titlebar=0,toolbar=0,status=0,location=0,menubar=0,height=740,width=1315",ui="directories=0,titlebar=0,toolbar=0,status=0,location=0,menubar=0,height=700,width=450";function zu(){const e=window.screenLeft!==void 0?window.screenLeft:window.screenX,t=window.screenTop!==void 0?window.screenTop:window.screenY,r=1200,n=700,i=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:window.screen.width,o=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:window.screen.height,c=1,v=Math.abs((i-r)/2/c+e),g=Math.abs((o-n)/2/c+t);return`titlebar=0,toolbar=0,status=0,location=0,menubar=0,height=${n/c},width=${r/c},top=${g},left=${v}`}function li(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Yu(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?li(Object(r),!0).forEach(function(n){H(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):li(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}Jt.defaultMaxListeners=100;const fi=function(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;return(n,i)=>n||i.error?t(n||i.error):!r||Array.isArray(i)?e(i):e(i.result)};class ar extends Jt{constructor(t){let{maxEventListeners:r=100,shouldSendMetadata:n=!0,jsonRpcStreamName:i="provider"}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(super(),H(this,"chainId",void 0),H(this,"selectedAddress",void 0),H(this,"_rpcEngine",void 0),H(this,"networkVersion",void 0),H(this,"shouldSendMetadata",void 0),H(this,"isTorus",void 0),H(this,"_publicConfigStore",void 0),H(this,"tryPreopenHandle",void 0),H(this,"enable",void 0),H(this,"_state",void 0),H(this,"_jsonRpcConnection",void 0),H(this,"_sentWarnings",{enable:!1,experimentalMethods:!1,send:!1,publicConfigStore:!1,events:{close:!1,data:!1,networkChanged:!1,notification:!1}}),!ju.duplex(t))throw new Error(Ae.errors.invalidDuplexStream());this.isTorus=!0,this.setMaxListeners(r),this._state=Yu({},ar._defaultState),this.selectedAddress=null,this.networkVersion=null,this.chainId=null,this.shouldSendMetadata=n,this._handleAccountsChanged=this._handleAccountsChanged.bind(this),this._handleChainChanged=this._handleChainChanged.bind(this),this._handleUnlockStateChanged=this._handleUnlockStateChanged.bind(this),this._handleConnect=this._handleConnect.bind(this),this._handleDisconnect=this._handleDisconnect.bind(this),this._handleStreamDisconnect=this._handleStreamDisconnect.bind(this),this._sendSync=this._sendSync.bind(this),this._rpcRequest=this._rpcRequest.bind(this),this._warnOfDeprecation=this._warnOfDeprecation.bind(this),this._initializeState=this._initializeState.bind(this),this.request=this.request.bind(this),this.send=this.send.bind(this),this.sendAsync=this.sendAsync.bind(this);const o=new Bi;Vt(t,o,t,this._handleStreamDisconnect.bind(this,"MetaMask")),this._publicConfigStore=new Wr.ObservableStore({storageKey:"Metamask-Config"}),Vt(o.createStream("publicConfig"),Wr.storeAsStream(this._publicConfigStore),ai.bind(this,"MetaMask PublicConfigStore")),o.ignoreStream("phishing"),this.on("connect",()=>{this._state.isConnected=!0});const c=Ls();Vt(c.stream,o.createStream(i),c.stream,this._handleStreamDisconnect.bind(this,"MetaMask RpcProvider"));const v=new Ws;v.push(js()),v.push(Vu()),v.push(c.middleware),this._rpcEngine=v,c.events.on("notification",g=>{const{method:S,params:C}=g;S==="wallet_accountsChanged"?this._handleAccountsChanged(C):S==="wallet_unlockStateChanged"?this._handleUnlockStateChanged(C):S==="wallet_chainChanged"?this._handleChainChanged(C):Ku.includes(g.method)&&(this.emit("data",g),this.emit("notification",C.result),this.emit("message",{type:S,data:C}))})}get publicConfigStore(){return this._sentWarnings.publicConfigStore||(ee.warn(Ae.warnings.publicConfigStore),this._sentWarnings.publicConfigStore=!0),this._publicConfigStore}isConnected(){return this._state.isConnected}async request(t){if(!t||typeof t!="object"||Array.isArray(t))throw tt.ethErrors.rpc.invalidRequest({message:Ae.errors.invalidRequestArgs(),data:t});const{method:r,params:n}=t;if(typeof r!="string"||r.length===0)throw tt.ethErrors.rpc.invalidRequest({message:Ae.errors.invalidRequestMethod(),data:t});if(n!==void 0&&!Array.isArray(n)&&(typeof n!="object"||n===null))throw tt.ethErrors.rpc.invalidRequest({message:Ae.errors.invalidRequestParams(),data:t});return new Promise((i,o)=>{this._rpcRequest({method:r,params:n},fi(i,o))})}sendAsync(t,r){this._rpcRequest(t,r)}addListener(t,r){return this._warnOfDeprecation(t),super.addListener(t,r)}on(t,r){return this._warnOfDeprecation(t),super.on(t,r)}once(t,r){return this._warnOfDeprecation(t),super.once(t,r)}prependListener(t,r){return this._warnOfDeprecation(t),super.prependListener(t,r)}prependOnceListener(t,r){return this._warnOfDeprecation(t),super.prependOnceListener(t,r)}async _initializeState(){try{const{accounts:t,chainId:r,isUnlocked:n,networkVersion:i}=await this.request({method:"wallet_getProviderState"});this.emit("connect",{chainId:r}),this._handleChainChanged({chainId:r,networkVersion:i}),this._handleUnlockStateChanged({accounts:t,isUnlocked:n}),this._handleAccountsChanged(t)}catch(t){ee.error("MetaMask: Failed to get initial state. Please report this bug.",t)}finally{ee.info("initialized state"),this._state.initialized=!0,this.emit("_initialized")}}_rpcRequest(t,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=r;const o=t;if(!Array.isArray(o)){if(o.jsonrpc||(o.jsonrpc="2.0"),o.method==="eth_accounts"||o.method==="eth_requestAccounts")i=(c,v)=>{this._handleAccountsChanged(v.result||[],o.method==="eth_accounts",n),r(c,v)};else if(o.method==="wallet_getProviderState"){this._rpcEngine.handle(t,i);return}}this.tryPreopenHandle(o,i)}send(t,r){return this._sentWarnings.send||(ee.warn(Ae.warnings.sendDeprecation),this._sentWarnings.send=!0),typeof t=="string"&&(!r||Array.isArray(r))?new Promise((n,i)=>{try{this._rpcRequest({method:t,params:r},fi(n,i,!1))}catch(o){i(o)}}):t&&typeof t=="object"&&typeof r=="function"?this._rpcRequest(t,r):this._sendSync(t)}_sendSync(t){let r;switch(t.method){case"eth_accounts":r=this.selectedAddress?[this.selectedAddress]:[];break;case"eth_coinbase":r=this.selectedAddress||null;break;case"eth_uninstallFilter":this._rpcRequest(t,ea),r=!0;break;case"net_version":r=this.networkVersion||null;break;default:throw new Error(Ae.errors.unsupportedSync(t.method))}return{id:t.id,jsonrpc:t.jsonrpc,result:r}}_handleConnect(t){this._state.isConnected||(this._state.isConnected=!0,this.emit("connect",{chainId:t}),ee.debug(Ae.info.connected(t)))}_handleDisconnect(t,r){if(this._state.isConnected||!this._state.isPermanentlyDisconnected&&!t){this._state.isConnected=!1;let n;t?(n=new tt.EthereumRpcError(1013,r||Ae.errors.disconnected()),ee.debug(n)):(n=new tt.EthereumRpcError(1011,r||Ae.errors.permanentlyDisconnected()),ee.error(n),this.chainId=null,this._state.accounts=null,this.selectedAddress=null,this._state.isUnlocked=!1,this._state.isPermanentlyDisconnected=!0),this.emit("disconnect",n)}}_handleStreamDisconnect(t,r){ai(t,r,this),this._handleDisconnect(!1,r?r.message:void 0)}_handleAccountsChanged(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=t;Array.isArray(i)||(ee.error("MetaMask: Received non-array accounts parameter. Please report this bug.",i),i=[]);for(const o of t)if(typeof o!="string"){ee.error("MetaMask: Received non-string account. Please report this bug.",t),i=[];break}Lu(this._state.accounts,i)||(r&&Array.isArray(this._state.accounts)&&this._state.accounts.length>0&&!n&&ee.error('MetaMask: "eth_accounts" unexpectedly updated accounts. Please report this bug.',i),this._state.accounts=i,this.emit("accountsChanged",i)),this.selectedAddress!==i[0]&&(this.selectedAddress=i[0]||null)}_handleChainChanged(){let{chainId:t,networkVersion:r}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!t||!r){ee.error("MetaMask: Received invalid network parameters. Please report this bug.",{chainId:t,networkVersion:r});return}r==="loading"?this._handleDisconnect(!0):(this._handleConnect(t),t!==this.chainId&&(this.chainId=t,this._state.initialized&&this.emit("chainChanged",this.chainId)))}_handleUnlockStateChanged(){let{accounts:t,isUnlocked:r}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(typeof r!="boolean"){ee.error("MetaMask: Received invalid isUnlocked parameter. Please report this bug.",{isUnlocked:r});return}r!==this._state.isUnlocked&&(this._state.isUnlocked=r,this._handleAccountsChanged(t||[]))}_warnOfDeprecation(t){this._sentWarnings.events[t]===!1&&(ee.warn(Ae.warnings.events[t]),this._sentWarnings.events[t]=!0)}}H(ar,"_defaultState",{accounts:null,isConnected:!1,isUnlocked:!1,initialized:!1,isPermanentlyDisconnected:!1,hasEmittedConnection:!1});const Ju=e=>({algorithms:e.algorithms||["sha256"],delimiter:e.delimiter||" ",full:e.full||!1}),Xu=(e,t)=>{const r={};return e.algorithms.forEach(n=>{r[n]=lo(n).update(t,"utf8").digest("base64")}),r},Zu=(e,t)=>{let r="";return r+=Object.keys(t.hashes).map(n=>`${n}-${t.hashes[n]}`).join(e.delimiter),r},Qu=(e,t)=>{const r=Ju(e),n={hashes:Xu(r,t),integrity:void 0};return n.integrity=Zu(r,n),r.full?n:n.integrity};class di extends ht.exports.EventEmitter{constructor(t){let{url:r,target:n,features:i}=t;super(),H(this,"url",void 0),H(this,"target",void 0),H(this,"features",void 0),H(this,"window",void 0),H(this,"windowTimer",void 0),H(this,"iClosedWindow",void 0),this.url=r,this.target=n||"_blank",this.features=i||zu(),this.window=void 0,this.windowTimer=void 0,this.iClosedWindow=!1,this._setupTimer()}_setupTimer(){this.windowTimer=Number(setInterval(()=>{this.window&&this.window.closed&&(clearInterval(this.windowTimer),this.iClosedWindow||this.emit("close"),this.iClosedWindow=!1,this.window=void 0),this.window===void 0&&clearInterval(this.windowTimer)},500))}open(){var t;return this.window=window.open(this.url.href,this.target,this.features),(t=this.window)!==null&&t!==void 0&&t.focus&&this.window.focus(),Promise.resolve()}close(){this.iClosedWindow=!0,this.window&&this.window.close()}redirect(t){t?window.location.replace(this.url.href):window.location.href=this.url.href}}function ci(e){return new Promise((t,r)=>{try{const n=document.createElement("img");n.onload=()=>t(!0),n.onerror=()=>t(!1),n.src=e}catch(n){r(n)}})}const el=e=>{const{document:t}=e,r=t.querySelector('head > meta[property="og:site_name"]');if(r)return r.content;const n=t.querySelector('head > meta[name="title"]');return n?n.content:t.title&&t.title.length>0?t.title:e.location.hostname};async function tl(e){const{document:t}=e;let r=t.querySelector('head > link[rel="shortcut icon"]');return r&&await ci(r.href)||(r=Array.from(t.querySelectorAll('head > link[rel="icon"]')).find(n=>Boolean(n.href)),r&&await ci(r.href))?r.href:null}const rl=async()=>({name:el(window),icon:await tl(window)});async function nl(e){try{const t=await rl();e.handle({jsonrpc:"2.0",id:et(),method:"wallet_sendDomainMetadata",params:t},ea)}catch(t){ee.error({message:Ae.errors.sendSiteMetadata(),originalError:t})}}const il=["host","chainId","networkName"];function hi(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function al(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?hi(Object(r),!0).forEach(function(n){H(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hi(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}const ol={[Ot.GOOGLE]:!0,[Ot.FACEBOOK]:!0,[Ot.REDDIT]:!0,[Ot.TWITCH]:!0,[Ot.DISCORD]:!0},ta="sha384-8cr36mP71Xpu3D2M0o8JqjSp4QJqXrJZKQ3CMRQhBWWwO77BOvBlrqotHA69dyY8",sl="max-age=3600",ul=["eth_sendTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","personal_sign","eth_getEncryptionPublicKey","eth_decrypt"];(async function(){try{if(typeof document>"u")return;const t=document.createElement("link"),{torusUrl:r}=await Qi("production",{check:!1,hash:ta,version:""});t.href=`${r}/popup`,t.crossOrigin="anonymous",t.type="text/html",t.rel="prefetch",t.relList&&t.relList.supports&&t.relList.supports("prefetch")&&document.head.appendChild(t)}catch(t){ee.warn(t)}})();class pl{constructor(){let{buttonPosition:t=ot.BOTTOM_LEFT,buttonSize:r=56,modalZIndex:n=99999,apiKey:i="torus-default"}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};H(this,"buttonPosition",ot.BOTTOM_LEFT),H(this,"buttonSize",void 0),H(this,"torusUrl",void 0),H(this,"torusIframe",void 0),H(this,"styleLink",void 0),H(this,"isLoggedIn",void 0),H(this,"isInitialized",void 0),H(this,"torusWidgetVisibility",void 0),H(this,"torusAlert",void 0),H(this,"apiKey",void 0),H(this,"modalZIndex",void 0),H(this,"alertZIndex",void 0),H(this,"torusAlertContainer",void 0),H(this,"isIframeFullScreen",void 0),H(this,"whiteLabel",void 0),H(this,"requestedVerifier",void 0),H(this,"currentVerifier",void 0),H(this,"embedTranslations",void 0),H(this,"ethereum",void 0),H(this,"provider",void 0),H(this,"communicationMux",void 0),H(this,"isLoginCallback",void 0),H(this,"paymentProviders",Le.paymentProviders),H(this,"loginHint",""),H(this,"useWalletConnect",void 0),H(this,"isCustomLogin",!1),this.buttonPosition=t,this.buttonSize=r,this.torusUrl="",this.isLoggedIn=!1,this.isInitialized=!1,this.torusWidgetVisibility=!0,this.requestedVerifier="",this.currentVerifier="",this.apiKey=i,go(i),this.modalZIndex=n,this.alertZIndex=n+1e3,this.isIframeFullScreen=!1}async init(){let{buildEnv:t=xu.PRODUCTION,enableLogging:r=!1,enabledVerifiers:n=ol,network:i={host:"mainnet",chainId:null,networkName:"",blockExplorer:"",ticker:"",tickerName:""},loginConfig:o={},showTorusButton:c=!0,integrity:v={check:!1,hash:ta,version:""},whiteLabel:g,skipTKey:S=!1,useWalletConnect:C=!1,mfaLevel:_="default"}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(this.isInitialized)throw new Error("Already initialized");const{torusUrl:y,logLevel:P}=await Qi(t,v);ee.info(y,"url loaded"),this.torusUrl=y,this.whiteLabel=g,this.useWalletConnect=C,this.isCustomLogin=!!(o&&Object.keys(o).length>0)||!!(g&&Object.keys(g).length>0),ee.setDefaultLevel(P),r?ee.enableAll():ee.disableAll(),this.torusWidgetVisibility=c;const w=new URL(y);w.pathname.endsWith("/")?w.pathname+="popup":w.pathname+="/popup",w.hash=`#isCustomLogin=${this.isCustomLogin}`,this.torusIframe=Tt(`<iframe
        id="torusIframe"
        allow=${C?"camera":""}
        class="torusIframe"
        src="${w.href}"
        style="display: none; position: fixed; top: 0; right: 0; width: 100%; color-scheme: none;
        height: 100%; border: none; border-radius: 0; z-index: ${this.modalZIndex}"
      ></iframe>`),this.torusAlertContainer=Tt('<div id="torusAlertContainer"></div>'),this.torusAlertContainer.style.display="none",this.torusAlertContainer.style.setProperty("z-index",this.alertZIndex.toString());const E=window.document.createElement("link");E.setAttribute("rel","stylesheet"),E.setAttribute("type","text/css"),E.setAttribute("href",`${y}/css/widget.css`),this.styleLink=E;const{defaultLanguage:L=oi(),customTranslations:s={}}=this.whiteLabel||{},T=gi(Le.translations,s)[L]||Le.translations[oi()];this.embedTranslations=T.embed;const j=async()=>(await qu(),new Promise((B,K)=>{this.torusIframe.onload=async()=>{this._setupWeb3();const X=this.communicationMux.getStream("init_stream");X.on("data",G=>{const{name:U,data:oe,error:te}=G;U==="init_complete"&&oe.success?(this.isInitialized=!0,this._displayIframe(this.isIframeFullScreen),B(void 0)):te&&K(new Error(te))}),X.write({name:"init_stream",data:{enabledVerifiers:n,loginConfig:o,whiteLabel:this.whiteLabel,buttonPosition:this.buttonPosition,buttonSize:this.buttonSize,torusWidgetVisibility:this.torusWidgetVisibility,apiKey:this.apiKey,skipTKey:S,network:i,mfaLevel:_}})},window.document.head.appendChild(this.styleLink),window.document.body.appendChild(this.torusIframe),window.document.body.appendChild(this.torusAlertContainer)}));if(t==="production"&&v.check){const B=`${y}/popup`,K=await fetch(B,{cache:"reload"});if(K.headers.get("Cache-Control")!==sl)throw new Error(`Unexpected Cache-Control headers, got ${K.headers.get("Cache-Control")}`);const X=await K.text(),G=Qu({algorithms:["sha384"]},X);if(ee.info(G,"integrity"),G===v.hash)await j();else throw this.clearInit(),new Error("Integrity check failed")}else await j()}login(){let{verifier:t="",login_hint:r=""}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!this.isInitialized)throw new Error("Call init() first");return this.requestedVerifier=t,this.loginHint=r,this.ethereum.enable()}logout(){return new Promise((t,r)=>{if(!this.isLoggedIn){r(new Error("User has not logged in yet"));return}this.communicationMux.getStream("logout").write({name:"logOut"});const i=this.communicationMux.getStream("status");Ne(i,"data",c=>{c.loggedIn?r(new Error("Some Error Occured")):(this.isLoggedIn=!1,this.currentVerifier="",this.requestedVerifier="",t())})})}async cleanUp(){this.isLoggedIn&&await this.logout(),this.clearInit()}clearInit(){function t(r){return r instanceof Element||r instanceof HTMLDocument}t(this.styleLink)&&window.document.body.contains(this.styleLink)&&(this.styleLink.remove(),this.styleLink=void 0),t(this.torusIframe)&&window.document.body.contains(this.torusIframe)&&(this.torusIframe.remove(),this.torusIframe=void 0),t(this.torusAlertContainer)&&window.document.body.contains(this.torusAlertContainer)&&(this.torusAlert=void 0,this.torusAlertContainer.remove(),this.torusAlertContainer=void 0),this.isInitialized=!1}hideTorusButton(){this.torusWidgetVisibility=!1,this._sendWidgetVisibilityStatus(!1),this._displayIframe()}showTorusButton(){this.torusWidgetVisibility=!0,this._sendWidgetVisibilityStatus(!0),this._displayIframe()}setProvider(t){let{host:r="mainnet",chainId:n=null,networkName:i=""}=t,o=ho(t,il);return new Promise((c,v)=>{const g=this.communicationMux.getStream("provider_change");Ne(g,"data",_=>{const{err:y,success:P}=_.data;ee.info(_),y?v(y):P?c():v(new Error("some error occured"))});const C=et();this._handleWindow(C,{target:"_blank",features:si}),g.write({name:"show_provider_change",data:{network:al({host:r,chainId:n,networkName:i},o),preopenInstanceId:C,override:!1}})})}showWallet(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=this.communicationMux.getStream("show_wallet"),i=t?`/${t}`:"";n.write({name:"show_wallet",data:{path:i}}),Ne(n,"data",c=>{if(c.name==="show_wallet_instance"){const{instanceId:v}=c.data,g=new URL(`${this.torusUrl}/wallet${i}`);g.searchParams.append("integrity","true"),g.searchParams.append("instanceId",v),Object.keys(r).forEach(C=>{g.searchParams.append(C,r[C])}),g.hash=`#isCustomLogin=${this.isCustomLogin}`,new di({url:g,features:Gu}).open()}})}async getPublicAddress(t){let{verifier:r,verifierId:n,isExtended:i=!1}=t;if(!Le.supportedVerifierList.includes(r)||!ri[r])throw new Error("Unsupported verifier");const o=r,c=ri[r],v=new URL("https://api.tor.us/lookup/torus");return v.searchParams.append("verifier",c),v.searchParams.append("verifierId",n),v.searchParams.append("walletVerifier",o),v.searchParams.append("network","mainnet"),v.searchParams.append("isExtended",i.toString()),yi(v.href,{headers:{"Content-Type":"application/json; charset=utf-8"}},{useAPIKey:!0})}getUserInfo(t){return new Promise((r,n)=>{if(this.isLoggedIn){const i=this.communicationMux.getStream("user_info_access");i.write({name:"user_info_access_request"}),Ne(i,"data",c=>{const{name:v,data:{approved:g,payload:S,rejected:C,newRequest:_}}=c;if(v==="user_info_access_response"){if(g)r(S);else if(C)n(new Error("User rejected the request"));else if(_){const y=this.communicationMux.getStream("user_info");Ne(y,"data",E=>{E.name==="user_info_response"&&(E.data.approved?r(E.data.payload):n(new Error("User rejected the request")))});const w=et();this._handleWindow(w,{target:"_blank",features:si}),y.write({name:"user_info_request",data:{message:t,preopenInstanceId:w}})}}})}else n(new Error("User has not logged in yet"))})}initiateTopup(t,r){return new Promise((n,i)=>{if(this.isInitialized){const{errors:o,isValid:c}=$u(t,r);if(!c){i(new Error(JSON.stringify(o)));return}const v=this.communicationMux.getStream("topup");Ne(v,"data",C=>{C.name==="topup_response"&&(C.data.success?n(C.data.success):i(new Error(C.data.error)))});const S=et();this._handleWindow(S),v.write({name:"topup_request",data:{provider:t,params:r,preopenInstanceId:S}})}else i(new Error("Torus is not initialized yet"))})}async loginWithPrivateKey(t){const{privateKey:r,userInfo:n}=t;return new Promise((i,o)=>{if(this.isInitialized){if(Buffer.from(r,"hex").length!==32){o(new Error("Invalid private key, Please provide a 32 byte valid secp25k1 private key"));return}const c=this.communicationMux.getStream("login_with_private_key");Ne(c,"data",g=>{g.name==="login_with_private_key_response"&&(g.data.success?i(g.data.success):o(new Error(g.data.error)))}),c.write({name:"login_with_private_key_request",data:{privateKey:r,userInfo:n}})}else o(new Error("Torus is not initialized yet"))})}async showWalletConnectScanner(){if(!this.useWalletConnect)throw new Error("Set `useWalletConnect` as true in init function options to use wallet connect scanner");return new Promise((t,r)=>{if(this.isLoggedIn){const n=this.communicationMux.getStream("wallet_connect_stream");Ne(n,"data",o=>{o.name==="wallet_connect_stream_res"&&(o.data.success?t(o.data.success):r(new Error(o.data.error)),this._displayIframe())}),n.write({name:"wallet_connect_stream_req"}),this._displayIframe(!0)}else r(new Error("User has not logged in yet"))})}_handleWindow(t){let{url:r,target:n,features:i}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t){const o=this.communicationMux.getStream("window"),c=new URL(r||`${this.torusUrl}/redirect?preopenInstanceId=${t}`);c.hash?c.hash+=`&isCustomLogin=${this.isCustomLogin}`:c.hash=`#isCustomLogin=${this.isCustomLogin}`;const v=new di({url:c,target:n,features:i});if(v.open(),!v.window){this._createPopupBlockAlert(t,c.href);return}o.write({name:"opened_window",data:{preopenInstanceId:t}});const g=S=>{let{preopenInstanceId:C,close:_}=S;C===t&&_&&(v.close(),o.removeListener("data",g))};o.on("data",g),v.once("close",()=>{o.write({data:{preopenInstanceId:t,closed:!0}}),o.removeListener("data",g)})}}_setEmbedWhiteLabel(t){const{theme:r}=this.whiteLabel||{};if(r){const{isDark:n=!1,colors:i={}}=r;n&&t.classList.add("torus-dark"),i.torusBrand1&&t.style.setProperty("--torus-brand-1",i.torusBrand1),i.torusGray2&&t.style.setProperty("--torus-gray-2",i.torusGray2)}}_getLogoUrl(){var t,r;let n=`${this.torusUrl}/images/torus_icon-blue.svg`;if((t=this.whiteLabel)!==null&&t!==void 0&&(r=t.theme)!==null&&r!==void 0&&r.isDark){var i;n=((i=this.whiteLabel)===null||i===void 0?void 0:i.logoLight)||n}else{var o;n=((o=this.whiteLabel)===null||o===void 0?void 0:o.logoDark)||n}return n}_sendWidgetVisibilityStatus(t){this.communicationMux.getStream("torus-widget-visibility").write({data:t})}_displayIframe(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;const r={},n=this.buttonSize+14;if(t)r.display="block",r.width="100%",r.height="100%",r.top="0px",r.right="0px",r.left="0px",r.bottom="0px";else switch(r.display=this.torusWidgetVisibility?"block":"none",r.height=`${n}px`,r.width=`${n}px`,this.buttonPosition){case ot.TOP_LEFT:r.top="0px",r.left="0px",r.right="auto",r.bottom="auto";break;case ot.TOP_RIGHT:r.top="0px",r.right="0px",r.left="auto",r.bottom="auto";break;case ot.BOTTOM_RIGHT:r.bottom="0px",r.right="0px",r.top="auto",r.left="auto";break;case ot.BOTTOM_LEFT:default:r.bottom="0px",r.left="0px",r.top="auto",r.right="auto";break}Object.assign(this.torusIframe.style,r),this.isIframeFullScreen=t}_setupWeb3(){ee.info("setupWeb3 running");const t=new Un({name:"embed_metamask",target:"iframe_metamask",targetWindow:this.torusIframe.contentWindow,targetOrigin:new URL(this.torusUrl).origin}),r=new Un({name:"embed_comm",target:"iframe_comm",targetWindow:this.torusIframe.contentWindow,targetOrigin:new URL(this.torusUrl).origin}),n=new ar(t),i=C=>{const _=n[C];n[C]=function(P){if(P&&P==="eth_requestAccounts")return n.enable();for(var w=arguments.length,E=new Array(w>1?w-1:0),L=1;L<w;L++)E[L-1]=arguments[L];return _.apply(this,[P,...E])}};i("send"),i("sendAsync"),n.enable=()=>new Promise((C,_)=>{n.sendAsync({jsonrpc:"2.0",id:et(),method:"eth_requestAccounts",params:[]},(y,P)=>{const{result:w}=P||{};if(y)setTimeout(()=>{_(y)},50);else if(Array.isArray(w)&&w.length>0){const E=()=>{if(this.requestedVerifier!==""&&this.currentVerifier!==this.requestedVerifier){const{requestedVerifier:L}=this;this.logout().then(s=>{this.requestedVerifier=L,this._showLoginPopup(!0,C,_)}).catch(s=>_(s))}else C(w)};this.isLoggedIn?E():this.isLoginCallback=E}else this._showLoginPopup(!0,C,_)})}),n.tryPreopenHandle=(C,_)=>{const y=C;if(!Array.isArray(y)&&ul.includes(y.method)){const P=et();this._handleWindow(P,{target:"_blank",features:ui}),y.preopenInstanceId=P}n._rpcEngine.handle(y,_)};const o=new Proxy(n,{deleteProperty:()=>!0});this.ethereum=o;const c=Gs(r);this.communicationMux=c,c.getStream("window").on("data",C=>{C.name==="create_window"&&this._createPopupBlockAlert(C.data.preopenInstanceId,C.data.url)}),c.getStream("widget").on("data",C=>{const{data:_}=C;this._displayIframe(_)}),c.getStream("status").on("data",C=>{C.loggedIn?(this.isLoggedIn=C.loggedIn,this.currentVerifier=C.verifier):this._displayIframe(),this.isLoginCallback&&(this.isLoginCallback(),delete this.isLoginCallback)}),this.provider=o,this.provider.shouldSendMetadata&&nl(this.provider._rpcEngine),n._initializeState(),ee.debug("Torus - injected provider")}_showLoginPopup(t,r,n){const i=c=>{const{err:v,selectedAddress:g}=c;v?(ee.error(v),n&&n(v)):r&&r([g]),this.isIframeFullScreen&&this._displayIframe()},o=this.communicationMux.getStream("oauth");if(!this.requestedVerifier)this._displayIframe(!0),Ne(o,"data",i),o.write({name:"oauth_modal",data:{calledFromEmbed:t}});else{Ne(o,"data",i);const c=et();this._handleWindow(c),o.write({name:"oauth",data:{calledFromEmbed:t,verifier:this.requestedVerifier,preopenInstanceId:c,login_hint:this.loginHint}})}}_createPopupBlockAlert(t,r){const n=this._getLogoUrl(),i=Tt(`<div id="torusAlert" class="torus-alert--v2"><div id="torusAlert__logo"><img src="${n}" /></div><div><h1 id="torusAlert__title">${this.embedTranslations.actionRequired}</h1><p id="torusAlert__desc">${this.embedTranslations.pendingAction}</p></div></div>`),o=Tt(`<div><a id="torusAlert__btn">${this.embedTranslations.continue}</a></div>`),c=Tt('<div id="torusAlert__btn-container"></div>');c.appendChild(o),i.appendChild(c);const v=()=>{o.addEventListener("click",()=>{this._handleWindow(t,{url:r,target:"_blank",features:ui}),i.remove(),this.torusAlertContainer.children.length===0&&(this.torusAlertContainer.style.display="none")})};this._setEmbedWhiteLabel(i),ni(()=>{this.torusAlertContainer.style.display="block",this.torusAlertContainer.appendChild(i)}),ni(v)}}export{ot as BUTTON_POSITION,Ot as LOGIN_PROVIDER,ue as PAYMENT_PROVIDER,de as SUPPORTED_PAYMENT_NETWORK,xu as TORUS_BUILD_ENV,ar as TorusInpageProvider,ri as WALLET_OPENLOGIN_VERIFIER_MAP,Qe as WALLET_VERIFIERS,pl as default};
