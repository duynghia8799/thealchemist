import{e as Io}from"./abstract-connector.esm.0d01eaaa.js";import{r as $e,i as Po,b as tc}from"./immutable.b0b41084.js";import{j as No,d as gr,m as rc,e as nc,n as Oo,o as ic,s as Lo,f as oc,w as Uo,g as sc,a as ac,b as ut,h as cc,l as Wt,k as fc,i as Ln,c as uc}from"./index.d05fb095.js";import{p as lc,e as hc,s as dc}from"./subscriptionManager.30f84bc7.js";import{e as pc,a as gc,c as Q,s as _c,g as qo}from"./index.js";import{b as vc}from"./browser.d8d9765c.js";import"./index.09240037.js";import"./index.bef74c72.js";const Ho=Io.exports.EventEmitter,mc=$e.inherits;var wc=zt;mc(zt,Ho);function zt(){const e=this;Ho.call(e),e.isLocked=!0}zt.prototype.go=function(){const e=this;e.isLocked=!1,e.emit("unlock")};zt.prototype.stop=function(){const e=this;e.isLocked=!0,e.emit("lock")};zt.prototype.await=function(e){const t=this;t.isLocked?t.once("unlock",e):setTimeout(e)};const yc=No;var bc={cacheIdentifierForPayload:xc,canCache:Do,blockTagForPayload:Mc,paramsWithoutBlockTag:$o,blockTagParamIndex:Un,cacheTypeForPayload:Fo};function xc(e,t={}){if(!Do(e))return null;const{includeBlockRef:r}=t,n=r?e.params:$o(e);return e.method+":"+yc(n)}function Do(e){return Fo(e)!=="never"}function Mc(e){var t=Un(e);return t>=e.params.length?null:e.params[t]}function $o(e){var t=Un(e);return t>=e.params.length?e.params:e.method==="eth_getBlockByNumber"?e.params.slice(1):e.params.slice(0,t)}function Un(e){switch(e.method){case"eth_getStorageAt":return 2;case"eth_getBalance":case"eth_getCode":case"eth_getTransactionCount":case"eth_call":case"eth_estimateGas":return 1;case"eth_getBlockByNumber":return 0;default:return}}function Fo(e){switch(e.method){case"web3_clientVersion":case"web3_sha3":case"eth_protocolVersion":case"eth_getBlockTransactionCountByHash":case"eth_getUncleCountByBlockHash":case"eth_getCode":case"eth_getBlockByHash":case"eth_getTransactionByHash":case"eth_getTransactionByBlockHashAndIndex":case"eth_getTransactionReceipt":case"eth_getUncleByBlockHashAndIndex":case"eth_getCompilers":case"eth_compileLLL":case"eth_compileSolidity":case"eth_compileSerpent":case"shh_version":return"perma";case"eth_getBlockByNumber":case"eth_getBlockTransactionCountByNumber":case"eth_getUncleCountByBlockNumber":case"eth_getTransactionByBlockNumberAndIndex":case"eth_getUncleByBlockNumberAndIndex":return"fork";case"eth_gasPrice":case"eth_getBalance":case"eth_getStorageAt":case"eth_getTransactionCount":case"eth_call":case"eth_estimateGas":case"eth_getFilterLogs":case"eth_getLogs":case"eth_blockNumber":return"block";case"net_version":case"net_peerCount":case"net_listening":case"eth_syncing":case"eth_sign":case"eth_coinbase":case"eth_mining":case"eth_hashrate":case"eth_accounts":case"eth_sendTransaction":case"eth_sendRawTransaction":case"eth_newFilter":case"eth_newBlockFilter":case"eth_newPendingTransactionFilter":case"eth_uninstallFilter":case"eth_getFilterChanges":case"eth_getWork":case"eth_submitWork":case"eth_submitHashrate":case"db_putString":case"db_getString":case"db_putHex":case"db_getHex":case"shh_post":case"shh_newIdentity":case"shh_hasIdentity":case"shh_newGroup":case"shh_addToGroup":case"shh_newFilter":case"shh_uninstallFilter":case"shh_getFilterChanges":case"shh_getMessages":return"never"}}var Ec=Sc;function Sc(){return Math.floor(Number.MAX_SAFE_INTEGER*Math.random())}const kc=Ec,Cc=Po;var qn=Tc;function Tc(e){return Cc({id:kc(),jsonrpc:"2.0",params:[]},e)}const Wo=Io.exports.EventEmitter,Ac=$e.inherits,Pe=gr,Rc=lc,Bc=rc.exports,Ic=nc.exports,Pc=wc,Nc=qn,Oc=function(){};var Lc=He;Ac(He,Wo);function He(e){const t=this;Wo.call(t),t.setMaxListeners(30),e=e||{};const r={sendAsync:t._handleAsync.bind(t)},n=e.blockTrackerProvider||r;t._blockTracker=e.blockTracker||new Rc({provider:n,pollingInterval:e.pollingInterval||4e3,setSkipCacheFlag:!0}),t._ready=new Pc,t.currentBlock=null,t._providers=[]}He.prototype.start=function(e=Oc){const t=this;t._ready.go(),t._blockTracker.on("latest",r=>{t._getBlockByNumberWithRetry(r,(n,i)=>{if(n){this.emit("error",n);return}if(!i){console.log(i),this.emit("error",new Error("Could not find block"));return}const o=Uc(i);t._setCurrentBlock(o),t.emit("rawBlock",i),t.emit("latest",i)})}),t._blockTracker.on("sync",t.emit.bind(t,"sync")),t._blockTracker.on("error",t.emit.bind(t,"error")),t._running=!0,t.emit("start")};He.prototype.stop=function(){const e=this;e._blockTracker.removeAllListeners(),e._running=!1,e.emit("stop")};He.prototype.isRunning=function(){return this._running};He.prototype.addProvider=function(e,t){const r=this;typeof t=="number"?r._providers.splice(t,0,e):r._providers.push(e),e.setEngine(this)};He.prototype.removeProvider=function(e){const t=this,r=t._providers.indexOf(e);if(r<0)throw new Error("Provider not found.");t._providers.splice(r,1)};He.prototype.send=function(e){throw new Error("Web3ProviderEngine does not support synchronous requests.")};He.prototype.sendAsync=function(e,t){const r=this;r._ready.await(function(){Array.isArray(e)?Bc(e,r._handleAsync.bind(r),t):r._handleAsync(e,t)})};He.prototype._getBlockByNumberWithRetry=function(e,t){const r=this;let n=5;i();return;function i(){r._getBlockByNumber(e,o)}function o(c,f){if(c)return t(c);if(!f)if(n>0){n--,setTimeout(function(){i()},1e3);return}else{t(null,null);return}t(null,f)}};He.prototype._getBlockByNumber=function(e,t){const r=Nc({method:"eth_getBlockByNumber",params:[e,!1],skipCache:!0});this._handleAsync(r,(n,i)=>n?t(n):t(null,i.result))};He.prototype._handleAsync=function(e,t){var r=this,n=-1,i=null,o=null,c=[];f();function f(p){if(n+=1,c.unshift(p),n>=r._providers.length)l(new Error('Request for method "'+e.method+'" not handled by any subprovider. Please check your subprovider configuration to ensure this method is handled.'));else try{var d=r._providers[n];d.handleRequest(e,f,l)}catch(y){l(y)}}function l(p,d){o=p,i=d,Ic(c,function(y,k){y?y(o,i,k):k()},function(){var y={id:e.id,jsonrpc:e.jsonrpc,result:i};o!=null?(y.error={message:o.stack||o.message||o,code:-32e3},t(o,y)):t(null,y)})}};He.prototype._setCurrentBlock=function(e){const t=this;t.currentBlock=e,t.emit("block",e)};function Uc(e){return{number:Pe.toBuffer(e.number),hash:Pe.toBuffer(e.hash),parentHash:Pe.toBuffer(e.parentHash),nonce:Pe.toBuffer(e.nonce),mixHash:Pe.toBuffer(e.mixHash),sha3Uncles:Pe.toBuffer(e.sha3Uncles),logsBloom:Pe.toBuffer(e.logsBloom),transactionsRoot:Pe.toBuffer(e.transactionsRoot),stateRoot:Pe.toBuffer(e.stateRoot),receiptsRoot:Pe.toBuffer(e.receiptRoot||e.receiptsRoot),miner:Pe.toBuffer(e.miner),difficulty:Pe.toBuffer(e.difficulty),totalDifficulty:Pe.toBuffer(e.totalDifficulty),size:Pe.toBuffer(e.size),extraData:Pe.toBuffer(e.extraData),gasLimit:Pe.toBuffer(e.gasLimit),gasUsed:Pe.toBuffer(e.gasUsed),timestamp:Pe.toBuffer(e.timestamp),transactions:e.transactions}}const qc=qn;var _r=Ct;function Ct(){}Ct.prototype.setEngine=function(e){const t=this;t.engine||(t.engine=e,e.on("block",function(r){t.currentBlock=r}),e.on("start",function(){t.start()}),e.on("stop",function(){t.stop()}))};Ct.prototype.handleRequest=function(e,t,r){throw new Error("Subproviders should override `handleRequest`.")};Ct.prototype.emitPayload=function(e,t){this.engine.sendAsync(qc(e),t)};Ct.prototype.stop=function(){};Ct.prototype.start=function(){};const Hc=_r;class Dc extends Hc{constructor(t){if(super(),!t)throw new Error("JsonRpcEngineMiddlewareSubprovider - no constructorFn specified");this._constructorFn=t}setEngine(t){if(this.middleware)throw new Error("JsonRpcEngineMiddlewareSubprovider - subprovider added to engine twice");const r=t._blockTracker,n=this._constructorFn({engine:t,provider:t,blockTracker:r});if(!n)throw new Error("JsonRpcEngineMiddlewareSubprovider - _constructorFn did not return middleware");if(typeof n!="function")throw new Error("JsonRpcEngineMiddlewareSubprovider - specified middleware is not a function");this.middleware=n}handleRequest(t,r,n){const i={id:t.id};this.middleware(t,i,o,c);function o(f){r((l,p,d)=>{l?(delete i.result,i.error={message:l.message||l}):i.result=p,f?f(d):d()})}function c(f){if(f)return n(f);n(null,i.result)}}}var Hn=Dc;const $c=No;var Fc={cacheIdentifierForPayload:Wc,canCache:zo,blockTagForPayload:zc,paramsWithoutBlockTag:jo,blockTagParamIndex:Dn,cacheTypeForPayload:Ko};function Wc(e,t){const r=t?jo(e):e.params;return zo(e)?e.method+":"+$c(r):null}function zo(e){return Ko(e)!=="never"}function zc(e){let t=Dn(e);return t>=e.params.length?null:e.params[t]}function jo(e){const t=Dn(e);return t>=e.params.length?e.params:e.method==="eth_getBlockByNumber"?e.params.slice(1):e.params.slice(0,t)}function Dn(e){switch(e.method){case"eth_getStorageAt":return 2;case"eth_getBalance":case"eth_getCode":case"eth_getTransactionCount":case"eth_call":return 1;case"eth_getBlockByNumber":return 0;default:return}}function Ko(e){switch(e.method){case"web3_clientVersion":case"web3_sha3":case"eth_protocolVersion":case"eth_getBlockTransactionCountByHash":case"eth_getUncleCountByBlockHash":case"eth_getCode":case"eth_getBlockByHash":case"eth_getTransactionByHash":case"eth_getTransactionByBlockHashAndIndex":case"eth_getTransactionReceipt":case"eth_getUncleByBlockHashAndIndex":case"eth_getCompilers":case"eth_compileLLL":case"eth_compileSolidity":case"eth_compileSerpent":case"shh_version":case"test_permaCache":return"perma";case"eth_getBlockByNumber":case"eth_getBlockTransactionCountByNumber":case"eth_getUncleCountByBlockNumber":case"eth_getTransactionByBlockNumberAndIndex":case"eth_getUncleByBlockNumberAndIndex":case"test_forkCache":return"fork";case"eth_gasPrice":case"eth_blockNumber":case"eth_getBalance":case"eth_getStorageAt":case"eth_getTransactionCount":case"eth_call":case"eth_estimateGas":case"eth_getFilterLogs":case"eth_getLogs":case"test_blockCache":return"block";case"net_version":case"net_peerCount":case"net_listening":case"eth_syncing":case"eth_sign":case"eth_coinbase":case"eth_mining":case"eth_hashrate":case"eth_accounts":case"eth_sendTransaction":case"eth_sendRawTransaction":case"eth_newFilter":case"eth_newBlockFilter":case"eth_newPendingTransactionFilter":case"eth_uninstallFilter":case"eth_getFilterChanges":case"eth_getWork":case"eth_submitWork":case"eth_submitHashrate":case"db_putString":case"db_getString":case"db_putHex":case"db_getHex":case"shh_post":case"shh_newIdentity":case"shh_hasIdentity":case"shh_newGroup":case"shh_addToGroup":case"shh_newFilter":case"shh_uninstallFilter":case"shh_getFilterChanges":case"shh_getMessages":case"test_neverCache":return"never"}}var jc=function(t){return(r,n,i,o)=>{let c;const f=new Promise(y=>{c=y});let l,p;t(r,n,async()=>{p=!0,i(y=>{l=y,c()}),await f}).then(async()=>{p?(await f,l(null)):o(null)}).catch(y=>{l?l(y):o(y)})}};const gt=Fc,Kc=jc,Vc=[void 0,null,"<nil>"];var Jc=Gc;function Gc(e={}){const{blockTracker:t}=e;if(!t)throw new Error("createBlockCacheMiddleware - No BlockTracker specified");const r=new Yc,n={perma:r,block:r,fork:r};return Kc(async(i,o,c)=>{if(i.skipCache)return c();const f=gt.cacheTypeForPayload(i),l=n[f];if(!l||!l.canCacheRequest(i))return c();let p=gt.blockTagForPayload(i);p||(p="latest");let d;if(p==="earliest")d="0x00";else if(p==="latest"){const k=await t.getLatestBlock();r.clearBefore(k),d=k}else d=p;const y=await l.get(i,d);y===void 0?(await c(),await l.set(i,d,o.result)):o.result=y})}class Yc{constructor(){this.cache={}}getBlockCacheForPayload(t,r){const n=Number.parseInt(r,16);let i=this.cache[n];if(!i){const o={};this.cache[n]=o,i=o}return i}async get(t,r){const n=this.getBlockCacheForPayload(t,r);if(!n)return;const i=gt.cacheIdentifierForPayload(t,!0);return n[i]}async set(t,r,n){if(!this.canCacheResult(t,n))return;const o=this.getBlockCacheForPayload(t,r),c=gt.cacheIdentifierForPayload(t,!0);o[c]=n}canCacheRequest(t){return!(!gt.canCache(t)||gt.blockTagForPayload(t)==="pending")}canCacheResult(t,r){if(!Vc.includes(r))return!(["eth_getTransactionByHash","eth_getTransactionReceipt"].includes(t.method)&&(!r||!r.blockHash||r.blockHash==="0x0000000000000000000000000000000000000000000000000000000000000000"))}clearBefore(t){const r=this,n=Number.parseInt(t,16);Object.keys(r.cache).map(Number).filter(i=>i<n).forEach(i=>delete r.cache[i])}}const Zc=Hn,Qc=Jc;class Xc extends Zc{constructor(t){super(({blockTracker:r})=>Qc(Object.assign({blockTracker:r},t)))}}var ef=Xc;const tf=$e.inherits,rf=_r;var nf=$n;tf($n,rf);function $n(e){const t=this;e=e||{},t.staticResponses=e}$n.prototype.handleRequest=function(e,t,r){var i=this.staticResponses[e.method];typeof i=="function"?i(e,t,r):i!==void 0?setTimeout(()=>r(null,i)):t()};const of=Hn,sf=hc;class af extends of{constructor(){super(({blockTracker:t,provider:r,engine:n})=>sf({blockTracker:t,provider:r}))}}var cf=af,gn={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(B,b){if(b=(0,f.default)(b||o.default),!(0,n.default)(B))return b(new Error("First argument to waterfall must be an array of functions"));if(!B.length)return b();var M=0;function C(A){var P=(0,R.default)(B[M++]);A.push((0,y.default)(E)),P.apply(null,A)}function E(A){if(A||M===B.length)return b.apply(null,arguments);C((0,p.default)(arguments,1))}C([])};var r=pc,n=T(r),i=Oo,o=T(i),c=ic.exports,f=T(c),l=Lo.exports,p=T(l),d=oc.exports,y=T(d),k=Uo,R=T(k);function T(B){return B&&B.__esModule?B:{default:B}}e.exports=t.default})(gn,gn.exports);var _n={exports:{}},vn={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=y;var r=Oo,n=d(r),i=gc,o=d(i),c=Lo.exports,f=d(c),l=Uo,p=d(l);function d(k){return k&&k.__esModule?k:{default:k}}function y(k,R,T){T=T||n.default;var B=(0,o.default)(R)?[]:{};k(R,function(b,M,C){(0,p.default)(b)(function(E,A){arguments.length>2&&(A=(0,f.default)(arguments,1)),B[M]=A,C(E)})},function(b){T(b,B)})}e.exports=t.default})(vn,vn.exports);(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=f;var r=sc.exports,n=c(r),i=vn.exports,o=c(i);function c(l){return l&&l.__esModule?l:{default:l}}function f(l,p){(0,o.default)(n.default,l,p)}e.exports=t.default})(_n,_n.exports);var Vo={exports:{}},Jo={},vr={},Tt={};Object.defineProperty(Tt,"__esModule",{value:!0});var ct=ut.exports,ff=ac.ec,Fn=new ff("secp256k1"),wt=Fn.curve;Tt.privateKeyExport=function(e,t){t===void 0&&(t=!0);var r=new ct(e);if(r.ucmp(wt.n)>=0)throw new Error("couldn't export to DER format");var n=Fn.g.mul(r);return Go(n.getX(),n.getY(),t)};Tt.privateKeyModInverse=function(e){var t=new ct(e);if(t.ucmp(wt.n)>=0||t.isZero())throw new Error("private key range is invalid");return t.invm(wt.n).toArrayLike(Buffer,"be",32)};Tt.signatureImport=function(e){var t=new ct(e.r);t.ucmp(wt.n)>=0&&(t=new ct(0));var r=new ct(e.s);return r.ucmp(wt.n)>=0&&(r=new ct(0)),Buffer.concat([t.toArrayLike(Buffer,"be",32),r.toArrayLike(Buffer,"be",32)])};Tt.ecdhUnsafe=function(e,t,r){r===void 0&&(r=!0);var n=Fn.keyFromPublic(e),i=new ct(t);if(i.ucmp(wt.n)>=0||i.isZero())throw new Error("scalar was invalid (zero or overflow)");var o=n.pub.mul(i);return Go(o.getX(),o.getY(),r)};var Go=function(e,t,r){var n;return r?(n=Buffer.alloc(33),n[0]=t.isOdd()?3:2,e.toArrayLike(Buffer,"be",32).copy(n,1)):(n=Buffer.alloc(65),n[0]=4,e.toArrayLike(Buffer,"be",32).copy(n,1),t.toArrayLike(Buffer,"be",32).copy(n,33)),n},jt={};Object.defineProperty(jt,"__esModule",{value:!0});var uf=Buffer.from([48,129,211,2,1,1,4,32,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,160,129,133,48,129,130,2,1,1,48,44,6,7,42,134,72,206,61,1,1,2,33,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,255,255,252,47,48,6,4,1,0,4,1,7,4,33,2,121,190,102,126,249,220,187,172,85,160,98,149,206,135,11,7,2,155,252,219,45,206,40,217,89,242,129,91,22,248,23,152,2,33,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,186,174,220,230,175,72,160,59,191,210,94,140,208,54,65,65,2,1,1,161,36,3,34,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),lf=Buffer.from([48,130,1,19,2,1,1,4,32,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,160,129,165,48,129,162,2,1,1,48,44,6,7,42,134,72,206,61,1,1,2,33,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,255,255,252,47,48,6,4,1,0,4,1,7,4,65,4,121,190,102,126,249,220,187,172,85,160,98,149,206,135,11,7,2,155,252,219,45,206,40,217,89,242,129,91,22,248,23,152,72,58,218,119,38,163,196,101,93,164,251,252,14,17,8,168,253,23,180,72,166,133,84,25,156,71,208,143,251,16,212,184,2,33,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,186,174,220,230,175,72,160,59,191,210,94,140,208,54,65,65,2,1,1,161,68,3,66,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);jt.privateKeyExport=function(e,t,r){r===void 0&&(r=!0);var n=Buffer.from(r?uf:lf);return e.copy(n,r?8:9),t.copy(n,r?181:214),n};jt.privateKeyImport=function(e){var t=e.length,r=0;if(t<r+1||e[r]!==48||(r+=1,t<r+1||!(e[r]&128)))return null;var n=e[r]&127;if(r+=1,n<1||n>2||t<r+n)return null;var i=e[r+n-1]|(n>1?e[r+n-2]<<8:0);return r+=n,t<r+i||t<r+3||e[r]!==2||e[r+1]!==1||e[r+2]!==1||(r+=3,t<r+2||e[r]!==4||e[r+1]>32||t<r+2+e[r+1])?null:e.slice(r+2,r+2+e[r+1])};jt.signatureImportLax=function(e){var t=Buffer.alloc(32,0),r=Buffer.alloc(32,0),n=e.length,i=0;if(e[i++]!==48)return null;var o=e[i++];if(o&128&&(i+=o-128,i>n)||e[i++]!==2)return null;var c=e[i++];if(c&128){if(o=c-128,i+o>n)return null;for(;o>0&&e[i]===0;i+=1,o-=1);for(c=0;o>0;i+=1,o-=1)c=(c<<8)+e[i]}if(c>n-i)return null;var f=i;if(i+=c,e[i++]!==2)return null;var l=e[i++];if(l&128){if(o=l-128,i+o>n)return null;for(;o>0&&e[i]===0;i+=1,o-=1);for(l=0;o>0;i+=1,o-=1)l=(l<<8)+e[i]}if(l>n-i)return null;var p=i;for(i+=l;c>0&&e[f]===0;c-=1,f+=1);if(c>32)return null;var d=e.slice(f,f+c);for(d.copy(t,32-d.length);l>0&&e[p]===0;l-=1,p+=1);if(l>32)return null;var y=e.slice(p,p+l);return y.copy(r,32-y.length),{r:t,s:r}};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ecdhUnsafe=e.ecdh=e.recover=e.verify=e.sign=e.signatureImportLax=e.signatureImport=e.signatureExport=e.signatureNormalize=e.publicKeyCombine=e.publicKeyTweakMul=e.publicKeyTweakAdd=e.publicKeyVerify=e.publicKeyConvert=e.publicKeyCreate=e.privateKeyTweakMul=e.privateKeyTweakAdd=e.privateKeyModInverse=e.privateKeyNegate=e.privateKeyImport=e.privateKeyExport=e.privateKeyVerify=void 0;var t=cc,r=Tt,n=jt;e.privateKeyVerify=function(i){return i.length!==32?!1:t.privateKeyVerify(Uint8Array.from(i))},e.privateKeyExport=function(i,o){if(i.length!==32)throw new RangeError("private key length is invalid");var c=r.privateKeyExport(i,o);return n.privateKeyExport(i,c,o)},e.privateKeyImport=function(i){if(i=n.privateKeyImport(i),i!==null&&i.length===32&&e.privateKeyVerify(i))return i;throw new Error("couldn't import from DER format")},e.privateKeyNegate=function(i){return Buffer.from(t.privateKeyNegate(Uint8Array.from(i)))},e.privateKeyModInverse=function(i){if(i.length!==32)throw new Error("private key length is invalid");return Buffer.from(r.privateKeyModInverse(Uint8Array.from(i)))},e.privateKeyTweakAdd=function(i,o){return Buffer.from(t.privateKeyTweakAdd(Uint8Array.from(i),o))},e.privateKeyTweakMul=function(i,o){return Buffer.from(t.privateKeyTweakMul(Uint8Array.from(i),Uint8Array.from(o)))},e.publicKeyCreate=function(i,o){return Buffer.from(t.publicKeyCreate(Uint8Array.from(i),o))},e.publicKeyConvert=function(i,o){return Buffer.from(t.publicKeyConvert(Uint8Array.from(i),o))},e.publicKeyVerify=function(i){return i.length!==33&&i.length!==65?!1:t.publicKeyVerify(Uint8Array.from(i))},e.publicKeyTweakAdd=function(i,o,c){return Buffer.from(t.publicKeyTweakAdd(Uint8Array.from(i),Uint8Array.from(o),c))},e.publicKeyTweakMul=function(i,o,c){return Buffer.from(t.publicKeyTweakMul(Uint8Array.from(i),Uint8Array.from(o),c))},e.publicKeyCombine=function(i,o){var c=[];return i.forEach(function(f){c.push(Uint8Array.from(f))}),Buffer.from(t.publicKeyCombine(c,o))},e.signatureNormalize=function(i){return Buffer.from(t.signatureNormalize(Uint8Array.from(i)))},e.signatureExport=function(i){return Buffer.from(t.signatureExport(Uint8Array.from(i)))},e.signatureImport=function(i){return Buffer.from(t.signatureImport(Uint8Array.from(i)))},e.signatureImportLax=function(i){if(i.length===0)throw new RangeError("signature length is invalid");var o=n.signatureImportLax(i);if(o===null)throw new Error("couldn't parse DER signature");return r.signatureImport(o)},e.sign=function(i,o,c){if(c===null)throw new TypeError("options should be an Object");var f=void 0;if(c){if(f={},c.data===null)throw new TypeError("options.data should be a Buffer");if(c.data){if(c.data.length!=32)throw new RangeError("options.data length is invalid");f.data=new Uint8Array(c.data)}if(c.noncefn===null)throw new TypeError("options.noncefn should be a Function");c.noncefn&&(f.noncefn=function(p,d,y,k,R){var T=y!=null?Buffer.from(y):null,B=k!=null?Buffer.from(k):null,b=Buffer.from("");return c.noncefn&&(b=c.noncefn(Buffer.from(p),Buffer.from(d),T,B,R)),new Uint8Array(b)})}var l=t.ecdsaSign(Uint8Array.from(i),Uint8Array.from(o),f);return{signature:Buffer.from(l.signature),recovery:l.recid}},e.verify=function(i,o,c){return t.ecdsaVerify(Uint8Array.from(o),Uint8Array.from(i),c)},e.recover=function(i,o,c,f){return Buffer.from(t.ecdsaRecover(Uint8Array.from(o),c,Uint8Array.from(i),f))},e.ecdh=function(i,o){return Buffer.from(t.ecdh(Uint8Array.from(i),Uint8Array.from(o),{}))},e.ecdhUnsafe=function(i,o,c){if(i.length!==33&&i.length!==65)throw new RangeError("public key length is invalid");if(o.length!==32)throw new RangeError("private key length is invalid");return Buffer.from(r.ecdhUnsafe(Uint8Array.from(i),Uint8Array.from(o),c))}})(vr);var Yo={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.KECCAK256_RLP=e.KECCAK256_RLP_S=e.KECCAK256_RLP_ARRAY=e.KECCAK256_RLP_ARRAY_S=e.KECCAK256_NULL=e.KECCAK256_NULL_S=e.TWO_POW256=e.MAX_INTEGER=void 0;var t=ut.exports;e.MAX_INTEGER=new t("ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff",16),e.TWO_POW256=new t("10000000000000000000000000000000000000000000000000000000000000000",16),e.KECCAK256_NULL_S="c5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470",e.KECCAK256_NULL=Buffer.from(e.KECCAK256_NULL_S,"hex"),e.KECCAK256_RLP_ARRAY_S="1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347",e.KECCAK256_RLP_ARRAY=Buffer.from(e.KECCAK256_RLP_ARRAY_S,"hex"),e.KECCAK256_RLP_S="56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421",e.KECCAK256_RLP=Buffer.from(e.KECCAK256_RLP_S,"hex")})(Yo);var Zo={},At={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.baToJSON=e.addHexPrefix=e.toUnsigned=e.fromSigned=e.bufferToHex=e.bufferToInt=e.toBuffer=e.stripZeros=e.unpad=e.setLengthRight=e.setLength=e.setLengthLeft=e.zeros=void 0;var t=Wt,r=ut.exports;e.zeros=function(n){return Buffer.allocUnsafe(n).fill(0)},e.setLengthLeft=function(n,i,o){o===void 0&&(o=!1);var c=e.zeros(i);return n=e.toBuffer(n),o?n.length<i?(n.copy(c),c):n.slice(0,i):n.length<i?(n.copy(c,i-n.length),c):n.slice(-i)},e.setLength=e.setLengthLeft,e.setLengthRight=function(n,i){return e.setLength(n,i,!0)},e.unpad=function(n){n=t.stripHexPrefix(n);for(var i=n[0];n.length>0&&i.toString()==="0";)n=n.slice(1),i=n[0];return n},e.stripZeros=e.unpad,e.toBuffer=function(n){if(!Buffer.isBuffer(n))if(Array.isArray(n))n=Buffer.from(n);else if(typeof n=="string")if(t.isHexString(n))n=Buffer.from(t.padToEven(t.stripHexPrefix(n)),"hex");else throw new Error("Cannot convert string to buffer. toBuffer only supports 0x-prefixed hex strings and this string was given: "+n);else if(typeof n=="number")n=t.intToBuffer(n);else if(n==null)n=Buffer.allocUnsafe(0);else if(r.isBN(n))n=n.toArrayLike(Buffer);else if(n.toArray)n=Buffer.from(n.toArray());else throw new Error("invalid type");return n},e.bufferToInt=function(n){return new r(e.toBuffer(n)).toNumber()},e.bufferToHex=function(n){return n=e.toBuffer(n),"0x"+n.toString("hex")},e.fromSigned=function(n){return new r(n).fromTwos(256)},e.toUnsigned=function(n){return Buffer.from(n.toTwos(256).toArray())},e.addHexPrefix=function(n){return typeof n!="string"||t.isHexPrefixed(n)?n:"0x"+n},e.baToJSON=function(n){if(Buffer.isBuffer(n))return"0x"+n.toString("hex");if(n instanceof Array){for(var i=[],o=0;o<n.length;o++)i.push(e.baToJSON(n[o]));return i}}})(At);var mr={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.rlphash=e.ripemd160=e.sha256=e.keccak256=e.keccak=void 0;var t=fc,r=t.keccak224,n=t.keccak384,i=t.keccak256,o=t.keccak512,c=vc,f=Wt,l=Ln,p=At;e.keccak=function(d,y){switch(y===void 0&&(y=256),typeof d=="string"&&!f.isHexString(d)?d=Buffer.from(d,"utf8"):d=p.toBuffer(d),y||(y=256),y){case 224:return r(d);case 256:return i(d);case 384:return n(d);case 512:return o(d);default:throw new Error("Invald algorithm: keccak"+y)}},e.keccak256=function(d){return e.keccak(d)},e.sha256=function(d){return d=p.toBuffer(d),c("sha256").update(d).digest()},e.ripemd160=function(d,y){d=p.toBuffer(d);var k=c("rmd160").update(d).digest();return y===!0?p.setLength(k,32):k},e.rlphash=function(d){return e.keccak(l.encode(d))}})(mr);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.importPublic=e.privateToPublic=e.privateToAddress=e.publicToAddress=e.pubToAddress=e.isValidPublic=e.isValidPrivate=e.isPrecompiled=e.generateAddress2=e.generateAddress=e.isValidChecksumAddress=e.toChecksumAddress=e.isZeroAddress=e.isValidAddress=e.zeroAddress=void 0;var t=$e,r=Wt,n=vr,i=ut.exports,o=At,c=mr;e.zeroAddress=function(){var f=20,l=o.zeros(f);return o.bufferToHex(l)},e.isValidAddress=function(f){return/^0x[0-9a-fA-F]{40}$/.test(f)},e.isZeroAddress=function(f){var l=e.zeroAddress();return l===o.addHexPrefix(f)},e.toChecksumAddress=function(f,l){f=r.stripHexPrefix(f).toLowerCase();for(var p=l!==void 0?l.toString()+"0x":"",d=c.keccak(p+f).toString("hex"),y="0x",k=0;k<f.length;k++)parseInt(d[k],16)>=8?y+=f[k].toUpperCase():y+=f[k];return y},e.isValidChecksumAddress=function(f,l){return e.isValidAddress(f)&&e.toChecksumAddress(f,l)===f},e.generateAddress=function(f,l){f=o.toBuffer(f);var p=new i(l);return p.isZero()?c.rlphash([f,null]).slice(-20):c.rlphash([f,Buffer.from(p.toArray())]).slice(-20)},e.generateAddress2=function(f,l,p){var d=o.toBuffer(f),y=o.toBuffer(l),k=o.toBuffer(p);t(d.length===20),t(y.length===32);var R=c.keccak256(Buffer.concat([Buffer.from("ff","hex"),d,y,c.keccak256(k)]));return R.slice(-20)},e.isPrecompiled=function(f){var l=o.unpad(f);return l.length===1&&l[0]>=1&&l[0]<=8},e.isValidPrivate=function(f){return n.privateKeyVerify(f)},e.isValidPublic=function(f,l){return l===void 0&&(l=!1),f.length===64?n.publicKeyVerify(Buffer.concat([Buffer.from([4]),f])):l?n.publicKeyVerify(f):!1},e.pubToAddress=function(f,l){return l===void 0&&(l=!1),f=o.toBuffer(f),l&&f.length!==64&&(f=n.publicKeyConvert(f,!1).slice(1)),t(f.length===64),c.keccak(f).slice(-20)},e.publicToAddress=e.pubToAddress,e.privateToAddress=function(f){return e.publicToAddress(e.privateToPublic(f))},e.privateToPublic=function(f){return f=o.toBuffer(f),n.publicKeyCreate(f,!1).slice(1)},e.importPublic=function(f){return f=o.toBuffer(f),f.length!==64&&(f=n.publicKeyConvert(f,!1).slice(1)),f}})(Zo);var Ue={};Object.defineProperty(Ue,"__esModule",{value:!0});Ue.hashPersonalMessage=Ue.isValidSignature=Ue.fromRpcSig=Ue.toRpcSig=Ue.ecrecover=Ue.ecsign=void 0;var mn=vr,Zt=ut.exports,ft=At,hf=mr;Ue.ecsign=function(e,t,r){var n=mn.sign(e,t),i=n.recovery,o={r:n.signature.slice(0,32),s:n.signature.slice(32,64),v:r?i+(r*2+35):i+27};return o};Ue.ecrecover=function(e,t,r,n,i){var o=Buffer.concat([ft.setLength(r,32),ft.setLength(n,32)],64),c=Wn(t,i);if(!zn(c))throw new Error("Invalid signature v value");var f=mn.recover(e,o,c);return mn.publicKeyConvert(f,!1).slice(1)};Ue.toRpcSig=function(e,t,r,n){var i=Wn(e,n);if(!zn(i))throw new Error("Invalid signature v value");return ft.bufferToHex(Buffer.concat([ft.setLengthLeft(t,32),ft.setLengthLeft(r,32),ft.toBuffer(e)]))};Ue.fromRpcSig=function(e){var t=ft.toBuffer(e);if(t.length!==65)throw new Error("Invalid signature length");var r=t[64];return r<27&&(r+=27),{v:r,r:t.slice(0,32),s:t.slice(32,64)}};Ue.isValidSignature=function(e,t,r,n,i){n===void 0&&(n=!0);var o=new Zt("7fffffffffffffffffffffffffffffff5d576e7357a4501ddfe92f46681b20a0",16),c=new Zt("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141",16);if(t.length!==32||r.length!==32||!zn(Wn(e,i)))return!1;var f=new Zt(t),l=new Zt(r);return!(f.isZero()||f.gt(c)||l.isZero()||l.gt(c)||n&&l.cmp(o)===1)};Ue.hashPersonalMessage=function(e){var t=Buffer.from(`Ethereum Signed Message:
`+e.length.toString(),"utf-8");return hf.keccak(Buffer.concat([t,e]))};function Wn(e,t){return t?e-(2*t+35):e-27}function zn(e){return e===0||e===1}var wr={};Object.defineProperty(wr,"__esModule",{value:!0});wr.defineProperties=void 0;var Di=$e,df=Wt,$i=Ln,Qt=At;wr.defineProperties=function(e,t,r){if(e.raw=[],e._fields=[],e.toJSON=function(i){if(i===void 0&&(i=!1),i){var o={};return e._fields.forEach(function(c){o[c]="0x"+e[c].toString("hex")}),o}return Qt.baToJSON(e.raw)},e.serialize=function(){return $i.encode(e.raw)},t.forEach(function(i,o){e._fields.push(i.name);function c(){return e.raw[o]}function f(l){l=Qt.toBuffer(l),l.toString("hex")==="00"&&!i.allowZero&&(l=Buffer.allocUnsafe(0)),i.allowLess&&i.length?(l=Qt.stripZeros(l),Di(i.length>=l.length,"The field "+i.name+" must not have more "+i.length+" bytes")):!(i.allowZero&&l.length===0)&&i.length&&Di(i.length===l.length,"The field "+i.name+" must have byte length of "+i.length),e.raw[o]=l}Object.defineProperty(e,i.name,{enumerable:!0,configurable:!0,get:c,set:f}),i.default&&(e[i.name]=i.default),i.alias&&Object.defineProperty(e,i.alias,{enumerable:!1,configurable:!0,set:f,get:c})}),r)if(typeof r=="string"&&(r=Buffer.from(df.stripHexPrefix(r),"hex")),Buffer.isBuffer(r)&&(r=$i.decode(r)),Array.isArray(r)){if(r.length>e._fields.length)throw new Error("wrong number of fields in data");r.forEach(function(i,o){e[e._fields[o]]=Qt.toBuffer(i)})}else if(typeof r=="object"){var n=Object.keys(r);t.forEach(function(i){n.indexOf(i.name)!==-1&&(e[i.name]=r[i.name]),n.indexOf(i.alias)!==-1&&(e[i.alias]=r[i.alias])})}else throw new Error("invalid data")};(function(e){var t=Q&&Q.__createBinding||(Object.create?function(f,l,p,d){d===void 0&&(d=p),Object.defineProperty(f,d,{enumerable:!0,get:function(){return l[p]}})}:function(f,l,p,d){d===void 0&&(d=p),f[d]=l[p]}),r=Q&&Q.__exportStar||function(f,l){for(var p in f)p!=="default"&&!l.hasOwnProperty(p)&&t(l,f,p)};Object.defineProperty(e,"__esModule",{value:!0}),e.secp256k1=e.rlp=e.BN=void 0;var n=vr;e.secp256k1=n;var i=Wt,o=ut.exports;e.BN=o;var c=Ln;e.rlp=c,Object.assign(e,i),r(Yo,e),r(Zo,e),r(mr,e),r(Ue,e),r(At,e),r(wr,e)})(Jo);const je=Jo,Le=ut.exports;var Y=function(){};function yr(e){return e.startsWith("int[")?"int256"+e.slice(3):e==="int"?"int256":e.startsWith("uint[")?"uint256"+e.slice(4):e==="uint"?"uint256":e.startsWith("fixed[")?"fixed128x128"+e.slice(5):e==="fixed"?"fixed128x128":e.startsWith("ufixed[")?"ufixed128x128"+e.slice(6):e==="ufixed"?"ufixed128x128":e}Y.eventID=function(e,t){var r=e+"("+t.map(yr).join(",")+")";return je.keccak256(Buffer.from(r))};Y.methodID=function(e,t){return Y.eventID(e,t).slice(0,4)};function Qe(e){return parseInt(/^\D+(\d+)$/.exec(e)[1],10)}function wn(e){var t=/^\D+(\d+)x(\d+)$/.exec(e);return[parseInt(t[1],10),parseInt(t[2],10)]}function Kt(e){var t=e.match(/(.*)\[(.*?)\]$/);return t?t[2]===""?"dynamic":parseInt(t[2],10):null}function at(e){var t=typeof e;if(t==="string")return je.isHexPrefixed(e)?new Le(je.stripHexPrefix(e),16):new Le(e,10);if(t==="number")return new Le(e);if(e.toArray)return e;throw new Error("Argument is not a number")}function Qo(e){var t=/^(\w+)\((.*)\)$/.exec(e);if(t.length!==3)throw new Error("Invalid method signature");var r=/^(.+)\):\((.+)$/.exec(t[2]);if(r!==null&&r.length===3)return{method:t[1],args:r[1].split(","),retargs:r[2].split(",")};var n=t[2].split(",");return n.length===1&&n[0]===""&&(n=[]),{method:t[1],args:n}}function ze(e,t){var r,n,i,o;if(e==="address")return ze("uint160",at(t));if(e==="bool")return ze("uint8",t?1:0);if(e==="string")return ze("bytes",Buffer.from(t,"utf8"));if(Ht(e)){if(typeof t.length>"u")throw new Error("Not an array?");if(r=Kt(e),r!=="dynamic"&&r!==0&&t.length>r)throw new Error("Elements exceed array size: "+r);i=[],e=e.slice(0,e.lastIndexOf("[")),typeof t=="string"&&(t=JSON.parse(t));for(o in t)i.push(ze(e,t[o]));if(r==="dynamic"){var c=ze("uint256",t.length);i.unshift(c)}return Buffer.concat(i)}else{if(e==="bytes")return t=Buffer.from(t),i=Buffer.concat([ze("uint256",t.length),t]),t.length%32!==0&&(i=Buffer.concat([i,je.zeros(32-t.length%32)])),i;if(e.startsWith("bytes")){if(r=Qe(e),r<1||r>32)throw new Error("Invalid bytes<N> width: "+r);return je.setLengthRight(t,32)}else if(e.startsWith("uint")){if(r=Qe(e),r%8||r<8||r>256)throw new Error("Invalid uint<N> width: "+r);if(n=at(t),n.bitLength()>r)throw new Error("Supplied uint exceeds width: "+r+" vs "+n.bitLength());if(n<0)throw new Error("Supplied uint is negative");return n.toArrayLike(Buffer,"be",32)}else if(e.startsWith("int")){if(r=Qe(e),r%8||r<8||r>256)throw new Error("Invalid int<N> width: "+r);if(n=at(t),n.bitLength()>r)throw new Error("Supplied int exceeds width: "+r+" vs "+n.bitLength());return n.toTwos(256).toArrayLike(Buffer,"be",32)}else if(e.startsWith("ufixed")){if(r=wn(e),n=at(t),n<0)throw new Error("Supplied ufixed is negative");return ze("uint256",n.mul(new Le(2).pow(new Le(r[1]))))}else if(e.startsWith("fixed"))return r=wn(e),ze("int256",at(t).mul(new Le(2).pow(new Le(r[1]))))}throw new Error("Unsupported or invalid type: "+e)}function Fe(e,t,r){typeof e=="string"&&(e=jn(e));var n,i,o,c;if(e.name==="address")return Fe(e.rawType,t,r).toArrayLike(Buffer,"be",20).toString("hex");if(e.name==="bool")return Fe(e.rawType,t,r).toString()===new Le(1).toString();if(e.name==="string"){var f=Fe(e.rawType,t,r);return Buffer.from(f,"utf8").toString()}else if(e.isArray){for(o=[],n=e.size,e.size==="dynamic"&&(r=Fe("uint256",t,r).toNumber(),n=Fe("uint256",t,r).toNumber(),r=r+32),c=0;c<n;c++){var l=Fe(e.subArray,t,r);o.push(l),r+=e.subArray.memoryUsage}return o}else{if(e.name==="bytes")return r=Fe("uint256",t,r).toNumber(),n=Fe("uint256",t,r).toNumber(),t.slice(r+32,r+32+n);if(e.name.startsWith("bytes"))return t.slice(r,r+e.size);if(e.name.startsWith("uint")){if(i=new Le(t.slice(r,r+32),16,"be"),i.bitLength()>e.size)throw new Error("Decoded int exceeds width: "+e.size+" vs "+i.bitLength());return i}else if(e.name.startsWith("int")){if(i=new Le(t.slice(r,r+32),16,"be").fromTwos(256),i.bitLength()>e.size)throw new Error("Decoded uint exceeds width: "+e.size+" vs "+i.bitLength());return i}else if(e.name.startsWith("ufixed")){if(n=new Le(2).pow(new Le(e.size[1])),i=Fe("uint256",t,r),!i.mod(n).isZero())throw new Error("Decimals not supported yet");return i.div(n)}else if(e.name.startsWith("fixed")){if(n=new Le(2).pow(new Le(e.size[1])),i=Fe("int256",t,r),!i.mod(n).isZero())throw new Error("Decimals not supported yet");return i.div(n)}}throw new Error("Unsupported or invalid type: "+e.name)}function jn(e){var t,r;if(Ht(e)){t=Kt(e);var n=e.slice(0,e.lastIndexOf("["));return n=jn(n),r={isArray:!0,name:e,size:t,memoryUsage:t==="dynamic"?32:n.memoryUsage*t,subArray:n},r}else{var i;switch(e){case"address":i="uint160";break;case"bool":i="uint8";break;case"string":i="bytes";break}if(r={rawType:i,name:e,memoryUsage:32},e.startsWith("bytes")&&e!=="bytes"||e.startsWith("uint")||e.startsWith("int")?r.size=Qe(e):(e.startsWith("ufixed")||e.startsWith("fixed"))&&(r.size=wn(e)),e.startsWith("bytes")&&e!=="bytes"&&(r.size<1||r.size>32))throw new Error("Invalid bytes<N> width: "+r.size);if((e.startsWith("uint")||e.startsWith("int"))&&(r.size%8||r.size<8||r.size>256))throw new Error("Invalid int/uint<N> width: "+r.size);return r}}function pf(e){return e==="string"||e==="bytes"||Kt(e)==="dynamic"}function Ht(e){return e.lastIndexOf("]")===e.length-1}Y.rawEncode=function(e,t){var r=[],n=[],i=0;e.forEach(function(p){if(Ht(p)){var d=Kt(p);d!=="dynamic"?i+=32*d:i+=32}else i+=32});for(var o=0;o<e.length;o++){var c=yr(e[o]),f=t[o],l=ze(c,f);pf(c)?(r.push(ze("uint256",i)),n.push(l),i+=l.length):r.push(l)}return Buffer.concat(r.concat(n))};Y.rawDecode=function(e,t){var r=[];t=Buffer.from(t);for(var n=0,i=0;i<e.length;i++){var o=yr(e[i]),c=jn(o),f=Fe(c,t,n);n+=c.memoryUsage,r.push(f)}return r};Y.simpleEncode=function(e){var t=Array.prototype.slice.call(arguments).slice(1),r=Qo(e);if(t.length!==r.args.length)throw new Error("Argument count mismatch");return Buffer.concat([Y.methodID(r.method,r.args),Y.rawEncode(r.args,t)])};Y.simpleDecode=function(e,t){var r=Qo(e);if(!r.retargs)throw new Error("No return values in method");return Y.rawDecode(r.retargs,t)};function Fi(e,t){return e.startsWith("address")||e.startsWith("bytes")?"0x"+t.toString("hex"):t.toString()}Y.stringify=function(e,t){var r=[];for(var n in e){var i=e[n],o=t[n];/^[^\[]+\[.*\]$/.test(i)?o=o.map(function(c){return Fi(i,c)}).join(", "):o=Fi(i,o),r.push(o)}return r};Y.solidityHexValue=function(e,t,r){var n,i;if(Ht(e)){var o=e.replace(/\[.*?\]/,"");if(!Ht(o)){var c=Kt(e);if(c!=="dynamic"&&c!==0&&t.length>c)throw new Error("Elements exceed array size: "+c)}var f=t.map(function(d){return Y.solidityHexValue(o,d,256)});return Buffer.concat(f)}else{if(e==="bytes")return t;if(e==="string")return Buffer.from(t,"utf8");if(e==="bool"){r=r||8;var l=Array(r/4).join("0");return Buffer.from(t?l+"1":l+"0","hex")}else if(e==="address"){var p=20;return r&&(p=r/8),je.setLengthLeft(t,p)}else if(e.startsWith("bytes")){if(n=Qe(e),n<1||n>32)throw new Error("Invalid bytes<N> width: "+n);return je.setLengthRight(t,n)}else if(e.startsWith("uint")){if(n=Qe(e),n%8||n<8||n>256)throw new Error("Invalid uint<N> width: "+n);if(i=at(t),i.bitLength()>n)throw new Error("Supplied uint exceeds width: "+n+" vs "+i.bitLength());return r=r||n,i.toArrayLike(Buffer,"be",r/8)}else if(e.startsWith("int")){if(n=Qe(e),n%8||n<8||n>256)throw new Error("Invalid int<N> width: "+n);if(i=at(t),i.bitLength()>n)throw new Error("Supplied int exceeds width: "+n+" vs "+i.bitLength());return r=r||n,i.toTwos(n).toArrayLike(Buffer,"be",r/8)}else throw new Error("Unsupported or invalid type: "+e)}};Y.solidityPack=function(e,t){if(e.length!==t.length)throw new Error("Number of types are not matching the values");for(var r=[],n=0;n<e.length;n++){var i=yr(e[n]),o=t[n];r.push(Y.solidityHexValue(i,o,null))}return Buffer.concat(r)};Y.soliditySHA3=function(e,t){return je.keccak256(Y.solidityPack(e,t))};Y.soliditySHA256=function(e,t){return je.sha256(Y.solidityPack(e,t))};Y.solidityRIPEMD160=function(e,t){return je.ripemd160(Y.solidityPack(e,t),!0)};function gf(e){return e>="0"&&e<="9"}Y.fromSerpent=function(e){for(var t=[],r=0;r<e.length;r++){var n=e[r];if(n==="s")t.push("bytes");else if(n==="b"){for(var i="bytes",o=r+1;o<e.length&&gf(e[o]);)i+=e[o]-"0",o++;r=o-1,t.push(i)}else if(n==="i")t.push("int256");else if(n==="a")t.push("int256[]");else throw new Error("Unsupported or invalid type: "+n)}return t};Y.toSerpent=function(e){for(var t=[],r=0;r<e.length;r++){var n=e[r];if(n==="bytes")t.push("s");else if(n.startsWith("bytes"))t.push("b"+Qe(n));else if(n==="int256")t.push("i");else if(n==="int256[]")t.push("a");else throw new Error("Unsupported or invalid type: "+n)}return t.join("")};var _f=Y;(function(e){e.exports=_f})(Vo);const j=gr,Xr=Vo.exports;var vf={concatSig:function(e,t,r){const n=j.fromSigned(t),i=j.fromSigned(r),o=j.bufferToInt(e),c=zi(j.toUnsigned(n).toString("hex"),64),f=zi(j.toUnsigned(i).toString("hex"),64),l=j.stripHexPrefix(j.intToHex(o));return j.addHexPrefix(c.concat(f,l)).toString("hex")},normalize:function(e){if(!!e){if(typeof e=="number"){const r=j.toBuffer(e);e=j.bufferToHex(r)}if(typeof e!="string"){var t="eth-sig-util.normalize() requires hex string or integer input.";throw t+=" received "+typeof e+": "+e,new Error(t)}return j.addHexPrefix(e.toLowerCase())}},personalSign:function(e,t){var r=j.toBuffer(t.data),n=j.hashPersonalMessage(r),i=j.ecsign(n,e),o=j.bufferToHex(this.concatSig(i.v,i.r,i.s));return o},recoverPersonalSignature:function(e){const t=Wi(e),r=j.publicToAddress(t);return j.bufferToHex(r)},extractPublicKey:function(e){return"0x"+Wi(e).toString("hex")},typedSignatureHash:function(e){const t=en(e);return j.bufferToHex(t)},signTypedData:function(e,t){const r=en(t.data),n=j.ecsign(r,e);return j.bufferToHex(this.concatSig(n.v,n.r,n.s))},recoverTypedSignature:function(e){const t=en(e.data),r=Xo(t,e.sig),n=j.publicToAddress(r);return j.bufferToHex(n)}};function en(e){const t=new Error("Expect argument to be non-empty array");if(typeof e!="object"||!e.length)throw t;const r=e.map(function(o){return o.type==="bytes"?j.toBuffer(o.value):o.value}),n=e.map(function(o){return o.type}),i=e.map(function(o){if(!o.name)throw t;return o.type+" "+o.name});return Xr.soliditySHA3(["bytes32","bytes32"],[Xr.soliditySHA3(new Array(e.length).fill("string"),i),Xr.soliditySHA3(n,r)])}function Xo(e,t){const r=j.toBuffer(t),n=j.fromRpcSig(r);return j.ecrecover(e,n.v,n.r,n.s)}function Wi(e){const t=j.toBuffer(e.data),r=j.hashPersonalMessage(t);return Xo(r,e.sig)}function zi(e,t){for(var r=""+e;r.length<t;)r="0"+r;return r}var es={exports:{}};(function(e,t){(function(r){var n=function(o){setTimeout(o,0)};typeof process<"u"&&process&&typeof process.nextTick=="function"&&(n=process.nextTick);function i(o){var c={capacity:o||1,current:0,queue:[],firstHere:!1,take:function(){if(c.firstHere===!1){c.current++,c.firstHere=!0;var f=1}else var f=0;var l={n:1};typeof arguments[0]=="function"?l.task=arguments[0]:l.n=arguments[0],arguments.length>=2&&(typeof arguments[1]=="function"?l.task=arguments[1]:l.n=arguments[1]);var p=l.task;if(l.task=function(){p(c.leave)},c.current+l.n-f>c.capacity)return f===1&&(c.current--,c.firstHere=!1),c.queue.push(l);c.current+=l.n-f,l.task(c.leave),f===1&&(c.firstHere=!1)},leave:function(f){if(f=f||1,c.current-=f,!c.queue.length){if(c.current<0)throw new Error("leave called too many times.");return}var l=c.queue[0];l.n+c.current>c.capacity||(c.queue.shift(),c.current+=l.n,n(l.task))},available:function(f){return f=f||1,c.current+f<=c.capacity}};return c}e.exports=i})()})(es);const mf=qn;var wf=yf;function yf(e,t,r){e.sendAsync(mf({method:"eth_estimateGas",params:[t]}),function(n,i){if(n)return n.message==="no contract code at given address"?r(null,"0xcf08"):r(n);r(null,i.result)})}const Ne=gn.exports,bf=_n.exports,xf=$e.inherits,sr=gr,Mf=vf,pt=Po,Ef=es.exports,Sf=_r,kf=wf,Cf=/^[0-9A-Fa-f]+$/g;var Tf=z;xf(z,Sf);function z(e){const t=this;t.nonceLock=Ef(1),e.getAccounts&&(t.getAccounts=e.getAccounts),e.processTransaction&&(t.processTransaction=e.processTransaction),e.processMessage&&(t.processMessage=e.processMessage),e.processPersonalMessage&&(t.processPersonalMessage=e.processPersonalMessage),e.processTypedMessage&&(t.processTypedMessage=e.processTypedMessage),t.approveTransaction=e.approveTransaction||t.autoApprove,t.approveMessage=e.approveMessage||t.autoApprove,t.approvePersonalMessage=e.approvePersonalMessage||t.autoApprove,t.approveDecryptMessage=e.approveDecryptMessage||t.autoApprove,t.approveEncryptionPublicKey=e.approveEncryptionPublicKey||t.autoApprove,t.approveTypedMessage=e.approveTypedMessage||t.autoApprove,e.signTransaction&&(t.signTransaction=e.signTransaction||dt("signTransaction")),e.signMessage&&(t.signMessage=e.signMessage||dt("signMessage")),e.signPersonalMessage&&(t.signPersonalMessage=e.signPersonalMessage||dt("signPersonalMessage")),e.decryptMessage&&(t.decryptMessage=e.decryptMessage||dt("decryptMessage")),e.encryptionPublicKey&&(t.encryptionPublicKey=e.encryptionPublicKey||dt("encryptionPublicKey")),e.signTypedMessage&&(t.signTypedMessage=e.signTypedMessage||dt("signTypedMessage")),e.recoverPersonalSignature&&(t.recoverPersonalSignature=e.recoverPersonalSignature),e.publishTransaction&&(t.publishTransaction=e.publishTransaction),t.estimateGas=e.estimateGas||t.estimateGas,t.getGasPrice=e.getGasPrice||t.getGasPrice}z.prototype.handleRequest=function(e,t,r){const n=this;n._parityRequests={},n._parityRequestCount=0;let i,o,c,f,l;switch(e.method){case"eth_coinbase":n.getAccounts(function(p,d){if(p)return r(p);let y=d[0]||null;r(null,y)});return;case"eth_accounts":n.getAccounts(function(p,d){if(p)return r(p);r(null,d)});return;case"eth_sendTransaction":i=e.params[0],Ne([p=>n.validateTransaction(i,p),p=>n.processTransaction(i,p)],r);return;case"eth_signTransaction":i=e.params[0],Ne([p=>n.validateTransaction(i,p),p=>n.processSignTransaction(i,p)],r);return;case"eth_sign":l=e.params[0],f=e.params[1],c=e.params[2]||{},o=pt(c,{from:l,data:f}),Ne([p=>n.validateMessage(o,p),p=>n.processMessage(o,p)],r);return;case"personal_sign":return function(){const p=e.params[0],d=e.params[1];if(ji(d)&&tn(p)){let y="The eth_personalSign method requires params ordered ";y+="[message, address]. This was previously handled incorrectly, ",y+="and has been corrected automatically. ",y+="Please switch this param order for smooth behavior in the future.",console.warn(y),l=e.params[0],f=e.params[1]}else f=e.params[0],l=e.params[1];c=e.params[2]||{},o=pt(c,{from:l,data:f}),Ne([y=>n.validatePersonalMessage(o,y),y=>n.processPersonalMessage(o,y)],r)}();case"eth_decryptMessage":return function(){const p=e.params[0],d=e.params[1];if(ji(d)&&tn(p)){let y="The eth_decryptMessage method requires params ordered ";y+="[message, address]. This was previously handled incorrectly, ",y+="and has been corrected automatically. ",y+="Please switch this param order for smooth behavior in the future.",console.warn(y),l=e.params[0],f=e.params[1]}else f=e.params[0],l=e.params[1];c=e.params[2]||{},o=pt(c,{from:l,data:f}),Ne([y=>n.validateDecryptMessage(o,y),y=>n.processDecryptMessage(o,y)],r)}();case"encryption_public_key":return function(){const p=e.params[0];Ne([d=>n.validateEncryptionPublicKey(p,d),d=>n.processEncryptionPublicKey(p,d)],r)}();case"personal_ecRecover":return function(){f=e.params[0];let p=e.params[1];c=e.params[2]||{},o=pt(c,{sig:p,data:f}),n.recoverPersonalSignature(o,r)}();case"eth_signTypedData":case"eth_signTypedData_v3":case"eth_signTypedData_v4":return function(){const p=e.params[0],d=e.params[1];tn(p)?(l=p,f=d):(f=p,l=d),c=e.params[2]||{},o=pt(c,{from:l,data:f}),Ne([y=>n.validateTypedMessage(o,y),y=>n.processTypedMessage(o,y)],r)}();case"parity_postTransaction":i=e.params[0],n.parityPostTransaction(i,r);return;case"parity_postSign":l=e.params[0],f=e.params[1],n.parityPostSign(l,f,r);return;case"parity_checkRequest":return function(){const p=e.params[0];n.parityCheckRequest(p,r)}();case"parity_defaultAccount":n.getAccounts(function(p,d){if(p)return r(p);const y=d[0]||null;r(null,y)});return;default:t();return}};z.prototype.getAccounts=function(e){e(null,[])};z.prototype.processTransaction=function(e,t){const r=this;Ne([n=>r.approveTransaction(e,n),(n,i)=>r.checkApproval("transaction",n,i),n=>r.finalizeAndSubmitTx(e,n)],t)};z.prototype.processSignTransaction=function(e,t){const r=this;Ne([n=>r.approveTransaction(e,n),(n,i)=>r.checkApproval("transaction",n,i),n=>r.finalizeTx(e,n)],t)};z.prototype.processMessage=function(e,t){const r=this;Ne([n=>r.approveMessage(e,n),(n,i)=>r.checkApproval("message",n,i),n=>r.signMessage(e,n)],t)};z.prototype.processPersonalMessage=function(e,t){const r=this;Ne([n=>r.approvePersonalMessage(e,n),(n,i)=>r.checkApproval("message",n,i),n=>r.signPersonalMessage(e,n)],t)};z.prototype.processDecryptMessage=function(e,t){const r=this;Ne([n=>r.approveDecryptMessage(e,n),(n,i)=>r.checkApproval("decryptMessage",n,i),n=>r.decryptMessage(e,n)],t)};z.prototype.processEncryptionPublicKey=function(e,t){const r=this;Ne([n=>r.approveEncryptionPublicKey(e,n),(n,i)=>r.checkApproval("encryptionPublicKey",n,i),n=>r.encryptionPublicKey(e,n)],t)};z.prototype.processTypedMessage=function(e,t){const r=this;Ne([n=>r.approveTypedMessage(e,n),(n,i)=>r.checkApproval("message",n,i),n=>r.signTypedMessage(e,n)],t)};z.prototype.autoApprove=function(e,t){t(null,!0)};z.prototype.checkApproval=function(e,t,r){r(t?null:new Error("User denied "+e+" signature."))};z.prototype.parityPostTransaction=function(e,t){const r=this,i=`0x${r._parityRequestCount.toString(16)}`;r._parityRequestCount++,r.emitPayload({method:"eth_sendTransaction",params:[e]},function(o,c){if(o){r._parityRequests[i]={error:o};return}const f=c.result;r._parityRequests[i]=f}),t(null,i)};z.prototype.parityPostSign=function(e,t,r){const n=this,o=`0x${n._parityRequestCount.toString(16)}`;n._parityRequestCount++,n.emitPayload({method:"eth_sign",params:[e,t]},function(c,f){if(c){n._parityRequests[o]={error:c};return}const l=f.result;n._parityRequests[o]=l}),r(null,o)};z.prototype.parityCheckRequest=function(e,t){const n=this._parityRequests[e]||null;if(!n)return t(null,null);if(n.error)return t(n.error);t(null,n)};z.prototype.recoverPersonalSignature=function(e,t){let r;try{r=Mf.recoverPersonalSignature(e)}catch(n){return t(n)}t(null,r)};z.prototype.validateTransaction=function(e,t){const r=this;if(e.from===void 0)return t(new Error("Undefined address - from address required to sign transaction."));r.validateSender(e.from,function(n,i){if(n)return t(n);if(!i)return t(new Error(`Unknown address - unable to sign transaction for this address: "${e.from}"`));t()})};z.prototype.validateMessage=function(e,t){const r=this;if(e.from===void 0)return t(new Error("Undefined address - from address required to sign message."));r.validateSender(e.from,function(n,i){if(n)return t(n);if(!i)return t(new Error(`Unknown address - unable to sign message for this address: "${e.from}"`));t()})};z.prototype.validatePersonalMessage=function(e,t){const r=this;if(e.from===void 0)return t(new Error("Undefined address - from address required to sign personal message."));if(e.data===void 0)return t(new Error("Undefined message - message required to sign personal message."));if(!Kn(e.data))return t(new Error("HookedWalletSubprovider - validateMessage - message was not encoded as hex."));r.validateSender(e.from,function(n,i){if(n)return t(n);if(!i)return t(new Error(`Unknown address - unable to sign message for this address: "${e.from}"`));t()})};z.prototype.validateDecryptMessage=function(e,t){const r=this;if(e.from===void 0)return t(new Error("Undefined address - from address required to decrypt message."));if(e.data===void 0)return t(new Error("Undefined message - message required to decrypt message."));if(!Kn(e.data))return t(new Error("HookedWalletSubprovider - validateDecryptMessage - message was not encoded as hex."));r.validateSender(e.from,function(n,i){if(n)return t(n);if(!i)return t(new Error(`Unknown address - unable to decrypt message for this address: "${e.from}"`));t()})};z.prototype.validateEncryptionPublicKey=function(e,t){this.validateSender(e,function(n,i){if(n)return t(n);if(!i)return t(new Error(`Unknown address - unable to obtain encryption public key for this address: "${e}"`));t()})};z.prototype.validateTypedMessage=function(e,t){if(e.from===void 0)return t(new Error("Undefined address - from address required to sign typed data."));if(e.data===void 0)return t(new Error("Undefined data - message required to sign typed data."));this.validateSender(e.from,function(r,n){if(r)return t(r);if(!n)return t(new Error(`Unknown address - unable to sign message for this address: "${e.from}"`));t()})};z.prototype.validateSender=function(e,t){const r=this;if(!e)return t(null,!1);r.getAccounts(function(n,i){if(n)return t(n);const o=i.map(Rf).indexOf(e.toLowerCase())!==-1;t(null,o)})};z.prototype.finalizeAndSubmitTx=function(e,t){const r=this;r.nonceLock.take(function(){Ne([r.fillInTxExtras.bind(r,e),r.signTransaction.bind(r),r.publishTransaction.bind(r)],function(n,i){if(r.nonceLock.leave(),n)return t(n);t(null,i)})})};z.prototype.finalizeTx=function(e,t){const r=this;r.nonceLock.take(function(){Ne([r.fillInTxExtras.bind(r,e),r.signTransaction.bind(r)],function(n,i){if(r.nonceLock.leave(),n)return t(n);t(null,{raw:i,tx:e})})})};z.prototype.publishTransaction=function(e,t){this.emitPayload({method:"eth_sendRawTransaction",params:[e]},function(n,i){if(n)return t(n);t(null,i.result)})};z.prototype.estimateGas=function(e,t){kf(this.engine,e,t)};z.prototype.getGasPrice=function(e){this.emitPayload({method:"eth_gasPrice",params:[]},function(r,n){if(r)return e(r);e(null,n.result)})};z.prototype.fillInTxExtras=function(e,t){const r=this,n=e.from,i={};e.gasPrice===void 0&&(i.gasPrice=r.getGasPrice.bind(r)),e.nonce===void 0&&(i.nonce=r.emitPayload.bind(r,{method:"eth_getTransactionCount",params:[n,"pending"]})),e.gas===void 0&&(i.gas=r.estimateGas.bind(r,Af(e))),bf(i,function(o,c){if(o)return t(o);const f={};c.gasPrice&&(f.gasPrice=c.gasPrice),c.nonce&&(f.nonce=c.nonce.result),c.gas&&(f.gas=c.gas),t(null,pt(e,f))})};function Af(e){return{from:e.from,to:e.to,value:e.value,data:e.data,gas:e.gas,gasPrice:e.gasPrice,nonce:e.nonce}}function Rf(e){return e.toLowerCase()}function tn(e){const t=sr.addHexPrefix(e);return sr.isValidAddress(t)}function ji(e){const t=sr.addHexPrefix(e);return!sr.isValidAddress(t)&&Kn(e)}function Kn(e){return!(typeof e=="string")||!(e.slice(0,2)==="0x")?!1:e.slice(2).match(Cf)}function dt(e){return function(t,r){r(new Error('ProviderEngine - HookedWalletSubprovider - Must provide "'+e+'" fn in constructor options'))}}const Bf=$e.inherits,If=uc,Xt=gr,Pf=_r,Nf=bc.blockTagForPayload;var Of=Vn;Bf(Vn,Pf);function Vn(e){const t=this;t.nonceCache={}}Vn.prototype.handleRequest=function(e,t,r){const n=this;switch(e.method){case"eth_getTransactionCount":var i=Nf(e),o=e.params[0].toLowerCase(),c=n.nonceCache[o];i==="pending"?c?r(null,c):t(function(f,l,p){if(f)return p();n.nonceCache[o]===void 0&&(n.nonceCache[o]=l),p()}):t();return;case"eth_sendRawTransaction":t(function(f,l,p){if(f)return p();var d=e.params[0];Xt.stripHexPrefix(d),Buffer.from(Xt.stripHexPrefix(d),"hex");var y=new If(Buffer.from(Xt.stripHexPrefix(d),"hex")),k="0x"+y.getSenderAddress().toString("hex").toLowerCase(),R=Xt.bufferToInt(y.nonce);R++;var T=R.toString(16);T.length%2&&(T="0"+T),T="0x"+T,n.nonceCache[k]=T,p()});return;case"evm_revert":n.nonceCache={},t();return;default:t();return}};const Lf=Hn,Uf=dc;class qf extends Lf{constructor(){super(({blockTracker:t,provider:r,engine:n})=>{const{events:i,middleware:o}=Uf({blockTracker:t,provider:r});return i.on("notification",c=>n.emit("data",null,c)),o})}}var Hf=qf,Jn={},J={};Object.defineProperty(J,"__esModule",{value:!0});var ts=J.getLocalStorage=hs=J.getLocalStorageOrThrow=ls=J.getCrypto=us=J.getCryptoOrThrow=fs=J.getLocation=cs=J.getLocationOrThrow=as=J.getNavigator=ss=J.getNavigatorOrThrow=os=J.getDocument=is=J.getDocumentOrThrow=ns=J.getFromWindowOrThrow=rs=J.getFromWindow=void 0;function lt(e){let t;return typeof window<"u"&&typeof window[e]<"u"&&(t=window[e]),t}var rs=J.getFromWindow=lt;function Rt(e){const t=lt(e);if(!t)throw new Error(`${e} is not defined in Window`);return t}var ns=J.getFromWindowOrThrow=Rt;function Df(){return Rt("document")}var is=J.getDocumentOrThrow=Df;function $f(){return lt("document")}var os=J.getDocument=$f;function Ff(){return Rt("navigator")}var ss=J.getNavigatorOrThrow=Ff;function Wf(){return lt("navigator")}var as=J.getNavigator=Wf;function zf(){return Rt("location")}var cs=J.getLocationOrThrow=zf;function jf(){return lt("location")}var fs=J.getLocation=jf;function Kf(){return Rt("crypto")}var us=J.getCryptoOrThrow=Kf;function Vf(){return lt("crypto")}var ls=J.getCrypto=Vf;function Jf(){return Rt("localStorage")}var hs=J.getLocalStorageOrThrow=Jf;function Gf(){return lt("localStorage")}ts=J.getLocalStorage=Gf;Object.defineProperty(Jn,"__esModule",{value:!0});var ds=Jn.getWindowMetadata=void 0;const Ki=J;function Yf(){let e,t;try{e=Ki.getDocumentOrThrow(),t=Ki.getLocationOrThrow()}catch{return null}function r(){const y=e.getElementsByTagName("link"),k=[];for(let R=0;R<y.length;R++){const T=y[R],B=T.getAttribute("rel");if(B&&B.toLowerCase().indexOf("icon")>-1){const b=T.getAttribute("href");if(b)if(b.toLowerCase().indexOf("https:")===-1&&b.toLowerCase().indexOf("http:")===-1&&b.indexOf("//")!==0){let M=t.protocol+"//"+t.host;if(b.indexOf("/")===0)M+=b;else{const C=t.pathname.split("/");C.pop();const E=C.join("/");M+=E+"/"+b}k.push(M)}else if(b.indexOf("//")===0){const M=t.protocol+b;k.push(M)}else k.push(b)}}return k}function n(...y){const k=e.getElementsByTagName("meta");for(let R=0;R<k.length;R++){const T=k[R],B=["itemprop","property","name"].map(b=>T.getAttribute(b)).filter(b=>b?y.includes(b):!1);if(B.length&&B){const b=T.getAttribute("content");if(b)return b}}return""}function i(){let y=n("name","og:site_name","og:title","twitter:title");return y||(y=e.title),y}function o(){return n("description","og:description","twitter:description","keywords")}const c=i(),f=o(),l=t.origin,p=r();return{description:f,url:l,icons:p,name:c}}ds=Jn.getWindowMetadata=Yf;var Zf=globalThis&&globalThis.__spreadArrays||function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),i=0,t=0;t<r;t++)for(var o=arguments[t],c=0,f=o.length;c<f;c++,i++)n[i]=o[c];return n},Qf=function(){function e(t,r,n){this.name=t,this.version=r,this.os=n,this.type="browser"}return e}(),Xf=function(){function e(t){this.version=t,this.type="node",this.name="node",this.os=process.platform}return e}(),eu=function(){function e(t,r,n,i){this.name=t,this.version=r,this.os=n,this.bot=i,this.type="bot-device"}return e}(),tu=function(){function e(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return e}(),ru=function(){function e(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return e}(),nu=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,iu=/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,Vi=3,ou=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FBAV\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["searchbot",nu]],Ji=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function su(e){return e?Gi(e):typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new ru:typeof navigator<"u"?Gi(navigator.userAgent):fu()}function au(e){return e!==""&&ou.reduce(function(t,r){var n=r[0],i=r[1];if(t)return t;var o=i.exec(e);return!!o&&[n,o]},!1)}function Gi(e){var t=au(e);if(!t)return null;var r=t[0],n=t[1];if(r==="searchbot")return new tu;var i=n[1]&&n[1].split(/[._]/).slice(0,3);i?i.length<Vi&&(i=Zf(i,uu(Vi-i.length))):i=[];var o=i.join("."),c=cu(e),f=iu.exec(e);return f&&f[1]?new eu(r,o,c,f[1]):new Qf(r,o,c)}function cu(e){for(var t=0,r=Ji.length;t<r;t++){var n=Ji[t],i=n[0],o=n[1],c=o.exec(e);if(c)return i}return null}function fu(){var e=typeof process<"u"&&process.version;return e?new Xf(process.version.slice(1)):null}function uu(e){for(var t=[],r=0;r<e;r++)t.push("0");return t}function br(e){return su(e)}function xr(){const e=br();return e&&e.os?e.os:void 0}function ps(){const e=xr();return e?e.toLowerCase().includes("android"):!1}function gs(){const e=xr();return e?e.toLowerCase().includes("ios")||e.toLowerCase().includes("mac")&&navigator.maxTouchPoints>1:!1}function _s(){return xr()?ps()||gs():!1}function vs(){const e=br();return e&&e.name?e.name.toLowerCase()==="node":!1}function ms(){return!vs()&&!!ys()}const ws=rs,lu=ns,hu=is,du=os,pu=ss,ys=as,gu=cs,bs=fs,_u=us,vu=ls,mu=hs,Mr=ts;function yn(){return ds()}function wu(e){if(typeof e!="string")throw new Error(`Cannot safe json parse value of type ${typeof e}`);try{return JSON.parse(e)}catch{return e}}function yu(e){return typeof e=="string"?e:JSON.stringify(e)}const xs=wu,Ms=yu;function Gn(e,t){const r=Ms(t),n=Mr();n&&n.setItem(e,r)}function Yn(e){let t=null,r=null;const n=Mr();return n&&(r=n.getItem(e)),t=r&&xs(r),t}function Zn(e){const t=Mr();t&&t.removeItem(e)}const ar="WALLETCONNECT_DEEPLINK_CHOICE";function bu(e,t){const r=encodeURIComponent(e);return t.universalLink?`${t.universalLink}/wc?uri=${r}`:t.deepLink?`${t.deepLink}${t.deepLink.endsWith(":")?"//":"/"}wc?uri=${r}`:""}function xu(e){const t=e.href.split("?")[0];Gn(ar,Object.assign(Object.assign({},e),{href:t}))}function Es(e,t){return e.filter(r=>r.name.toLowerCase().includes(t.toLowerCase()))[0]}function Mu(e,t){let r=e;return t&&(r=t.map(n=>Es(e,n)).filter(Boolean)),r}const Ss="https://registry.walletconnect.com";function Eu(){return Ss+"/api/v2/wallets"}function Su(){return Ss+"/api/v2/dapps"}function ks(e,t="mobile"){var r;return{name:e.name||"",shortName:e.metadata.shortName||"",color:e.metadata.colors.primary||"",logo:(r=e.image_url.sm)!==null&&r!==void 0?r:"",universalLink:e[t].universal||"",deepLink:e[t].native||""}}function ku(e,t="mobile"){return Object.values(e).filter(r=>!!r[t].universal||!!r[t].native).map(r=>ks(r,t))}const Cu=Object.freeze(Object.defineProperty({__proto__:null,detectEnv:br,detectOS:xr,isAndroid:ps,isIOS:gs,isMobile:_s,isNode:vs,isBrowser:ms,getFromWindow:ws,getFromWindowOrThrow:lu,getDocumentOrThrow:hu,getDocument:du,getNavigatorOrThrow:pu,getNavigator:ys,getLocationOrThrow:gu,getLocation:bs,getCryptoOrThrow:_u,getCrypto:vu,getLocalStorageOrThrow:mu,getLocalStorage:Mr,getClientMeta:yn,safeJsonParse:xs,safeJsonStringify:Ms,setLocal:Gn,getLocal:Yn,removeLocal:Zn,mobileLinkChoiceKey:ar,formatIOSMobile:bu,saveMobileLinkInfo:xu,getMobileRegistryEntry:Es,getMobileLinkRegistry:Mu,getWalletRegistryUrl:Eu,getDappRegistryUrl:Su,formatMobileRegistryEntry:ks,formatMobileRegistry:ku},Symbol.toStringTag,{value:"Module"})),Tu=["session_request","session_update","exchange_key","connect","disconnect","display_uri","modal_closed","transport_open","transport_close","transport_error"],Qn=["eth_sendTransaction","eth_signTransaction","eth_sign","eth_signTypedData","eth_signTypedData_v1","eth_signTypedData_v2","eth_signTypedData_v3","eth_signTypedData_v4","personal_sign","wallet_addEthereumChain","wallet_switchEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode"],Au={1:"mainnet",3:"ropsten",4:"rinkeby",5:"goerli",42:"kovan"};var Cs={exports:{}};(function(e){(function(t,r){function n(w,s){if(!w)throw new Error(s||"Assertion failed")}function i(w,s){w.super_=s;var u=function(){};u.prototype=s.prototype,w.prototype=new u,w.prototype.constructor=w}function o(w,s,u){if(o.isBN(w))return w;this.negative=0,this.words=null,this.length=0,this.red=null,w!==null&&((s==="le"||s==="be")&&(u=s,s=10),this._init(w||0,s||10,u||"be"))}typeof t=="object"?t.exports=o:r.BN=o,o.BN=o,o.wordSize=26;var c;try{c=$e.Buffer}catch{}o.isBN=function(s){return s instanceof o?!0:s!==null&&typeof s=="object"&&s.constructor.wordSize===o.wordSize&&Array.isArray(s.words)},o.max=function(s,u){return s.cmp(u)>0?s:u},o.min=function(s,u){return s.cmp(u)<0?s:u},o.prototype._init=function(s,u,h){if(typeof s=="number")return this._initNumber(s,u,h);if(typeof s=="object")return this._initArray(s,u,h);u==="hex"&&(u=16),n(u===(u|0)&&u>=2&&u<=36),s=s.toString().replace(/\s+/g,"");var g=0;s[0]==="-"&&g++,u===16?this._parseHex(s,g):this._parseBase(s,u,g),s[0]==="-"&&(this.negative=1),this.strip(),h==="le"&&this._initArray(this.toArray(),u,h)},o.prototype._initNumber=function(s,u,h){s<0&&(this.negative=1,s=-s),s<67108864?(this.words=[s&67108863],this.length=1):s<4503599627370496?(this.words=[s&67108863,s/67108864&67108863],this.length=2):(n(s<9007199254740992),this.words=[s&67108863,s/67108864&67108863,1],this.length=3),h==="le"&&this._initArray(this.toArray(),u,h)},o.prototype._initArray=function(s,u,h){if(n(typeof s.length=="number"),s.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(s.length/3),this.words=new Array(this.length);for(var g=0;g<this.length;g++)this.words[g]=0;var m,x,S=0;if(h==="be")for(g=s.length-1,m=0;g>=0;g-=3)x=s[g]|s[g-1]<<8|s[g-2]<<16,this.words[m]|=x<<S&67108863,this.words[m+1]=x>>>26-S&67108863,S+=24,S>=26&&(S-=26,m++);else if(h==="le")for(g=0,m=0;g<s.length;g+=3)x=s[g]|s[g+1]<<8|s[g+2]<<16,this.words[m]|=x<<S&67108863,this.words[m+1]=x>>>26-S&67108863,S+=24,S>=26&&(S-=26,m++);return this.strip()};function f(w,s,u){for(var h=0,g=Math.min(w.length,u),m=s;m<g;m++){var x=w.charCodeAt(m)-48;h<<=4,x>=49&&x<=54?h|=x-49+10:x>=17&&x<=22?h|=x-17+10:h|=x&15}return h}o.prototype._parseHex=function(s,u){this.length=Math.ceil((s.length-u)/6),this.words=new Array(this.length);for(var h=0;h<this.length;h++)this.words[h]=0;var g,m,x=0;for(h=s.length-6,g=0;h>=u;h-=6)m=f(s,h,h+6),this.words[g]|=m<<x&67108863,this.words[g+1]|=m>>>26-x&4194303,x+=24,x>=26&&(x-=26,g++);h+6!==u&&(m=f(s,u,h+6),this.words[g]|=m<<x&67108863,this.words[g+1]|=m>>>26-x&4194303),this.strip()};function l(w,s,u,h){for(var g=0,m=Math.min(w.length,u),x=s;x<m;x++){var S=w.charCodeAt(x)-48;g*=h,S>=49?g+=S-49+10:S>=17?g+=S-17+10:g+=S}return g}o.prototype._parseBase=function(s,u,h){this.words=[0],this.length=1;for(var g=0,m=1;m<=67108863;m*=u)g++;g--,m=m/u|0;for(var x=s.length-h,S=x%g,_=Math.min(x,x-S)+h,a=0,v=h;v<_;v+=g)a=l(s,v,v+g,u),this.imuln(m),this.words[0]+a<67108864?this.words[0]+=a:this._iaddn(a);if(S!==0){var O=1;for(a=l(s,v,s.length,u),v=0;v<S;v++)O*=u;this.imuln(O),this.words[0]+a<67108864?this.words[0]+=a:this._iaddn(a)}},o.prototype.copy=function(s){s.words=new Array(this.length);for(var u=0;u<this.length;u++)s.words[u]=this.words[u];s.length=this.length,s.negative=this.negative,s.red=this.red},o.prototype.clone=function(){var s=new o(null);return this.copy(s),s},o.prototype._expand=function(s){for(;this.length<s;)this.words[this.length++]=0;return this},o.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},o.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},o.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var p=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],d=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],y=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];o.prototype.toString=function(s,u){s=s||10,u=u|0||1;var h;if(s===16||s==="hex"){h="";for(var g=0,m=0,x=0;x<this.length;x++){var S=this.words[x],_=((S<<g|m)&16777215).toString(16);m=S>>>24-g&16777215,m!==0||x!==this.length-1?h=p[6-_.length]+_+h:h=_+h,g+=2,g>=26&&(g-=26,x--)}for(m!==0&&(h=m.toString(16)+h);h.length%u!==0;)h="0"+h;return this.negative!==0&&(h="-"+h),h}if(s===(s|0)&&s>=2&&s<=36){var a=d[s],v=y[s];h="";var O=this.clone();for(O.negative=0;!O.isZero();){var L=O.modn(v).toString(s);O=O.idivn(v),O.isZero()?h=L+h:h=p[a-L.length]+L+h}for(this.isZero()&&(h="0"+h);h.length%u!==0;)h="0"+h;return this.negative!==0&&(h="-"+h),h}n(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var s=this.words[0];return this.length===2?s+=this.words[1]*67108864:this.length===3&&this.words[2]===1?s+=4503599627370496+this.words[1]*67108864:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-s:s},o.prototype.toJSON=function(){return this.toString(16)},o.prototype.toBuffer=function(s,u){return n(typeof c<"u"),this.toArrayLike(c,s,u)},o.prototype.toArray=function(s,u){return this.toArrayLike(Array,s,u)},o.prototype.toArrayLike=function(s,u,h){var g=this.byteLength(),m=h||Math.max(1,g);n(g<=m,"byte array longer than desired length"),n(m>0,"Requested array length <= 0"),this.strip();var x=u==="le",S=new s(m),_,a,v=this.clone();if(x){for(a=0;!v.isZero();a++)_=v.andln(255),v.iushrn(8),S[a]=_;for(;a<m;a++)S[a]=0}else{for(a=0;a<m-g;a++)S[a]=0;for(a=0;!v.isZero();a++)_=v.andln(255),v.iushrn(8),S[m-a-1]=_}return S},Math.clz32?o.prototype._countBits=function(s){return 32-Math.clz32(s)}:o.prototype._countBits=function(s){var u=s,h=0;return u>=4096&&(h+=13,u>>>=13),u>=64&&(h+=7,u>>>=7),u>=8&&(h+=4,u>>>=4),u>=2&&(h+=2,u>>>=2),h+u},o.prototype._zeroBits=function(s){if(s===0)return 26;var u=s,h=0;return(u&8191)===0&&(h+=13,u>>>=13),(u&127)===0&&(h+=7,u>>>=7),(u&15)===0&&(h+=4,u>>>=4),(u&3)===0&&(h+=2,u>>>=2),(u&1)===0&&h++,h},o.prototype.bitLength=function(){var s=this.words[this.length-1],u=this._countBits(s);return(this.length-1)*26+u};function k(w){for(var s=new Array(w.bitLength()),u=0;u<s.length;u++){var h=u/26|0,g=u%26;s[u]=(w.words[h]&1<<g)>>>g}return s}o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var s=0,u=0;u<this.length;u++){var h=this._zeroBits(this.words[u]);if(s+=h,h!==26)break}return s},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(s){return this.negative!==0?this.abs().inotn(s).iaddn(1):this.clone()},o.prototype.fromTwos=function(s){return this.testn(s-1)?this.notn(s).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return this.negative!==0},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(s){for(;this.length<s.length;)this.words[this.length++]=0;for(var u=0;u<s.length;u++)this.words[u]=this.words[u]|s.words[u];return this.strip()},o.prototype.ior=function(s){return n((this.negative|s.negative)===0),this.iuor(s)},o.prototype.or=function(s){return this.length>s.length?this.clone().ior(s):s.clone().ior(this)},o.prototype.uor=function(s){return this.length>s.length?this.clone().iuor(s):s.clone().iuor(this)},o.prototype.iuand=function(s){var u;this.length>s.length?u=s:u=this;for(var h=0;h<u.length;h++)this.words[h]=this.words[h]&s.words[h];return this.length=u.length,this.strip()},o.prototype.iand=function(s){return n((this.negative|s.negative)===0),this.iuand(s)},o.prototype.and=function(s){return this.length>s.length?this.clone().iand(s):s.clone().iand(this)},o.prototype.uand=function(s){return this.length>s.length?this.clone().iuand(s):s.clone().iuand(this)},o.prototype.iuxor=function(s){var u,h;this.length>s.length?(u=this,h=s):(u=s,h=this);for(var g=0;g<h.length;g++)this.words[g]=u.words[g]^h.words[g];if(this!==u)for(;g<u.length;g++)this.words[g]=u.words[g];return this.length=u.length,this.strip()},o.prototype.ixor=function(s){return n((this.negative|s.negative)===0),this.iuxor(s)},o.prototype.xor=function(s){return this.length>s.length?this.clone().ixor(s):s.clone().ixor(this)},o.prototype.uxor=function(s){return this.length>s.length?this.clone().iuxor(s):s.clone().iuxor(this)},o.prototype.inotn=function(s){n(typeof s=="number"&&s>=0);var u=Math.ceil(s/26)|0,h=s%26;this._expand(u),h>0&&u--;for(var g=0;g<u;g++)this.words[g]=~this.words[g]&67108863;return h>0&&(this.words[g]=~this.words[g]&67108863>>26-h),this.strip()},o.prototype.notn=function(s){return this.clone().inotn(s)},o.prototype.setn=function(s,u){n(typeof s=="number"&&s>=0);var h=s/26|0,g=s%26;return this._expand(h+1),u?this.words[h]=this.words[h]|1<<g:this.words[h]=this.words[h]&~(1<<g),this.strip()},o.prototype.iadd=function(s){var u;if(this.negative!==0&&s.negative===0)return this.negative=0,u=this.isub(s),this.negative^=1,this._normSign();if(this.negative===0&&s.negative!==0)return s.negative=0,u=this.isub(s),s.negative=1,u._normSign();var h,g;this.length>s.length?(h=this,g=s):(h=s,g=this);for(var m=0,x=0;x<g.length;x++)u=(h.words[x]|0)+(g.words[x]|0)+m,this.words[x]=u&67108863,m=u>>>26;for(;m!==0&&x<h.length;x++)u=(h.words[x]|0)+m,this.words[x]=u&67108863,m=u>>>26;if(this.length=h.length,m!==0)this.words[this.length]=m,this.length++;else if(h!==this)for(;x<h.length;x++)this.words[x]=h.words[x];return this},o.prototype.add=function(s){var u;return s.negative!==0&&this.negative===0?(s.negative=0,u=this.sub(s),s.negative^=1,u):s.negative===0&&this.negative!==0?(this.negative=0,u=s.sub(this),this.negative=1,u):this.length>s.length?this.clone().iadd(s):s.clone().iadd(this)},o.prototype.isub=function(s){if(s.negative!==0){s.negative=0;var u=this.iadd(s);return s.negative=1,u._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(s),this.negative=1,this._normSign();var h=this.cmp(s);if(h===0)return this.negative=0,this.length=1,this.words[0]=0,this;var g,m;h>0?(g=this,m=s):(g=s,m=this);for(var x=0,S=0;S<m.length;S++)u=(g.words[S]|0)-(m.words[S]|0)+x,x=u>>26,this.words[S]=u&67108863;for(;x!==0&&S<g.length;S++)u=(g.words[S]|0)+x,x=u>>26,this.words[S]=u&67108863;if(x===0&&S<g.length&&g!==this)for(;S<g.length;S++)this.words[S]=g.words[S];return this.length=Math.max(this.length,S),g!==this&&(this.negative=1),this.strip()},o.prototype.sub=function(s){return this.clone().isub(s)};function R(w,s,u){u.negative=s.negative^w.negative;var h=w.length+s.length|0;u.length=h,h=h-1|0;var g=w.words[0]|0,m=s.words[0]|0,x=g*m,S=x&67108863,_=x/67108864|0;u.words[0]=S;for(var a=1;a<h;a++){for(var v=_>>>26,O=_&67108863,L=Math.min(a,s.length-1),U=Math.max(0,a-w.length+1);U<=L;U++){var $=a-U|0;g=w.words[$]|0,m=s.words[U]|0,x=g*m+O,v+=x/67108864|0,O=x&67108863}u.words[a]=O|0,_=v|0}return _!==0?u.words[a]=_|0:u.length--,u.strip()}var T=function(s,u,h){var g=s.words,m=u.words,x=h.words,S=0,_,a,v,O=g[0]|0,L=O&8191,U=O>>>13,$=g[1]|0,W=$&8191,K=$>>>13,Ye=g[2]|0,V=Ye&8191,G=Ye>>>13,Mi=g[3]|0,X=Mi&8191,ee=Mi>>>13,Ei=g[4]|0,te=Ei&8191,re=Ei>>>13,Si=g[5]|0,ne=Si&8191,ie=Si>>>13,ki=g[6]|0,oe=ki&8191,se=ki>>>13,Ci=g[7]|0,ae=Ci&8191,ce=Ci>>>13,Ti=g[8]|0,fe=Ti&8191,ue=Ti>>>13,Ai=g[9]|0,le=Ai&8191,he=Ai>>>13,Ri=m[0]|0,de=Ri&8191,pe=Ri>>>13,Bi=m[1]|0,ge=Bi&8191,_e=Bi>>>13,Ii=m[2]|0,ve=Ii&8191,me=Ii>>>13,Pi=m[3]|0,we=Pi&8191,ye=Pi>>>13,Ni=m[4]|0,be=Ni&8191,xe=Ni>>>13,Oi=m[5]|0,Me=Oi&8191,Ee=Oi>>>13,Li=m[6]|0,Se=Li&8191,ke=Li>>>13,Ui=m[7]|0,Ce=Ui&8191,Te=Ui>>>13,qi=m[8]|0,Ae=qi&8191,Re=qi>>>13,Hi=m[9]|0,Be=Hi&8191,Ie=Hi>>>13;h.negative=s.negative^u.negative,h.length=19,_=Math.imul(L,de),a=Math.imul(L,pe),a=a+Math.imul(U,de)|0,v=Math.imul(U,pe);var Nr=(S+_|0)+((a&8191)<<13)|0;S=(v+(a>>>13)|0)+(Nr>>>26)|0,Nr&=67108863,_=Math.imul(W,de),a=Math.imul(W,pe),a=a+Math.imul(K,de)|0,v=Math.imul(K,pe),_=_+Math.imul(L,ge)|0,a=a+Math.imul(L,_e)|0,a=a+Math.imul(U,ge)|0,v=v+Math.imul(U,_e)|0;var Or=(S+_|0)+((a&8191)<<13)|0;S=(v+(a>>>13)|0)+(Or>>>26)|0,Or&=67108863,_=Math.imul(V,de),a=Math.imul(V,pe),a=a+Math.imul(G,de)|0,v=Math.imul(G,pe),_=_+Math.imul(W,ge)|0,a=a+Math.imul(W,_e)|0,a=a+Math.imul(K,ge)|0,v=v+Math.imul(K,_e)|0,_=_+Math.imul(L,ve)|0,a=a+Math.imul(L,me)|0,a=a+Math.imul(U,ve)|0,v=v+Math.imul(U,me)|0;var Lr=(S+_|0)+((a&8191)<<13)|0;S=(v+(a>>>13)|0)+(Lr>>>26)|0,Lr&=67108863,_=Math.imul(X,de),a=Math.imul(X,pe),a=a+Math.imul(ee,de)|0,v=Math.imul(ee,pe),_=_+Math.imul(V,ge)|0,a=a+Math.imul(V,_e)|0,a=a+Math.imul(G,ge)|0,v=v+Math.imul(G,_e)|0,_=_+Math.imul(W,ve)|0,a=a+Math.imul(W,me)|0,a=a+Math.imul(K,ve)|0,v=v+Math.imul(K,me)|0,_=_+Math.imul(L,we)|0,a=a+Math.imul(L,ye)|0,a=a+Math.imul(U,we)|0,v=v+Math.imul(U,ye)|0;var Ur=(S+_|0)+((a&8191)<<13)|0;S=(v+(a>>>13)|0)+(Ur>>>26)|0,Ur&=67108863,_=Math.imul(te,de),a=Math.imul(te,pe),a=a+Math.imul(re,de)|0,v=Math.imul(re,pe),_=_+Math.imul(X,ge)|0,a=a+Math.imul(X,_e)|0,a=a+Math.imul(ee,ge)|0,v=v+Math.imul(ee,_e)|0,_=_+Math.imul(V,ve)|0,a=a+Math.imul(V,me)|0,a=a+Math.imul(G,ve)|0,v=v+Math.imul(G,me)|0,_=_+Math.imul(W,we)|0,a=a+Math.imul(W,ye)|0,a=a+Math.imul(K,we)|0,v=v+Math.imul(K,ye)|0,_=_+Math.imul(L,be)|0,a=a+Math.imul(L,xe)|0,a=a+Math.imul(U,be)|0,v=v+Math.imul(U,xe)|0;var qr=(S+_|0)+((a&8191)<<13)|0;S=(v+(a>>>13)|0)+(qr>>>26)|0,qr&=67108863,_=Math.imul(ne,de),a=Math.imul(ne,pe),a=a+Math.imul(ie,de)|0,v=Math.imul(ie,pe),_=_+Math.imul(te,ge)|0,a=a+Math.imul(te,_e)|0,a=a+Math.imul(re,ge)|0,v=v+Math.imul(re,_e)|0,_=_+Math.imul(X,ve)|0,a=a+Math.imul(X,me)|0,a=a+Math.imul(ee,ve)|0,v=v+Math.imul(ee,me)|0,_=_+Math.imul(V,we)|0,a=a+Math.imul(V,ye)|0,a=a+Math.imul(G,we)|0,v=v+Math.imul(G,ye)|0,_=_+Math.imul(W,be)|0,a=a+Math.imul(W,xe)|0,a=a+Math.imul(K,be)|0,v=v+Math.imul(K,xe)|0,_=_+Math.imul(L,Me)|0,a=a+Math.imul(L,Ee)|0,a=a+Math.imul(U,Me)|0,v=v+Math.imul(U,Ee)|0;var Hr=(S+_|0)+((a&8191)<<13)|0;S=(v+(a>>>13)|0)+(Hr>>>26)|0,Hr&=67108863,_=Math.imul(oe,de),a=Math.imul(oe,pe),a=a+Math.imul(se,de)|0,v=Math.imul(se,pe),_=_+Math.imul(ne,ge)|0,a=a+Math.imul(ne,_e)|0,a=a+Math.imul(ie,ge)|0,v=v+Math.imul(ie,_e)|0,_=_+Math.imul(te,ve)|0,a=a+Math.imul(te,me)|0,a=a+Math.imul(re,ve)|0,v=v+Math.imul(re,me)|0,_=_+Math.imul(X,we)|0,a=a+Math.imul(X,ye)|0,a=a+Math.imul(ee,we)|0,v=v+Math.imul(ee,ye)|0,_=_+Math.imul(V,be)|0,a=a+Math.imul(V,xe)|0,a=a+Math.imul(G,be)|0,v=v+Math.imul(G,xe)|0,_=_+Math.imul(W,Me)|0,a=a+Math.imul(W,Ee)|0,a=a+Math.imul(K,Me)|0,v=v+Math.imul(K,Ee)|0,_=_+Math.imul(L,Se)|0,a=a+Math.imul(L,ke)|0,a=a+Math.imul(U,Se)|0,v=v+Math.imul(U,ke)|0;var Dr=(S+_|0)+((a&8191)<<13)|0;S=(v+(a>>>13)|0)+(Dr>>>26)|0,Dr&=67108863,_=Math.imul(ae,de),a=Math.imul(ae,pe),a=a+Math.imul(ce,de)|0,v=Math.imul(ce,pe),_=_+Math.imul(oe,ge)|0,a=a+Math.imul(oe,_e)|0,a=a+Math.imul(se,ge)|0,v=v+Math.imul(se,_e)|0,_=_+Math.imul(ne,ve)|0,a=a+Math.imul(ne,me)|0,a=a+Math.imul(ie,ve)|0,v=v+Math.imul(ie,me)|0,_=_+Math.imul(te,we)|0,a=a+Math.imul(te,ye)|0,a=a+Math.imul(re,we)|0,v=v+Math.imul(re,ye)|0,_=_+Math.imul(X,be)|0,a=a+Math.imul(X,xe)|0,a=a+Math.imul(ee,be)|0,v=v+Math.imul(ee,xe)|0,_=_+Math.imul(V,Me)|0,a=a+Math.imul(V,Ee)|0,a=a+Math.imul(G,Me)|0,v=v+Math.imul(G,Ee)|0,_=_+Math.imul(W,Se)|0,a=a+Math.imul(W,ke)|0,a=a+Math.imul(K,Se)|0,v=v+Math.imul(K,ke)|0,_=_+Math.imul(L,Ce)|0,a=a+Math.imul(L,Te)|0,a=a+Math.imul(U,Ce)|0,v=v+Math.imul(U,Te)|0;var $r=(S+_|0)+((a&8191)<<13)|0;S=(v+(a>>>13)|0)+($r>>>26)|0,$r&=67108863,_=Math.imul(fe,de),a=Math.imul(fe,pe),a=a+Math.imul(ue,de)|0,v=Math.imul(ue,pe),_=_+Math.imul(ae,ge)|0,a=a+Math.imul(ae,_e)|0,a=a+Math.imul(ce,ge)|0,v=v+Math.imul(ce,_e)|0,_=_+Math.imul(oe,ve)|0,a=a+Math.imul(oe,me)|0,a=a+Math.imul(se,ve)|0,v=v+Math.imul(se,me)|0,_=_+Math.imul(ne,we)|0,a=a+Math.imul(ne,ye)|0,a=a+Math.imul(ie,we)|0,v=v+Math.imul(ie,ye)|0,_=_+Math.imul(te,be)|0,a=a+Math.imul(te,xe)|0,a=a+Math.imul(re,be)|0,v=v+Math.imul(re,xe)|0,_=_+Math.imul(X,Me)|0,a=a+Math.imul(X,Ee)|0,a=a+Math.imul(ee,Me)|0,v=v+Math.imul(ee,Ee)|0,_=_+Math.imul(V,Se)|0,a=a+Math.imul(V,ke)|0,a=a+Math.imul(G,Se)|0,v=v+Math.imul(G,ke)|0,_=_+Math.imul(W,Ce)|0,a=a+Math.imul(W,Te)|0,a=a+Math.imul(K,Ce)|0,v=v+Math.imul(K,Te)|0,_=_+Math.imul(L,Ae)|0,a=a+Math.imul(L,Re)|0,a=a+Math.imul(U,Ae)|0,v=v+Math.imul(U,Re)|0;var Fr=(S+_|0)+((a&8191)<<13)|0;S=(v+(a>>>13)|0)+(Fr>>>26)|0,Fr&=67108863,_=Math.imul(le,de),a=Math.imul(le,pe),a=a+Math.imul(he,de)|0,v=Math.imul(he,pe),_=_+Math.imul(fe,ge)|0,a=a+Math.imul(fe,_e)|0,a=a+Math.imul(ue,ge)|0,v=v+Math.imul(ue,_e)|0,_=_+Math.imul(ae,ve)|0,a=a+Math.imul(ae,me)|0,a=a+Math.imul(ce,ve)|0,v=v+Math.imul(ce,me)|0,_=_+Math.imul(oe,we)|0,a=a+Math.imul(oe,ye)|0,a=a+Math.imul(se,we)|0,v=v+Math.imul(se,ye)|0,_=_+Math.imul(ne,be)|0,a=a+Math.imul(ne,xe)|0,a=a+Math.imul(ie,be)|0,v=v+Math.imul(ie,xe)|0,_=_+Math.imul(te,Me)|0,a=a+Math.imul(te,Ee)|0,a=a+Math.imul(re,Me)|0,v=v+Math.imul(re,Ee)|0,_=_+Math.imul(X,Se)|0,a=a+Math.imul(X,ke)|0,a=a+Math.imul(ee,Se)|0,v=v+Math.imul(ee,ke)|0,_=_+Math.imul(V,Ce)|0,a=a+Math.imul(V,Te)|0,a=a+Math.imul(G,Ce)|0,v=v+Math.imul(G,Te)|0,_=_+Math.imul(W,Ae)|0,a=a+Math.imul(W,Re)|0,a=a+Math.imul(K,Ae)|0,v=v+Math.imul(K,Re)|0,_=_+Math.imul(L,Be)|0,a=a+Math.imul(L,Ie)|0,a=a+Math.imul(U,Be)|0,v=v+Math.imul(U,Ie)|0;var Wr=(S+_|0)+((a&8191)<<13)|0;S=(v+(a>>>13)|0)+(Wr>>>26)|0,Wr&=67108863,_=Math.imul(le,ge),a=Math.imul(le,_e),a=a+Math.imul(he,ge)|0,v=Math.imul(he,_e),_=_+Math.imul(fe,ve)|0,a=a+Math.imul(fe,me)|0,a=a+Math.imul(ue,ve)|0,v=v+Math.imul(ue,me)|0,_=_+Math.imul(ae,we)|0,a=a+Math.imul(ae,ye)|0,a=a+Math.imul(ce,we)|0,v=v+Math.imul(ce,ye)|0,_=_+Math.imul(oe,be)|0,a=a+Math.imul(oe,xe)|0,a=a+Math.imul(se,be)|0,v=v+Math.imul(se,xe)|0,_=_+Math.imul(ne,Me)|0,a=a+Math.imul(ne,Ee)|0,a=a+Math.imul(ie,Me)|0,v=v+Math.imul(ie,Ee)|0,_=_+Math.imul(te,Se)|0,a=a+Math.imul(te,ke)|0,a=a+Math.imul(re,Se)|0,v=v+Math.imul(re,ke)|0,_=_+Math.imul(X,Ce)|0,a=a+Math.imul(X,Te)|0,a=a+Math.imul(ee,Ce)|0,v=v+Math.imul(ee,Te)|0,_=_+Math.imul(V,Ae)|0,a=a+Math.imul(V,Re)|0,a=a+Math.imul(G,Ae)|0,v=v+Math.imul(G,Re)|0,_=_+Math.imul(W,Be)|0,a=a+Math.imul(W,Ie)|0,a=a+Math.imul(K,Be)|0,v=v+Math.imul(K,Ie)|0;var zr=(S+_|0)+((a&8191)<<13)|0;S=(v+(a>>>13)|0)+(zr>>>26)|0,zr&=67108863,_=Math.imul(le,ve),a=Math.imul(le,me),a=a+Math.imul(he,ve)|0,v=Math.imul(he,me),_=_+Math.imul(fe,we)|0,a=a+Math.imul(fe,ye)|0,a=a+Math.imul(ue,we)|0,v=v+Math.imul(ue,ye)|0,_=_+Math.imul(ae,be)|0,a=a+Math.imul(ae,xe)|0,a=a+Math.imul(ce,be)|0,v=v+Math.imul(ce,xe)|0,_=_+Math.imul(oe,Me)|0,a=a+Math.imul(oe,Ee)|0,a=a+Math.imul(se,Me)|0,v=v+Math.imul(se,Ee)|0,_=_+Math.imul(ne,Se)|0,a=a+Math.imul(ne,ke)|0,a=a+Math.imul(ie,Se)|0,v=v+Math.imul(ie,ke)|0,_=_+Math.imul(te,Ce)|0,a=a+Math.imul(te,Te)|0,a=a+Math.imul(re,Ce)|0,v=v+Math.imul(re,Te)|0,_=_+Math.imul(X,Ae)|0,a=a+Math.imul(X,Re)|0,a=a+Math.imul(ee,Ae)|0,v=v+Math.imul(ee,Re)|0,_=_+Math.imul(V,Be)|0,a=a+Math.imul(V,Ie)|0,a=a+Math.imul(G,Be)|0,v=v+Math.imul(G,Ie)|0;var jr=(S+_|0)+((a&8191)<<13)|0;S=(v+(a>>>13)|0)+(jr>>>26)|0,jr&=67108863,_=Math.imul(le,we),a=Math.imul(le,ye),a=a+Math.imul(he,we)|0,v=Math.imul(he,ye),_=_+Math.imul(fe,be)|0,a=a+Math.imul(fe,xe)|0,a=a+Math.imul(ue,be)|0,v=v+Math.imul(ue,xe)|0,_=_+Math.imul(ae,Me)|0,a=a+Math.imul(ae,Ee)|0,a=a+Math.imul(ce,Me)|0,v=v+Math.imul(ce,Ee)|0,_=_+Math.imul(oe,Se)|0,a=a+Math.imul(oe,ke)|0,a=a+Math.imul(se,Se)|0,v=v+Math.imul(se,ke)|0,_=_+Math.imul(ne,Ce)|0,a=a+Math.imul(ne,Te)|0,a=a+Math.imul(ie,Ce)|0,v=v+Math.imul(ie,Te)|0,_=_+Math.imul(te,Ae)|0,a=a+Math.imul(te,Re)|0,a=a+Math.imul(re,Ae)|0,v=v+Math.imul(re,Re)|0,_=_+Math.imul(X,Be)|0,a=a+Math.imul(X,Ie)|0,a=a+Math.imul(ee,Be)|0,v=v+Math.imul(ee,Ie)|0;var Kr=(S+_|0)+((a&8191)<<13)|0;S=(v+(a>>>13)|0)+(Kr>>>26)|0,Kr&=67108863,_=Math.imul(le,be),a=Math.imul(le,xe),a=a+Math.imul(he,be)|0,v=Math.imul(he,xe),_=_+Math.imul(fe,Me)|0,a=a+Math.imul(fe,Ee)|0,a=a+Math.imul(ue,Me)|0,v=v+Math.imul(ue,Ee)|0,_=_+Math.imul(ae,Se)|0,a=a+Math.imul(ae,ke)|0,a=a+Math.imul(ce,Se)|0,v=v+Math.imul(ce,ke)|0,_=_+Math.imul(oe,Ce)|0,a=a+Math.imul(oe,Te)|0,a=a+Math.imul(se,Ce)|0,v=v+Math.imul(se,Te)|0,_=_+Math.imul(ne,Ae)|0,a=a+Math.imul(ne,Re)|0,a=a+Math.imul(ie,Ae)|0,v=v+Math.imul(ie,Re)|0,_=_+Math.imul(te,Be)|0,a=a+Math.imul(te,Ie)|0,a=a+Math.imul(re,Be)|0,v=v+Math.imul(re,Ie)|0;var Vr=(S+_|0)+((a&8191)<<13)|0;S=(v+(a>>>13)|0)+(Vr>>>26)|0,Vr&=67108863,_=Math.imul(le,Me),a=Math.imul(le,Ee),a=a+Math.imul(he,Me)|0,v=Math.imul(he,Ee),_=_+Math.imul(fe,Se)|0,a=a+Math.imul(fe,ke)|0,a=a+Math.imul(ue,Se)|0,v=v+Math.imul(ue,ke)|0,_=_+Math.imul(ae,Ce)|0,a=a+Math.imul(ae,Te)|0,a=a+Math.imul(ce,Ce)|0,v=v+Math.imul(ce,Te)|0,_=_+Math.imul(oe,Ae)|0,a=a+Math.imul(oe,Re)|0,a=a+Math.imul(se,Ae)|0,v=v+Math.imul(se,Re)|0,_=_+Math.imul(ne,Be)|0,a=a+Math.imul(ne,Ie)|0,a=a+Math.imul(ie,Be)|0,v=v+Math.imul(ie,Ie)|0;var Jr=(S+_|0)+((a&8191)<<13)|0;S=(v+(a>>>13)|0)+(Jr>>>26)|0,Jr&=67108863,_=Math.imul(le,Se),a=Math.imul(le,ke),a=a+Math.imul(he,Se)|0,v=Math.imul(he,ke),_=_+Math.imul(fe,Ce)|0,a=a+Math.imul(fe,Te)|0,a=a+Math.imul(ue,Ce)|0,v=v+Math.imul(ue,Te)|0,_=_+Math.imul(ae,Ae)|0,a=a+Math.imul(ae,Re)|0,a=a+Math.imul(ce,Ae)|0,v=v+Math.imul(ce,Re)|0,_=_+Math.imul(oe,Be)|0,a=a+Math.imul(oe,Ie)|0,a=a+Math.imul(se,Be)|0,v=v+Math.imul(se,Ie)|0;var Gr=(S+_|0)+((a&8191)<<13)|0;S=(v+(a>>>13)|0)+(Gr>>>26)|0,Gr&=67108863,_=Math.imul(le,Ce),a=Math.imul(le,Te),a=a+Math.imul(he,Ce)|0,v=Math.imul(he,Te),_=_+Math.imul(fe,Ae)|0,a=a+Math.imul(fe,Re)|0,a=a+Math.imul(ue,Ae)|0,v=v+Math.imul(ue,Re)|0,_=_+Math.imul(ae,Be)|0,a=a+Math.imul(ae,Ie)|0,a=a+Math.imul(ce,Be)|0,v=v+Math.imul(ce,Ie)|0;var Yr=(S+_|0)+((a&8191)<<13)|0;S=(v+(a>>>13)|0)+(Yr>>>26)|0,Yr&=67108863,_=Math.imul(le,Ae),a=Math.imul(le,Re),a=a+Math.imul(he,Ae)|0,v=Math.imul(he,Re),_=_+Math.imul(fe,Be)|0,a=a+Math.imul(fe,Ie)|0,a=a+Math.imul(ue,Be)|0,v=v+Math.imul(ue,Ie)|0;var Zr=(S+_|0)+((a&8191)<<13)|0;S=(v+(a>>>13)|0)+(Zr>>>26)|0,Zr&=67108863,_=Math.imul(le,Be),a=Math.imul(le,Ie),a=a+Math.imul(he,Be)|0,v=Math.imul(he,Ie);var Qr=(S+_|0)+((a&8191)<<13)|0;return S=(v+(a>>>13)|0)+(Qr>>>26)|0,Qr&=67108863,x[0]=Nr,x[1]=Or,x[2]=Lr,x[3]=Ur,x[4]=qr,x[5]=Hr,x[6]=Dr,x[7]=$r,x[8]=Fr,x[9]=Wr,x[10]=zr,x[11]=jr,x[12]=Kr,x[13]=Vr,x[14]=Jr,x[15]=Gr,x[16]=Yr,x[17]=Zr,x[18]=Qr,S!==0&&(x[19]=S,h.length++),h};Math.imul||(T=R);function B(w,s,u){u.negative=s.negative^w.negative,u.length=w.length+s.length;for(var h=0,g=0,m=0;m<u.length-1;m++){var x=g;g=0;for(var S=h&67108863,_=Math.min(m,s.length-1),a=Math.max(0,m-w.length+1);a<=_;a++){var v=m-a,O=w.words[v]|0,L=s.words[a]|0,U=O*L,$=U&67108863;x=x+(U/67108864|0)|0,$=$+S|0,S=$&67108863,x=x+($>>>26)|0,g+=x>>>26,x&=67108863}u.words[m]=S,h=x,x=g}return h!==0?u.words[m]=h:u.length--,u.strip()}function b(w,s,u){var h=new M;return h.mulp(w,s,u)}o.prototype.mulTo=function(s,u){var h,g=this.length+s.length;return this.length===10&&s.length===10?h=T(this,s,u):g<63?h=R(this,s,u):g<1024?h=B(this,s,u):h=b(this,s,u),h};function M(w,s){this.x=w,this.y=s}M.prototype.makeRBT=function(s){for(var u=new Array(s),h=o.prototype._countBits(s)-1,g=0;g<s;g++)u[g]=this.revBin(g,h,s);return u},M.prototype.revBin=function(s,u,h){if(s===0||s===h-1)return s;for(var g=0,m=0;m<u;m++)g|=(s&1)<<u-m-1,s>>=1;return g},M.prototype.permute=function(s,u,h,g,m,x){for(var S=0;S<x;S++)g[S]=u[s[S]],m[S]=h[s[S]]},M.prototype.transform=function(s,u,h,g,m,x){this.permute(x,s,u,h,g,m);for(var S=1;S<m;S<<=1)for(var _=S<<1,a=Math.cos(2*Math.PI/_),v=Math.sin(2*Math.PI/_),O=0;O<m;O+=_)for(var L=a,U=v,$=0;$<S;$++){var W=h[O+$],K=g[O+$],Ye=h[O+$+S],V=g[O+$+S],G=L*Ye-U*V;V=L*V+U*Ye,Ye=G,h[O+$]=W+Ye,g[O+$]=K+V,h[O+$+S]=W-Ye,g[O+$+S]=K-V,$!==_&&(G=a*L-v*U,U=a*U+v*L,L=G)}},M.prototype.guessLen13b=function(s,u){var h=Math.max(u,s)|1,g=h&1,m=0;for(h=h/2|0;h;h=h>>>1)m++;return 1<<m+1+g},M.prototype.conjugate=function(s,u,h){if(!(h<=1))for(var g=0;g<h/2;g++){var m=s[g];s[g]=s[h-g-1],s[h-g-1]=m,m=u[g],u[g]=-u[h-g-1],u[h-g-1]=-m}},M.prototype.normalize13b=function(s,u){for(var h=0,g=0;g<u/2;g++){var m=Math.round(s[2*g+1]/u)*8192+Math.round(s[2*g]/u)+h;s[g]=m&67108863,m<67108864?h=0:h=m/67108864|0}return s},M.prototype.convert13b=function(s,u,h,g){for(var m=0,x=0;x<u;x++)m=m+(s[x]|0),h[2*x]=m&8191,m=m>>>13,h[2*x+1]=m&8191,m=m>>>13;for(x=2*u;x<g;++x)h[x]=0;n(m===0),n((m&-8192)===0)},M.prototype.stub=function(s){for(var u=new Array(s),h=0;h<s;h++)u[h]=0;return u},M.prototype.mulp=function(s,u,h){var g=2*this.guessLen13b(s.length,u.length),m=this.makeRBT(g),x=this.stub(g),S=new Array(g),_=new Array(g),a=new Array(g),v=new Array(g),O=new Array(g),L=new Array(g),U=h.words;U.length=g,this.convert13b(s.words,s.length,S,g),this.convert13b(u.words,u.length,v,g),this.transform(S,x,_,a,g,m),this.transform(v,x,O,L,g,m);for(var $=0;$<g;$++){var W=_[$]*O[$]-a[$]*L[$];a[$]=_[$]*L[$]+a[$]*O[$],_[$]=W}return this.conjugate(_,a,g),this.transform(_,a,U,x,g,m),this.conjugate(U,x,g),this.normalize13b(U,g),h.negative=s.negative^u.negative,h.length=s.length+u.length,h.strip()},o.prototype.mul=function(s){var u=new o(null);return u.words=new Array(this.length+s.length),this.mulTo(s,u)},o.prototype.mulf=function(s){var u=new o(null);return u.words=new Array(this.length+s.length),b(this,s,u)},o.prototype.imul=function(s){return this.clone().mulTo(s,this)},o.prototype.imuln=function(s){n(typeof s=="number"),n(s<67108864);for(var u=0,h=0;h<this.length;h++){var g=(this.words[h]|0)*s,m=(g&67108863)+(u&67108863);u>>=26,u+=g/67108864|0,u+=m>>>26,this.words[h]=m&67108863}return u!==0&&(this.words[h]=u,this.length++),this},o.prototype.muln=function(s){return this.clone().imuln(s)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(s){var u=k(s);if(u.length===0)return new o(1);for(var h=this,g=0;g<u.length&&u[g]===0;g++,h=h.sqr());if(++g<u.length)for(var m=h.sqr();g<u.length;g++,m=m.sqr())u[g]!==0&&(h=h.mul(m));return h},o.prototype.iushln=function(s){n(typeof s=="number"&&s>=0);var u=s%26,h=(s-u)/26,g=67108863>>>26-u<<26-u,m;if(u!==0){var x=0;for(m=0;m<this.length;m++){var S=this.words[m]&g,_=(this.words[m]|0)-S<<u;this.words[m]=_|x,x=S>>>26-u}x&&(this.words[m]=x,this.length++)}if(h!==0){for(m=this.length-1;m>=0;m--)this.words[m+h]=this.words[m];for(m=0;m<h;m++)this.words[m]=0;this.length+=h}return this.strip()},o.prototype.ishln=function(s){return n(this.negative===0),this.iushln(s)},o.prototype.iushrn=function(s,u,h){n(typeof s=="number"&&s>=0);var g;u?g=(u-u%26)/26:g=0;var m=s%26,x=Math.min((s-m)/26,this.length),S=67108863^67108863>>>m<<m,_=h;if(g-=x,g=Math.max(0,g),_){for(var a=0;a<x;a++)_.words[a]=this.words[a];_.length=x}if(x!==0)if(this.length>x)for(this.length-=x,a=0;a<this.length;a++)this.words[a]=this.words[a+x];else this.words[0]=0,this.length=1;var v=0;for(a=this.length-1;a>=0&&(v!==0||a>=g);a--){var O=this.words[a]|0;this.words[a]=v<<26-m|O>>>m,v=O&S}return _&&v!==0&&(_.words[_.length++]=v),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},o.prototype.ishrn=function(s,u,h){return n(this.negative===0),this.iushrn(s,u,h)},o.prototype.shln=function(s){return this.clone().ishln(s)},o.prototype.ushln=function(s){return this.clone().iushln(s)},o.prototype.shrn=function(s){return this.clone().ishrn(s)},o.prototype.ushrn=function(s){return this.clone().iushrn(s)},o.prototype.testn=function(s){n(typeof s=="number"&&s>=0);var u=s%26,h=(s-u)/26,g=1<<u;if(this.length<=h)return!1;var m=this.words[h];return!!(m&g)},o.prototype.imaskn=function(s){n(typeof s=="number"&&s>=0);var u=s%26,h=(s-u)/26;if(n(this.negative===0,"imaskn works only with positive numbers"),this.length<=h)return this;if(u!==0&&h++,this.length=Math.min(h,this.length),u!==0){var g=67108863^67108863>>>u<<u;this.words[this.length-1]&=g}return this.strip()},o.prototype.maskn=function(s){return this.clone().imaskn(s)},o.prototype.iaddn=function(s){return n(typeof s=="number"),n(s<67108864),s<0?this.isubn(-s):this.negative!==0?this.length===1&&(this.words[0]|0)<s?(this.words[0]=s-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(s),this.negative=1,this):this._iaddn(s)},o.prototype._iaddn=function(s){this.words[0]+=s;for(var u=0;u<this.length&&this.words[u]>=67108864;u++)this.words[u]-=67108864,u===this.length-1?this.words[u+1]=1:this.words[u+1]++;return this.length=Math.max(this.length,u+1),this},o.prototype.isubn=function(s){if(n(typeof s=="number"),n(s<67108864),s<0)return this.iaddn(-s);if(this.negative!==0)return this.negative=0,this.iaddn(s),this.negative=1,this;if(this.words[0]-=s,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var u=0;u<this.length&&this.words[u]<0;u++)this.words[u]+=67108864,this.words[u+1]-=1;return this.strip()},o.prototype.addn=function(s){return this.clone().iaddn(s)},o.prototype.subn=function(s){return this.clone().isubn(s)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(s,u,h){var g=s.length+h,m;this._expand(g);var x,S=0;for(m=0;m<s.length;m++){x=(this.words[m+h]|0)+S;var _=(s.words[m]|0)*u;x-=_&67108863,S=(x>>26)-(_/67108864|0),this.words[m+h]=x&67108863}for(;m<this.length-h;m++)x=(this.words[m+h]|0)+S,S=x>>26,this.words[m+h]=x&67108863;if(S===0)return this.strip();for(n(S===-1),S=0,m=0;m<this.length;m++)x=-(this.words[m]|0)+S,S=x>>26,this.words[m]=x&67108863;return this.negative=1,this.strip()},o.prototype._wordDiv=function(s,u){var h=this.length-s.length,g=this.clone(),m=s,x=m.words[m.length-1]|0,S=this._countBits(x);h=26-S,h!==0&&(m=m.ushln(h),g.iushln(h),x=m.words[m.length-1]|0);var _=g.length-m.length,a;if(u!=="mod"){a=new o(null),a.length=_+1,a.words=new Array(a.length);for(var v=0;v<a.length;v++)a.words[v]=0}var O=g.clone()._ishlnsubmul(m,1,_);O.negative===0&&(g=O,a&&(a.words[_]=1));for(var L=_-1;L>=0;L--){var U=(g.words[m.length+L]|0)*67108864+(g.words[m.length+L-1]|0);for(U=Math.min(U/x|0,67108863),g._ishlnsubmul(m,U,L);g.negative!==0;)U--,g.negative=0,g._ishlnsubmul(m,1,L),g.isZero()||(g.negative^=1);a&&(a.words[L]=U)}return a&&a.strip(),g.strip(),u!=="div"&&h!==0&&g.iushrn(h),{div:a||null,mod:g}},o.prototype.divmod=function(s,u,h){if(n(!s.isZero()),this.isZero())return{div:new o(0),mod:new o(0)};var g,m,x;return this.negative!==0&&s.negative===0?(x=this.neg().divmod(s,u),u!=="mod"&&(g=x.div.neg()),u!=="div"&&(m=x.mod.neg(),h&&m.negative!==0&&m.iadd(s)),{div:g,mod:m}):this.negative===0&&s.negative!==0?(x=this.divmod(s.neg(),u),u!=="mod"&&(g=x.div.neg()),{div:g,mod:x.mod}):(this.negative&s.negative)!==0?(x=this.neg().divmod(s.neg(),u),u!=="div"&&(m=x.mod.neg(),h&&m.negative!==0&&m.isub(s)),{div:x.div,mod:m}):s.length>this.length||this.cmp(s)<0?{div:new o(0),mod:this}:s.length===1?u==="div"?{div:this.divn(s.words[0]),mod:null}:u==="mod"?{div:null,mod:new o(this.modn(s.words[0]))}:{div:this.divn(s.words[0]),mod:new o(this.modn(s.words[0]))}:this._wordDiv(s,u)},o.prototype.div=function(s){return this.divmod(s,"div",!1).div},o.prototype.mod=function(s){return this.divmod(s,"mod",!1).mod},o.prototype.umod=function(s){return this.divmod(s,"mod",!0).mod},o.prototype.divRound=function(s){var u=this.divmod(s);if(u.mod.isZero())return u.div;var h=u.div.negative!==0?u.mod.isub(s):u.mod,g=s.ushrn(1),m=s.andln(1),x=h.cmp(g);return x<0||m===1&&x===0?u.div:u.div.negative!==0?u.div.isubn(1):u.div.iaddn(1)},o.prototype.modn=function(s){n(s<=67108863);for(var u=(1<<26)%s,h=0,g=this.length-1;g>=0;g--)h=(u*h+(this.words[g]|0))%s;return h},o.prototype.idivn=function(s){n(s<=67108863);for(var u=0,h=this.length-1;h>=0;h--){var g=(this.words[h]|0)+u*67108864;this.words[h]=g/s|0,u=g%s}return this.strip()},o.prototype.divn=function(s){return this.clone().idivn(s)},o.prototype.egcd=function(s){n(s.negative===0),n(!s.isZero());var u=this,h=s.clone();u.negative!==0?u=u.umod(s):u=u.clone();for(var g=new o(1),m=new o(0),x=new o(0),S=new o(1),_=0;u.isEven()&&h.isEven();)u.iushrn(1),h.iushrn(1),++_;for(var a=h.clone(),v=u.clone();!u.isZero();){for(var O=0,L=1;(u.words[0]&L)===0&&O<26;++O,L<<=1);if(O>0)for(u.iushrn(O);O-- >0;)(g.isOdd()||m.isOdd())&&(g.iadd(a),m.isub(v)),g.iushrn(1),m.iushrn(1);for(var U=0,$=1;(h.words[0]&$)===0&&U<26;++U,$<<=1);if(U>0)for(h.iushrn(U);U-- >0;)(x.isOdd()||S.isOdd())&&(x.iadd(a),S.isub(v)),x.iushrn(1),S.iushrn(1);u.cmp(h)>=0?(u.isub(h),g.isub(x),m.isub(S)):(h.isub(u),x.isub(g),S.isub(m))}return{a:x,b:S,gcd:h.iushln(_)}},o.prototype._invmp=function(s){n(s.negative===0),n(!s.isZero());var u=this,h=s.clone();u.negative!==0?u=u.umod(s):u=u.clone();for(var g=new o(1),m=new o(0),x=h.clone();u.cmpn(1)>0&&h.cmpn(1)>0;){for(var S=0,_=1;(u.words[0]&_)===0&&S<26;++S,_<<=1);if(S>0)for(u.iushrn(S);S-- >0;)g.isOdd()&&g.iadd(x),g.iushrn(1);for(var a=0,v=1;(h.words[0]&v)===0&&a<26;++a,v<<=1);if(a>0)for(h.iushrn(a);a-- >0;)m.isOdd()&&m.iadd(x),m.iushrn(1);u.cmp(h)>=0?(u.isub(h),g.isub(m)):(h.isub(u),m.isub(g))}var O;return u.cmpn(1)===0?O=g:O=m,O.cmpn(0)<0&&O.iadd(s),O},o.prototype.gcd=function(s){if(this.isZero())return s.abs();if(s.isZero())return this.abs();var u=this.clone(),h=s.clone();u.negative=0,h.negative=0;for(var g=0;u.isEven()&&h.isEven();g++)u.iushrn(1),h.iushrn(1);do{for(;u.isEven();)u.iushrn(1);for(;h.isEven();)h.iushrn(1);var m=u.cmp(h);if(m<0){var x=u;u=h,h=x}else if(m===0||h.cmpn(1)===0)break;u.isub(h)}while(!0);return h.iushln(g)},o.prototype.invm=function(s){return this.egcd(s).a.umod(s)},o.prototype.isEven=function(){return(this.words[0]&1)===0},o.prototype.isOdd=function(){return(this.words[0]&1)===1},o.prototype.andln=function(s){return this.words[0]&s},o.prototype.bincn=function(s){n(typeof s=="number");var u=s%26,h=(s-u)/26,g=1<<u;if(this.length<=h)return this._expand(h+1),this.words[h]|=g,this;for(var m=g,x=h;m!==0&&x<this.length;x++){var S=this.words[x]|0;S+=m,m=S>>>26,S&=67108863,this.words[x]=S}return m!==0&&(this.words[x]=m,this.length++),this},o.prototype.isZero=function(){return this.length===1&&this.words[0]===0},o.prototype.cmpn=function(s){var u=s<0;if(this.negative!==0&&!u)return-1;if(this.negative===0&&u)return 1;this.strip();var h;if(this.length>1)h=1;else{u&&(s=-s),n(s<=67108863,"Number is too big");var g=this.words[0]|0;h=g===s?0:g<s?-1:1}return this.negative!==0?-h|0:h},o.prototype.cmp=function(s){if(this.negative!==0&&s.negative===0)return-1;if(this.negative===0&&s.negative!==0)return 1;var u=this.ucmp(s);return this.negative!==0?-u|0:u},o.prototype.ucmp=function(s){if(this.length>s.length)return 1;if(this.length<s.length)return-1;for(var u=0,h=this.length-1;h>=0;h--){var g=this.words[h]|0,m=s.words[h]|0;if(g!==m){g<m?u=-1:g>m&&(u=1);break}}return u},o.prototype.gtn=function(s){return this.cmpn(s)===1},o.prototype.gt=function(s){return this.cmp(s)===1},o.prototype.gten=function(s){return this.cmpn(s)>=0},o.prototype.gte=function(s){return this.cmp(s)>=0},o.prototype.ltn=function(s){return this.cmpn(s)===-1},o.prototype.lt=function(s){return this.cmp(s)===-1},o.prototype.lten=function(s){return this.cmpn(s)<=0},o.prototype.lte=function(s){return this.cmp(s)<=0},o.prototype.eqn=function(s){return this.cmpn(s)===0},o.prototype.eq=function(s){return this.cmp(s)===0},o.red=function(s){return new H(s)},o.prototype.toRed=function(s){return n(!this.red,"Already a number in reduction context"),n(this.negative===0,"red works only with positives"),s.convertTo(this)._forceRed(s)},o.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(s){return this.red=s,this},o.prototype.forceRed=function(s){return n(!this.red,"Already a number in reduction context"),this._forceRed(s)},o.prototype.redAdd=function(s){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,s)},o.prototype.redIAdd=function(s){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,s)},o.prototype.redSub=function(s){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,s)},o.prototype.redISub=function(s){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,s)},o.prototype.redShl=function(s){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,s)},o.prototype.redMul=function(s){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,s),this.red.mul(this,s)},o.prototype.redIMul=function(s){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,s),this.red.imul(this,s)},o.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(s){return n(this.red&&!s.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,s)};var C={k256:null,p224:null,p192:null,p25519:null};function E(w,s){this.name=w,this.p=new o(s,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}E.prototype._tmp=function(){var s=new o(null);return s.words=new Array(Math.ceil(this.n/13)),s},E.prototype.ireduce=function(s){var u=s,h;do this.split(u,this.tmp),u=this.imulK(u),u=u.iadd(this.tmp),h=u.bitLength();while(h>this.n);var g=h<this.n?-1:u.ucmp(this.p);return g===0?(u.words[0]=0,u.length=1):g>0?u.isub(this.p):u.strip(),u},E.prototype.split=function(s,u){s.iushrn(this.n,0,u)},E.prototype.imulK=function(s){return s.imul(this.k)};function A(){E.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}i(A,E),A.prototype.split=function(s,u){for(var h=4194303,g=Math.min(s.length,9),m=0;m<g;m++)u.words[m]=s.words[m];if(u.length=g,s.length<=9){s.words[0]=0,s.length=1;return}var x=s.words[9];for(u.words[u.length++]=x&h,m=10;m<s.length;m++){var S=s.words[m]|0;s.words[m-10]=(S&h)<<4|x>>>22,x=S}x>>>=22,s.words[m-10]=x,x===0&&s.length>10?s.length-=10:s.length-=9},A.prototype.imulK=function(s){s.words[s.length]=0,s.words[s.length+1]=0,s.length+=2;for(var u=0,h=0;h<s.length;h++){var g=s.words[h]|0;u+=g*977,s.words[h]=u&67108863,u=g*64+(u/67108864|0)}return s.words[s.length-1]===0&&(s.length--,s.words[s.length-1]===0&&s.length--),s};function P(){E.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}i(P,E);function N(){E.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}i(N,E);function D(){E.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}i(D,E),D.prototype.imulK=function(s){for(var u=0,h=0;h<s.length;h++){var g=(s.words[h]|0)*19+u,m=g&67108863;g>>>=26,s.words[h]=m,u=g}return u!==0&&(s.words[s.length++]=u),s},o._prime=function(s){if(C[s])return C[s];var u;if(s==="k256")u=new A;else if(s==="p224")u=new P;else if(s==="p192")u=new N;else if(s==="p25519")u=new D;else throw new Error("Unknown prime "+s);return C[s]=u,u};function H(w){if(typeof w=="string"){var s=o._prime(w);this.m=s.p,this.prime=s}else n(w.gtn(1),"modulus must be greater than 1"),this.m=w,this.prime=null}H.prototype._verify1=function(s){n(s.negative===0,"red works only with positives"),n(s.red,"red works only with red numbers")},H.prototype._verify2=function(s,u){n((s.negative|u.negative)===0,"red works only with positives"),n(s.red&&s.red===u.red,"red works only with red numbers")},H.prototype.imod=function(s){return this.prime?this.prime.ireduce(s)._forceRed(this):s.umod(this.m)._forceRed(this)},H.prototype.neg=function(s){return s.isZero()?s.clone():this.m.sub(s)._forceRed(this)},H.prototype.add=function(s,u){this._verify2(s,u);var h=s.add(u);return h.cmp(this.m)>=0&&h.isub(this.m),h._forceRed(this)},H.prototype.iadd=function(s,u){this._verify2(s,u);var h=s.iadd(u);return h.cmp(this.m)>=0&&h.isub(this.m),h},H.prototype.sub=function(s,u){this._verify2(s,u);var h=s.sub(u);return h.cmpn(0)<0&&h.iadd(this.m),h._forceRed(this)},H.prototype.isub=function(s,u){this._verify2(s,u);var h=s.isub(u);return h.cmpn(0)<0&&h.iadd(this.m),h},H.prototype.shl=function(s,u){return this._verify1(s),this.imod(s.ushln(u))},H.prototype.imul=function(s,u){return this._verify2(s,u),this.imod(s.imul(u))},H.prototype.mul=function(s,u){return this._verify2(s,u),this.imod(s.mul(u))},H.prototype.isqr=function(s){return this.imul(s,s.clone())},H.prototype.sqr=function(s){return this.mul(s,s)},H.prototype.sqrt=function(s){if(s.isZero())return s.clone();var u=this.m.andln(3);if(n(u%2===1),u===3){var h=this.m.add(new o(1)).iushrn(2);return this.pow(s,h)}for(var g=this.m.subn(1),m=0;!g.isZero()&&g.andln(1)===0;)m++,g.iushrn(1);n(!g.isZero());var x=new o(1).toRed(this),S=x.redNeg(),_=this.m.subn(1).iushrn(1),a=this.m.bitLength();for(a=new o(2*a*a).toRed(this);this.pow(a,_).cmp(S)!==0;)a.redIAdd(S);for(var v=this.pow(a,g),O=this.pow(s,g.addn(1).iushrn(1)),L=this.pow(s,g),U=m;L.cmp(x)!==0;){for(var $=L,W=0;$.cmp(x)!==0;W++)$=$.redSqr();n(W<U);var K=this.pow(v,new o(1).iushln(U-W-1));O=O.redMul(K),v=K.redSqr(),L=L.redMul(v),U=W}return O},H.prototype.invm=function(s){var u=s._invmp(this.m);return u.negative!==0?(u.negative=0,this.imod(u).redNeg()):this.imod(u)},H.prototype.pow=function(s,u){if(u.isZero())return new o(1).toRed(this);if(u.cmpn(1)===0)return s.clone();var h=4,g=new Array(1<<h);g[0]=new o(1).toRed(this),g[1]=s;for(var m=2;m<g.length;m++)g[m]=this.mul(g[m-1],s);var x=g[0],S=0,_=0,a=u.bitLength()%26;for(a===0&&(a=26),m=u.length-1;m>=0;m--){for(var v=u.words[m],O=a-1;O>=0;O--){var L=v>>O&1;if(x!==g[0]&&(x=this.sqr(x)),L===0&&S===0){_=0;continue}S<<=1,S|=L,_++,!(_!==h&&(m!==0||O!==0))&&(x=this.mul(x,g[S]),_=0,S=0)}a=26}return x},H.prototype.convertTo=function(s){var u=s.umod(this.m);return u===s?u.clone():u},H.prototype.convertFrom=function(s){var u=s.clone();return u.red=null,u},o.mont=function(s){return new Z(s)};function Z(w){H.call(this,w),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}i(Z,H),Z.prototype.convertTo=function(s){return this.imod(s.ushln(this.shift))},Z.prototype.convertFrom=function(s){var u=this.imod(s.mul(this.rinv));return u.red=null,u},Z.prototype.imul=function(s,u){if(s.isZero()||u.isZero())return s.words[0]=0,s.length=1,s;var h=s.imul(u),g=h.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),m=h.isub(g).iushrn(this.shift),x=m;return m.cmp(this.m)>=0?x=m.isub(this.m):m.cmpn(0)<0&&(x=m.iadd(this.m)),x._forceRed(this)},Z.prototype.mul=function(s,u){if(s.isZero()||u.isZero())return new o(0)._forceRed(this);var h=s.mul(u),g=h.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),m=h.isub(g).iushrn(this.shift),x=m;return m.cmp(this.m)>=0?x=m.isub(this.m):m.cmpn(0)<0&&(x=m.iadd(this.m)),x._forceRed(this)},Z.prototype.invm=function(s){var u=this.imod(s._invmp(this.m).mul(this.r2));return u._forceRed(this)}})(e,Q)})(Cs);const Ru=Cs.exports;var Bu=Xn;Xn.strict=Ts;Xn.loose=As;var Iu=Object.prototype.toString,Pu={"[object Int8Array]":!0,"[object Int16Array]":!0,"[object Int32Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Uint16Array]":!0,"[object Uint32Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0};function Xn(e){return Ts(e)||As(e)}function Ts(e){return e instanceof Int8Array||e instanceof Int16Array||e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Uint16Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array}function As(e){return Pu[Iu.call(e)]}var Nu=Bu.strict,Ou=function(t){if(Nu(t)){var r=Buffer.from(t.buffer);return t.byteLength!==t.buffer.byteLength&&(r=r.slice(t.byteOffset,t.byteOffset+t.byteLength)),r}else return Buffer.from(t)};const Rs="hex",Bs="utf8",Er="0";function yt(e){return new Uint8Array(e)}function Is(e,t=!1){const r=e.toString(Rs);return t?Bt(r):r}function Lu(e){return e.toString(Bs)}function Sr(e){return Ou(e)}function vt(e,t=!1){return Is(Sr(e),t)}function Uu(e){return Lu(Sr(e))}function qu(e){return Buffer.from(rt(e),Rs)}function mt(e){return yt(qu(e))}function ei(e){return Buffer.from(e,Bs)}function Hu(e){return yt(ei(e))}function Du(e,t=!1){return Is(ei(e),t)}function $u(e,t){return!(typeof e!="string"||!e.match(/^0x[0-9A-Fa-f]*$/)||t&&e.length!==2+2*t)}function Ps(...e){let t=[];return e.forEach(r=>t=t.concat(Array.from(r))),new Uint8Array([...t])}function Fu(e,t=8){const r=e%t;return r?(e-r)/t*t+t:e}function Wu(e,t=8,r=Er){return zu(e,Fu(e.length,t),r)}function zu(e,t,r=Er){return Ku(e,t,!0,r)}function rt(e){return e.replace(/^0x/,"")}function Bt(e){return e.startsWith("0x")?e:`0x${e}`}function Ns(e){return e=rt(e),e=Wu(e,2),e&&(e=Bt(e)),e}function ju(e){const t=e.startsWith("0x");return e=rt(e),e=e.startsWith(Er)?e.substring(1):e,t?Bt(e):e}function Ku(e,t,r,n=Er){const i=t-e.length;let o=e;if(i>0){const c=n.repeat(i);o=r?c+e:e+c}return o}function bn(e){return Sr(new Uint8Array(e))}function Vu(e,t){return vt(new Uint8Array(e),!t)}function Ju(e){return yt(e).buffer}function Gu(e){return ei(e)}function Yu(e,t){return Du(e,!t)}function Zu(e){return mt(e).buffer}function Os(e,t){const r=rt(Ns(new Ru(e).toString(16)));return t?r:Bt(r)}var It={},Xe={};Object.defineProperty(Xe,"__esModule",{value:!0});Xe.isBrowserCryptoAvailable=Xe.getSubtleCrypto=Xe.getBrowerCrypto=void 0;function ti(){return(Q===null||Q===void 0?void 0:Q.crypto)||(Q===null||Q===void 0?void 0:Q.msCrypto)||{}}Xe.getBrowerCrypto=ti;function Ls(){const e=ti();return e.subtle||e.webkitSubtle}Xe.getSubtleCrypto=Ls;function Qu(){return!!ti()&&!!Ls()}Xe.isBrowserCryptoAvailable=Qu;var et={};Object.defineProperty(et,"__esModule",{value:!0});et.isBrowser=et.isNode=et.isReactNative=void 0;function Us(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}et.isReactNative=Us;function qs(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}et.isNode=qs;function Xu(){return!Us()&&!qs()}et.isBrowser=Xu;(function(e){var t=Q&&Q.__createBinding||(Object.create?function(n,i,o,c){c===void 0&&(c=o),Object.defineProperty(n,c,{enumerable:!0,get:function(){return i[o]}})}:function(n,i,o,c){c===void 0&&(c=o),n[c]=i[o]}),r=Q&&Q.__exportStar||function(n,i){for(var o in n)o!=="default"&&!i.hasOwnProperty(o)&&t(i,n,o)};Object.defineProperty(e,"__esModule",{value:!0}),r(Xe,e),r(et,e)})(It);function el(){const e=Date.now()*Math.pow(10,3),t=Math.floor(Math.random()*Math.pow(10,3));return e+t}function er(e){return Ns(e)}function tl(e){return ju(Bt(e))}const xn=el;function rn(){return((t,r)=>{for(r=t="";t++<36;r+=t*51&52?(t^15?8^Math.random()*(t^20?16:4):4).toString(16):"-");return r})()}function rl(e,t){let r;const n=Au[e];return n&&(r=`https://${n}.infura.io/v3/${t}`),r}function nl(e,t){let r;const n=rl(e,t.infuraId);return t.custom&&t.custom[e]?r=t.custom[e]:n&&(r=n),r}function il(e){return e===""||typeof e=="string"&&e.trim()===""}function ol(e){return!(e&&e.length)}function Hs(e,t){return $u(e,t)}function sl(e){return typeof e.method<"u"}function Ot(e){return typeof e.result<"u"}function cr(e){return typeof e.error<"u"}function Yi(e){return typeof e.event<"u"}function al(e){return Tu.includes(e)||e.startsWith("wc_")}function cl(e){return e.method.startsWith("wc_")?!0:!Qn.includes(e.method)}function fl(e){e=rt(e.toLowerCase());const t=rt(_c.exports.keccak_256(Gu(e)));let r="";for(let n=0;n<e.length;n++)parseInt(t[n],16)>7?r+=e[n].toUpperCase():r+=e[n];return Bt(r)}const ul=e=>e?e.toLowerCase().substring(0,2)!=="0x"?!1:/^(0x)?[0-9a-f]{40}$/i.test(e)?/^(0x)?[0-9a-f]{40}$/.test(e)||/^(0x)?[0-9A-F]{40}$/.test(e)?!0:e===fl(e):!1:!1;function fr(e){return!ol(e)&&!Hs(e[0])&&(e[0]=Yu(e[0])),e}function nn(e){if(typeof e.type<"u"&&e.type!=="0")return e;if(typeof e.from>"u"||!ul(e.from))throw new Error("Transaction object must include a valid 'from' value.");function t(i){let o=i;return(typeof i=="number"||typeof i=="string"&&!il(i))&&(Hs(i)?typeof i=="string"&&(o=er(i)):o=Os(i)),typeof o=="string"&&(o=tl(o)),o}const r={from:er(e.from),to:typeof e.to>"u"?void 0:er(e.to),gasPrice:typeof e.gasPrice>"u"?"":t(e.gasPrice),gas:typeof e.gas>"u"?typeof e.gasLimit>"u"?"":t(e.gasLimit):t(e.gas),value:typeof e.value>"u"?"":t(e.value),nonce:typeof e.nonce>"u"?"":t(e.nonce),data:typeof e.data>"u"?"":er(e.data)||"0x"},n=["gasPrice","gas","value","nonce"];return Object.keys(r).forEach(i=>{(typeof r[i]>"u"||typeof r[i]=="string"&&!r[i].trim().length)&&n.includes(i)&&delete r[i]}),r}function ll(e){const t=e.message||"Failed or Rejected Request";let r=-32e3;if(e&&!e.code)switch(t){case"Parse error":r=-32700;break;case"Invalid request":r=-32600;break;case"Method not found":r=-32601;break;case"Invalid params":r=-32602;break;case"Internal error":r=-32603;break;default:r=-32e3;break}const n={code:r,message:t};return e.data&&(n.data=e.data),n}var ri={},hl=e=>encodeURIComponent(e).replace(/[!'()*]/g,t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`),Ds="%[a-f0-9]{2}",Zi=new RegExp(Ds,"gi"),Qi=new RegExp("("+Ds+")+","gi");function Mn(e,t){try{return decodeURIComponent(e.join(""))}catch{}if(e.length===1)return e;t=t||1;var r=e.slice(0,t),n=e.slice(t);return Array.prototype.concat.call([],Mn(r),Mn(n))}function dl(e){try{return decodeURIComponent(e)}catch{for(var t=e.match(Zi),r=1;r<t.length;r++)e=Mn(t,r).join(""),t=e.match(Zi);return e}}function pl(e){for(var t={"%FE%FF":"\uFFFD\uFFFD","%FF%FE":"\uFFFD\uFFFD"},r=Qi.exec(e);r;){try{t[r[0]]=decodeURIComponent(r[0])}catch{var n=dl(r[0]);n!==r[0]&&(t[r[0]]=n)}r=Qi.exec(e)}t["%C2"]="\uFFFD";for(var i=Object.keys(t),o=0;o<i.length;o++){var c=i[o];e=e.replace(new RegExp(c,"g"),t[c])}return e}var gl=function(e){if(typeof e!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch{return pl(e)}},_l=(e,t)=>{if(!(typeof e=="string"&&typeof t=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(t==="")return[e];const r=e.indexOf(t);return r===-1?[e]:[e.slice(0,r),e.slice(r+t.length)]};(function(e){const t=hl,r=gl,n=_l,i=b=>b==null;function o(b){switch(b.arrayFormat){case"index":return M=>(C,E)=>{const A=C.length;return E===void 0||b.skipNull&&E===null||b.skipEmptyString&&E===""?C:E===null?[...C,[l(M,b),"[",A,"]"].join("")]:[...C,[l(M,b),"[",l(A,b),"]=",l(E,b)].join("")]};case"bracket":return M=>(C,E)=>E===void 0||b.skipNull&&E===null||b.skipEmptyString&&E===""?C:E===null?[...C,[l(M,b),"[]"].join("")]:[...C,[l(M,b),"[]=",l(E,b)].join("")];case"comma":case"separator":return M=>(C,E)=>E==null||E.length===0?C:C.length===0?[[l(M,b),"=",l(E,b)].join("")]:[[C,l(E,b)].join(b.arrayFormatSeparator)];default:return M=>(C,E)=>E===void 0||b.skipNull&&E===null||b.skipEmptyString&&E===""?C:E===null?[...C,l(M,b)]:[...C,[l(M,b),"=",l(E,b)].join("")]}}function c(b){let M;switch(b.arrayFormat){case"index":return(C,E,A)=>{if(M=/\[(\d*)\]$/.exec(C),C=C.replace(/\[\d*\]$/,""),!M){A[C]=E;return}A[C]===void 0&&(A[C]={}),A[C][M[1]]=E};case"bracket":return(C,E,A)=>{if(M=/(\[\])$/.exec(C),C=C.replace(/\[\]$/,""),!M){A[C]=E;return}if(A[C]===void 0){A[C]=[E];return}A[C]=[].concat(A[C],E)};case"comma":case"separator":return(C,E,A)=>{const N=typeof E=="string"&&E.split("").indexOf(b.arrayFormatSeparator)>-1?E.split(b.arrayFormatSeparator).map(D=>p(D,b)):E===null?E:p(E,b);A[C]=N};default:return(C,E,A)=>{if(A[C]===void 0){A[C]=E;return}A[C]=[].concat(A[C],E)}}}function f(b){if(typeof b!="string"||b.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function l(b,M){return M.encode?M.strict?t(b):encodeURIComponent(b):b}function p(b,M){return M.decode?r(b):b}function d(b){return Array.isArray(b)?b.sort():typeof b=="object"?d(Object.keys(b)).sort((M,C)=>Number(M)-Number(C)).map(M=>b[M]):b}function y(b){const M=b.indexOf("#");return M!==-1&&(b=b.slice(0,M)),b}function k(b){let M="";const C=b.indexOf("#");return C!==-1&&(M=b.slice(C)),M}function R(b){b=y(b);const M=b.indexOf("?");return M===-1?"":b.slice(M+1)}function T(b,M){return M.parseNumbers&&!Number.isNaN(Number(b))&&typeof b=="string"&&b.trim()!==""?b=Number(b):M.parseBooleans&&b!==null&&(b.toLowerCase()==="true"||b.toLowerCase()==="false")&&(b=b.toLowerCase()==="true"),b}function B(b,M){M=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},M),f(M.arrayFormatSeparator);const C=c(M),E=Object.create(null);if(typeof b!="string"||(b=b.trim().replace(/^[?#&]/,""),!b))return E;for(const A of b.split("&")){let[P,N]=n(M.decode?A.replace(/\+/g," "):A,"=");N=N===void 0?null:["comma","separator"].includes(M.arrayFormat)?N:p(N,M),C(p(P,M),N,E)}for(const A of Object.keys(E)){const P=E[A];if(typeof P=="object"&&P!==null)for(const N of Object.keys(P))P[N]=T(P[N],M);else E[A]=T(P,M)}return M.sort===!1?E:(M.sort===!0?Object.keys(E).sort():Object.keys(E).sort(M.sort)).reduce((A,P)=>{const N=E[P];return Boolean(N)&&typeof N=="object"&&!Array.isArray(N)?A[P]=d(N):A[P]=N,A},Object.create(null))}e.extract=R,e.parse=B,e.stringify=(b,M)=>{if(!b)return"";M=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},M),f(M.arrayFormatSeparator);const C=N=>M.skipNull&&i(b[N])||M.skipEmptyString&&b[N]==="",E=o(M),A={};for(const N of Object.keys(b))C(N)||(A[N]=b[N]);const P=Object.keys(A);return M.sort!==!1&&P.sort(M.sort),P.map(N=>{const D=b[N];return D===void 0?"":D===null?l(N,M):Array.isArray(D)?D.reduce(E(N),[]).join("&"):l(N,M)+"="+l(D,M)}).filter(N=>N.length>0).join("&")},e.parseUrl=(b,M)=>{M=Object.assign({decode:!0},M);const[C,E]=n(b,"#");return Object.assign({url:C.split("?")[0]||"",query:B(R(b),M)},M&&M.parseFragmentIdentifier&&E?{fragmentIdentifier:p(E,M)}:{})},e.stringifyUrl=(b,M)=>{M=Object.assign({encode:!0,strict:!0},M);const C=y(b.url).split("?")[0]||"",E=e.extract(b.url),A=e.parse(E,{sort:!1}),P=Object.assign(A,b.query);let N=e.stringify(P,M);N&&(N=`?${N}`);let D=k(b.url);return b.fragmentIdentifier&&(D=`#${l(b.fragmentIdentifier,M)}`),`${C}${N}${D}`}})(ri);function vl(e){const t=e.indexOf("?")!==-1?e.indexOf("?"):void 0;return typeof t<"u"?e.substr(t):""}function ml(e,t){let r=$s(e);return r=Object.assign(Object.assign({},r),t),e=wl(r),e}function $s(e){return ri.parse(e)}function wl(e){return ri.stringify(e)}function yl(e){return typeof e.bridge<"u"}function bl(e){const t=e.indexOf(":"),r=e.indexOf("?")!==-1?e.indexOf("?"):void 0,n=e.substring(0,t),i=e.substring(t+1,r);function o(y){const k="@",R=y.split(k);return{handshakeTopic:R[0],version:parseInt(R[1],10)}}const c=o(i),f=typeof r<"u"?e.substr(r):"";function l(y){const k=$s(y);return{key:k.key||"",bridge:k.bridge||""}}const p=l(f);return Object.assign(Object.assign({protocol:n},c),p)}var on,Xi;function xl(){return Xi||(Xi=1,on=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}),on}class Ml{constructor(){this._eventEmitters=[],typeof window<"u"&&typeof window.addEventListener<"u"&&(window.addEventListener("online",()=>this.trigger("online")),window.addEventListener("offline",()=>this.trigger("offline")))}on(t,r){this._eventEmitters.push({event:t,callback:r})}trigger(t){let r=[];t&&(r=this._eventEmitters.filter(n=>n.event===t)),r.forEach(n=>{n.callback()})}}const El=typeof global.WebSocket<"u"?global.WebSocket:xl();class Sl{constructor(t){if(this.opts=t,this._queue=[],this._events=[],this._subscriptions=[],this._protocol=t.protocol,this._version=t.version,this._url="",this._netMonitor=null,this._socket=null,this._nextSocket=null,this._subscriptions=t.subscriptions||[],this._netMonitor=t.netMonitor||new Ml,!t.url||typeof t.url!="string")throw new Error("Missing or invalid WebSocket url");this._url=t.url,this._netMonitor.on("online",()=>this._socketCreate())}set readyState(t){}get readyState(){return this._socket?this._socket.readyState:-1}set connecting(t){}get connecting(){return this.readyState===0}set connected(t){}get connected(){return this.readyState===1}set closing(t){}get closing(){return this.readyState===2}set closed(t){}get closed(){return this.readyState===3}open(){this._socketCreate()}close(){this._socketClose()}send(t,r,n){if(!r||typeof r!="string")throw new Error("Missing or invalid topic field");this._socketSend({topic:r,type:"pub",payload:t,silent:!!n})}subscribe(t){this._socketSend({topic:t,type:"sub",payload:"",silent:!0})}on(t,r){this._events.push({event:t,callback:r})}_socketCreate(){if(this._nextSocket)return;const t=kl(this._url,this._protocol,this._version);if(this._nextSocket=new El(t),!this._nextSocket)throw new Error("Failed to create socket");this._nextSocket.onmessage=r=>this._socketReceive(r),this._nextSocket.onopen=()=>this._socketOpen(),this._nextSocket.onerror=r=>this._socketError(r),this._nextSocket.onclose=()=>{setTimeout(()=>{this._nextSocket=null,this._socketCreate()},1e3)}}_socketOpen(){this._socketClose(),this._socket=this._nextSocket,this._nextSocket=null,this._queueSubscriptions(),this._pushQueue()}_socketClose(){this._socket&&(this._socket.onclose=()=>{},this._socket.close())}_socketSend(t){const r=JSON.stringify(t);this._socket&&this._socket.readyState===1?this._socket.send(r):(this._setToQueue(t),this._socketCreate())}async _socketReceive(t){let r;try{r=JSON.parse(t.data)}catch{return}if(this._socketSend({topic:r.topic,type:"ack",payload:"",silent:!0}),this._socket&&this._socket.readyState===1){const n=this._events.filter(i=>i.event==="message");n&&n.length&&n.forEach(i=>i.callback(r))}}_socketError(t){const r=this._events.filter(n=>n.event==="error");r&&r.length&&r.forEach(n=>n.callback(t))}_queueSubscriptions(){this._subscriptions.forEach(r=>this._queue.push({topic:r,type:"sub",payload:"",silent:!0})),this._subscriptions=this.opts.subscriptions||[]}_setToQueue(t){this._queue.push(t)}_pushQueue(){this._queue.forEach(r=>this._socketSend(r)),this._queue=[]}}function kl(e,t,r){var n,i;const c=(e.startsWith("https")?e.replace("https","wss"):e.startsWith("http")?e.replace("http","ws"):e).split("?"),f=ms()?{protocol:t,version:r,env:"browser",host:((n=bs())===null||n===void 0?void 0:n.host)||""}:{protocol:t,version:r,env:((i=br())===null||i===void 0?void 0:i.name)||""},l=ml(vl(c[1]||""),f);return c[0]+"?"+l}const sn="Session currently connected",st="Session currently disconnected",Cl="Session Rejected",Tl="Missing JSON RPC response",Al='JSON-RPC success response must include "result" field',Rl='JSON-RPC error response must include "error" field',Bl='JSON RPC request must have valid "method" value',Il='JSON RPC request must have valid "id" value',Pl="Missing one of the required parameters: bridge / uri / session",eo="JSON RPC response format is invalid",Nl="URI format is invalid",Ol="QRCode Modal not provided",to="User close QRCode Modal";class Ll{constructor(){this._eventEmitters=[]}subscribe(t){this._eventEmitters.push(t)}unsubscribe(t){this._eventEmitters=this._eventEmitters.filter(r=>r.event!==t)}trigger(t){let r=[],n;sl(t)?n=t.method:Ot(t)||cr(t)?n=`response:${t.id}`:Yi(t)?n=t.event:n="",n&&(r=this._eventEmitters.filter(i=>i.event===n)),(!r||!r.length)&&!al(n)&&!Yi(n)&&(r=this._eventEmitters.filter(i=>i.event==="call_request")),r.forEach(i=>{if(cr(t)){const o=new Error(t.error.message);i.callback(o,null)}else i.callback(null,t)})}}class Ul{constructor(t="walletconnect"){this.storageId=t}getSession(){let t=null;const r=Yn(this.storageId);return r&&yl(r)&&(t=r),t}setSession(t){return Gn(this.storageId,t),t}removeSession(){Zn(this.storageId)}}const ql="walletconnect.org",Hl="abcdefghijklmnopqrstuvwxyz0123456789",Fs=Hl.split("").map(e=>`https://${e}.bridge.walletconnect.org`);function Dl(e){let t=e.indexOf("//")>-1?e.split("/")[2]:e.split("/")[0];return t=t.split(":")[0],t=t.split("?")[0],t}function $l(e){return Dl(e).split(".").slice(-2).join(".")}function Fl(){return Math.floor(Math.random()*Fs.length)}function Wl(){return Fs[Fl()]}function zl(e){return $l(e)===ql}function jl(e){return zl(e)?Wl():e}class Kl{constructor(t){if(this.protocol="wc",this.version=1,this._bridge="",this._key=null,this._clientId="",this._clientMeta=null,this._peerId="",this._peerMeta=null,this._handshakeId=0,this._handshakeTopic="",this._connected=!1,this._accounts=[],this._chainId=0,this._networkId=0,this._rpcUrl="",this._eventManager=new Ll,this._clientMeta=yn()||t.connectorOpts.clientMeta||null,this._cryptoLib=t.cryptoLib,this._sessionStorage=t.sessionStorage||new Ul(t.connectorOpts.storageId),this._qrcodeModal=t.connectorOpts.qrcodeModal,this._qrcodeModalOptions=t.connectorOpts.qrcodeModalOptions,this._signingMethods=[...Qn,...t.connectorOpts.signingMethods||[]],!t.connectorOpts.bridge&&!t.connectorOpts.uri&&!t.connectorOpts.session)throw new Error(Pl);t.connectorOpts.bridge&&(this.bridge=jl(t.connectorOpts.bridge)),t.connectorOpts.uri&&(this.uri=t.connectorOpts.uri);const r=t.connectorOpts.session||this._getStorageSession();r&&(this.session=r),this.handshakeId&&this._subscribeToSessionResponse(this.handshakeId,"Session request rejected"),this._transport=t.transport||new Sl({protocol:this.protocol,version:this.version,url:this.bridge,subscriptions:[this.clientId]}),this._subscribeToInternalEvents(),this._initTransport(),t.connectorOpts.uri&&this._subscribeToSessionRequest(),t.pushServerOpts&&this._registerPushServer(t.pushServerOpts)}set bridge(t){!t||(this._bridge=t)}get bridge(){return this._bridge}set key(t){if(!t)return;const r=Zu(t);this._key=r}get key(){return this._key?Vu(this._key,!0):""}set clientId(t){!t||(this._clientId=t)}get clientId(){let t=this._clientId;return t||(t=this._clientId=rn()),this._clientId}set peerId(t){!t||(this._peerId=t)}get peerId(){return this._peerId}set clientMeta(t){}get clientMeta(){let t=this._clientMeta;return t||(t=this._clientMeta=yn()),t}set peerMeta(t){this._peerMeta=t}get peerMeta(){return this._peerMeta}set handshakeTopic(t){!t||(this._handshakeTopic=t)}get handshakeTopic(){return this._handshakeTopic}set handshakeId(t){!t||(this._handshakeId=t)}get handshakeId(){return this._handshakeId}get uri(){return this._formatUri()}set uri(t){if(!t)return;const{handshakeTopic:r,bridge:n,key:i}=this._parseUri(t);this.handshakeTopic=r,this.bridge=n,this.key=i}set chainId(t){this._chainId=t}get chainId(){return this._chainId}set networkId(t){this._networkId=t}get networkId(){return this._networkId}set accounts(t){this._accounts=t}get accounts(){return this._accounts}set rpcUrl(t){this._rpcUrl=t}get rpcUrl(){return this._rpcUrl}set connected(t){}get connected(){return this._connected}set pending(t){}get pending(){return!!this._handshakeTopic}get session(){return{connected:this.connected,accounts:this.accounts,chainId:this.chainId,bridge:this.bridge,key:this.key,clientId:this.clientId,clientMeta:this.clientMeta,peerId:this.peerId,peerMeta:this.peerMeta,handshakeId:this.handshakeId,handshakeTopic:this.handshakeTopic}}set session(t){!t||(this._connected=t.connected,this.accounts=t.accounts,this.chainId=t.chainId,this.bridge=t.bridge,this.key=t.key,this.clientId=t.clientId,this.clientMeta=t.clientMeta,this.peerId=t.peerId,this.peerMeta=t.peerMeta,this.handshakeId=t.handshakeId,this.handshakeTopic=t.handshakeTopic)}on(t,r){const n={event:t,callback:r};this._eventManager.subscribe(n)}off(t){this._eventManager.unsubscribe(t)}async createInstantRequest(t){this._key=await this._generateKey();const r=this._formatRequest({method:"wc_instantRequest",params:[{peerId:this.clientId,peerMeta:this.clientMeta,request:this._formatRequest(t)}]});this.handshakeId=r.id,this.handshakeTopic=rn(),this._eventManager.trigger({event:"display_uri",params:[this.uri]}),this.on("modal_closed",()=>{throw new Error(to)});const n=()=>{this.killSession()};try{const i=await this._sendCallRequest(r);return i&&n(),i}catch(i){throw n(),i}}async connect(t){if(!this._qrcodeModal)throw new Error(Ol);return this.connected?{chainId:this.chainId,accounts:this.accounts}:(await this.createSession(t),new Promise(async(r,n)=>{this.on("modal_closed",()=>n(new Error(to))),this.on("connect",(i,o)=>{if(i)return n(i);r(o.params[0])})}))}async createSession(t){if(this._connected)throw new Error(sn);if(this.pending)return;this._key=await this._generateKey();const r=this._formatRequest({method:"wc_sessionRequest",params:[{peerId:this.clientId,peerMeta:this.clientMeta,chainId:t&&t.chainId?t.chainId:null}]});this.handshakeId=r.id,this.handshakeTopic=rn(),this._sendSessionRequest(r,"Session update rejected",{topic:this.handshakeTopic}),this._eventManager.trigger({event:"display_uri",params:[this.uri]})}approveSession(t){if(this._connected)throw new Error(sn);this.chainId=t.chainId,this.accounts=t.accounts,this.networkId=t.networkId||0,this.rpcUrl=t.rpcUrl||"";const r={approved:!0,chainId:this.chainId,networkId:this.networkId,accounts:this.accounts,rpcUrl:this.rpcUrl,peerId:this.clientId,peerMeta:this.clientMeta},n={id:this.handshakeId,jsonrpc:"2.0",result:r};this._sendResponse(n),this._connected=!0,this._setStorageSession(),this._eventManager.trigger({event:"connect",params:[{peerId:this.peerId,peerMeta:this.peerMeta,chainId:this.chainId,accounts:this.accounts}]})}rejectSession(t){if(this._connected)throw new Error(sn);const r=t&&t.message?t.message:Cl,n=this._formatResponse({id:this.handshakeId,error:{message:r}});this._sendResponse(n),this._connected=!1,this._eventManager.trigger({event:"disconnect",params:[{message:r}]}),this._removeStorageSession()}updateSession(t){if(!this._connected)throw new Error(st);this.chainId=t.chainId,this.accounts=t.accounts,this.networkId=t.networkId||0,this.rpcUrl=t.rpcUrl||"";const r={approved:!0,chainId:this.chainId,networkId:this.networkId,accounts:this.accounts,rpcUrl:this.rpcUrl},n=this._formatRequest({method:"wc_sessionUpdate",params:[r]});this._sendSessionRequest(n,"Session update rejected"),this._eventManager.trigger({event:"session_update",params:[{chainId:this.chainId,accounts:this.accounts}]}),this._manageStorageSession()}async killSession(t){const r=t?t.message:"Session Disconnected",n={approved:!1,chainId:null,networkId:null,accounts:null},i=this._formatRequest({method:"wc_sessionUpdate",params:[n]});await this._sendRequest(i),this._handleSessionDisconnect(r)}async sendTransaction(t){if(!this._connected)throw new Error(st);const r=nn(t),n=this._formatRequest({method:"eth_sendTransaction",params:[r]});return await this._sendCallRequest(n)}async signTransaction(t){if(!this._connected)throw new Error(st);const r=nn(t),n=this._formatRequest({method:"eth_signTransaction",params:[r]});return await this._sendCallRequest(n)}async signMessage(t){if(!this._connected)throw new Error(st);const r=this._formatRequest({method:"eth_sign",params:t});return await this._sendCallRequest(r)}async signPersonalMessage(t){if(!this._connected)throw new Error(st);t=fr(t);const r=this._formatRequest({method:"personal_sign",params:t});return await this._sendCallRequest(r)}async signTypedData(t){if(!this._connected)throw new Error(st);const r=this._formatRequest({method:"eth_signTypedData",params:t});return await this._sendCallRequest(r)}async updateChain(t){if(!this._connected)throw new Error("Session currently disconnected");const r=this._formatRequest({method:"wallet_updateChain",params:[t]});return await this._sendCallRequest(r)}unsafeSend(t,r){return this._sendRequest(t,r),this._eventManager.trigger({event:"call_request_sent",params:[{request:t,options:r}]}),new Promise((n,i)=>{this._subscribeToResponse(t.id,(o,c)=>{if(o){i(o);return}if(!c)throw new Error(Tl);n(c)})})}async sendCustomRequest(t,r){if(!this._connected)throw new Error(st);switch(t.method){case"eth_accounts":return this.accounts;case"eth_chainId":return Os(this.chainId);case"eth_sendTransaction":case"eth_signTransaction":t.params&&(t.params[0]=nn(t.params[0]));break;case"personal_sign":t.params&&(t.params=fr(t.params));break}const n=this._formatRequest(t);return await this._sendCallRequest(n,r)}approveRequest(t){if(Ot(t)){const r=this._formatResponse(t);this._sendResponse(r)}else throw new Error(Al)}rejectRequest(t){if(cr(t)){const r=this._formatResponse(t);this._sendResponse(r)}else throw new Error(Rl)}transportClose(){this._transport.close()}async _sendRequest(t,r){const n=this._formatRequest(t),i=await this._encrypt(n),o=typeof(r==null?void 0:r.topic)<"u"?r.topic:this.peerId,c=JSON.stringify(i),f=typeof(r==null?void 0:r.forcePushNotification)<"u"?!r.forcePushNotification:cl(n);this._transport.send(c,o,f)}async _sendResponse(t){const r=await this._encrypt(t),n=this.peerId,i=JSON.stringify(r),o=!0;this._transport.send(i,n,o)}async _sendSessionRequest(t,r,n){this._sendRequest(t,n),this._subscribeToSessionResponse(t.id,r)}_sendCallRequest(t,r){return this._sendRequest(t,r),this._eventManager.trigger({event:"call_request_sent",params:[{request:t,options:r}]}),this._subscribeToCallResponse(t.id)}_formatRequest(t){if(typeof t.method>"u")throw new Error(Bl);return{id:typeof t.id>"u"?xn():t.id,jsonrpc:"2.0",method:t.method,params:typeof t.params>"u"?[]:t.params}}_formatResponse(t){if(typeof t.id>"u")throw new Error(Il);const r={id:t.id,jsonrpc:"2.0"};if(cr(t)){const n=ll(t.error);return Object.assign(Object.assign(Object.assign({},r),t),{error:n})}else if(Ot(t))return Object.assign(Object.assign({},r),t);throw new Error(eo)}_handleSessionDisconnect(t){const r=t||"Session Disconnected";this._connected||(this._qrcodeModal&&this._qrcodeModal.close(),Zn(ar)),this._connected&&(this._connected=!1),this._handshakeId&&(this._handshakeId=0),this._handshakeTopic&&(this._handshakeTopic=""),this._peerId&&(this._peerId=""),this._eventManager.trigger({event:"disconnect",params:[{message:r}]}),this._removeStorageSession(),this.transportClose()}_handleSessionResponse(t,r){r?r.approved?(this._connected?(r.chainId&&(this.chainId=r.chainId),r.accounts&&(this.accounts=r.accounts),this._eventManager.trigger({event:"session_update",params:[{chainId:this.chainId,accounts:this.accounts}]})):(this._connected=!0,r.chainId&&(this.chainId=r.chainId),r.accounts&&(this.accounts=r.accounts),r.peerId&&!this.peerId&&(this.peerId=r.peerId),r.peerMeta&&!this.peerMeta&&(this.peerMeta=r.peerMeta),this._eventManager.trigger({event:"connect",params:[{peerId:this.peerId,peerMeta:this.peerMeta,chainId:this.chainId,accounts:this.accounts}]})),this._manageStorageSession()):this._handleSessionDisconnect(t):this._handleSessionDisconnect(t)}async _handleIncomingMessages(t){if(![this.clientId,this.handshakeTopic].includes(t.topic))return;let n;try{n=JSON.parse(t.payload)}catch{return}const i=await this._decrypt(n);i&&this._eventManager.trigger(i)}_subscribeToSessionRequest(){this._transport.subscribe(this.handshakeTopic)}_subscribeToResponse(t,r){this.on(`response:${t}`,r)}_subscribeToSessionResponse(t,r){this._subscribeToResponse(t,(n,i)=>{if(n){this._handleSessionResponse(n.message);return}Ot(i)?this._handleSessionResponse(r,i.result):i.error&&i.error.message?this._handleSessionResponse(i.error.message):this._handleSessionResponse(r)})}_subscribeToCallResponse(t){return new Promise((r,n)=>{this._subscribeToResponse(t,(i,o)=>{if(i){n(i);return}Ot(o)?r(o.result):o.error&&o.error.message?n(o.error):n(new Error(eo))})})}_subscribeToInternalEvents(){this.on("display_uri",()=>{this._qrcodeModal&&this._qrcodeModal.open(this.uri,()=>{this._eventManager.trigger({event:"modal_closed",params:[]})},this._qrcodeModalOptions)}),this.on("connect",()=>{this._qrcodeModal&&this._qrcodeModal.close()}),this.on("call_request_sent",(t,r)=>{const{request:n}=r.params[0];if(_s()&&this._signingMethods.includes(n.method)){const i=Yn(ar);i&&(window.location.href=i.href)}}),this.on("wc_sessionRequest",(t,r)=>{t&&this._eventManager.trigger({event:"error",params:[{code:"SESSION_REQUEST_ERROR",message:t.toString()}]}),this.handshakeId=r.id,this.peerId=r.params[0].peerId,this.peerMeta=r.params[0].peerMeta;const n=Object.assign(Object.assign({},r),{method:"session_request"});this._eventManager.trigger(n)}),this.on("wc_sessionUpdate",(t,r)=>{t&&this._handleSessionResponse(t.message),this._handleSessionResponse("Session disconnected",r.params[0])})}_initTransport(){this._transport.on("message",t=>this._handleIncomingMessages(t)),this._transport.on("open",()=>this._eventManager.trigger({event:"transport_open",params:[]})),this._transport.on("close",()=>this._eventManager.trigger({event:"transport_close",params:[]})),this._transport.on("error",()=>this._eventManager.trigger({event:"transport_error",params:["Websocket connection failed"]})),this._transport.open()}_formatUri(){const t=this.protocol,r=this.handshakeTopic,n=this.version,i=encodeURIComponent(this.bridge),o=this.key;return`${t}:${r}@${n}?bridge=${i}&key=${o}`}_parseUri(t){const r=bl(t);if(r.protocol===this.protocol){if(!r.handshakeTopic)throw Error("Invalid or missing handshakeTopic parameter value");const n=r.handshakeTopic;if(!r.bridge)throw Error("Invalid or missing bridge url parameter value");const i=decodeURIComponent(r.bridge);if(!r.key)throw Error("Invalid or missing key parameter value");const o=r.key;return{handshakeTopic:n,bridge:i,key:o}}else throw new Error(Nl)}async _generateKey(){return this._cryptoLib?await this._cryptoLib.generateKey():null}async _encrypt(t){const r=this._key;return this._cryptoLib&&r?await this._cryptoLib.encrypt(t,r):null}async _decrypt(t){const r=this._key;return this._cryptoLib&&r?await this._cryptoLib.decrypt(t,r):null}_getStorageSession(){let t=null;return this._sessionStorage&&(t=this._sessionStorage.getSession()),t}_setStorageSession(){this._sessionStorage&&this._sessionStorage.setSession(this.session)}_removeStorageSession(){this._sessionStorage&&this._sessionStorage.removeSession()}_manageStorageSession(){this._connected?this._setStorageSession():this._removeStorageSession()}_registerPushServer(t){if(!t.url||typeof t.url!="string")throw Error("Invalid or missing pushServerOpts.url parameter value");if(!t.type||typeof t.type!="string")throw Error("Invalid or missing pushServerOpts.type parameter value");if(!t.token||typeof t.token!="string")throw Error("Invalid or missing pushServerOpts.token parameter value");const r={bridge:this.bridge,topic:this.clientId,type:t.type,token:t.token,peerName:"",language:t.language||""};this.on("connect",async(n,i)=>{if(n)throw n;if(t.peerMeta){const o=i.params[0].peerMeta.name;r.peerName=o}try{if(!(await(await fetch(`${t.url}/new`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(r)})).json()).success)throw Error("Failed to register in Push Server")}catch{throw Error("Failed to register in Push Server")}})}}function Vl(e){return It.getBrowerCrypto().getRandomValues(new Uint8Array(e))}const Ws=256,zs=Ws,Jl=Ws,nt="AES-CBC",Gl=`SHA-${zs}`,En="HMAC",Yl="encrypt",Zl="decrypt",Ql="sign",Xl="verify";function eh(e){return e===nt?{length:zs,name:nt}:{hash:{name:Gl},name:En}}function th(e){return e===nt?[Yl,Zl]:[Ql,Xl]}async function ni(e,t=nt){return It.getSubtleCrypto().importKey("raw",e,eh(t),!0,th(t))}async function rh(e,t,r){const n=It.getSubtleCrypto(),i=await ni(t,nt),o=await n.encrypt({iv:e,name:nt},i,r);return new Uint8Array(o)}async function nh(e,t,r){const n=It.getSubtleCrypto(),i=await ni(t,nt),o=await n.decrypt({iv:e,name:nt},i,r);return new Uint8Array(o)}async function ih(e,t){const r=It.getSubtleCrypto(),n=await ni(e,En),i=await r.sign({length:Jl,name:En},n,t);return new Uint8Array(i)}function oh(e,t,r){return rh(e,t,r)}function sh(e,t,r){return nh(e,t,r)}async function js(e,t){return await ih(e,t)}async function Ks(e){const t=(e||256)/8,r=Vl(t);return Ju(Sr(r))}async function Vs(e,t){const r=mt(e.data),n=mt(e.iv),i=mt(e.hmac),o=vt(i,!1),c=Ps(r,n),f=await js(t,c),l=vt(f,!1);return rt(o)===rt(l)}async function ah(e,t,r){const n=yt(bn(t)),i=r||await Ks(128),o=yt(bn(i)),c=vt(o,!1),f=JSON.stringify(e),l=Hu(f),p=await oh(o,n,l),d=vt(p,!1),y=Ps(p,o),k=await js(n,y),R=vt(k,!1);return{data:d,hmac:R,iv:c}}async function ch(e,t){const r=yt(bn(t));if(!r)throw new Error("Missing key: required for decryption");if(!await Vs(e,r))return null;const i=mt(e.data),o=mt(e.iv),c=await sh(o,r,i),f=Uu(c);let l;try{l=JSON.parse(f)}catch{return null}return l}const fh=Object.freeze(Object.defineProperty({__proto__:null,generateKey:Ks,verifyHmac:Vs,encrypt:ah,decrypt:ch},Symbol.toStringTag,{value:"Module"}));class uh extends Kl{constructor(t,r){super({cryptoLib:fh,connectorOpts:t,pushServerOpts:r})}}const lh=qo(Cu);var Vt={},hh=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},Js={},it={},dh={}.toString,ii=Array.isArray||function(e){return dh.call(e)=="[object Array]"},ph=ii;function gh(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},e.foo()===42}catch{return!1}}F.TYPED_ARRAY_SUPPORT=gh();var ro=F.TYPED_ARRAY_SUPPORT?2147483647:1073741823;function F(e,t,r){return!F.TYPED_ARRAY_SUPPORT&&!(this instanceof F)?new F(e,t,r):typeof e=="number"?Gs(this,e):xh(this,e,t,r)}F.TYPED_ARRAY_SUPPORT&&(F.prototype.__proto__=Uint8Array.prototype,F.__proto__=Uint8Array,typeof Symbol<"u"&&Symbol.species&&F[Symbol.species]===F&&Object.defineProperty(F,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}));function oi(e){if(e>=ro)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+ro.toString(16)+" bytes");return e|0}function _h(e){return e!==e}function bt(e,t){var r;return F.TYPED_ARRAY_SUPPORT?(r=new Uint8Array(t),r.__proto__=F.prototype):(r=e,r===null&&(r=new F(t)),r.length=t),r}function Gs(e,t){var r=bt(e,t<0?0:oi(t)|0);if(!F.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)r[n]=0;return r}function vh(e,t){var r=Zs(t)|0,n=bt(e,r),i=n.write(t);return i!==r&&(n=n.slice(0,i)),n}function Sn(e,t){for(var r=t.length<0?0:oi(t.length)|0,n=bt(e,r),i=0;i<r;i+=1)n[i]=t[i]&255;return n}function mh(e,t,r,n){if(r<0||t.byteLength<r)throw new RangeError("'offset' is out of bounds");if(t.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");var i;return r===void 0&&n===void 0?i=new Uint8Array(t):n===void 0?i=new Uint8Array(t,r):i=new Uint8Array(t,r,n),F.TYPED_ARRAY_SUPPORT?i.__proto__=F.prototype:i=Sn(e,i),i}function wh(e,t){if(F.isBuffer(t)){var r=oi(t.length)|0,n=bt(e,r);return n.length===0||t.copy(n,0,0,r),n}if(t){if(typeof ArrayBuffer<"u"&&t.buffer instanceof ArrayBuffer||"length"in t)return typeof t.length!="number"||_h(t.length)?bt(e,0):Sn(e,t);if(t.type==="Buffer"&&Array.isArray(t.data))return Sn(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function Ys(e,t){t=t||1/0;for(var r,n=e.length,i=null,o=[],c=0;c<n;++c){if(r=e.charCodeAt(c),r>55295&&r<57344){if(!i){if(r>56319){(t-=3)>-1&&o.push(239,191,189);continue}else if(c+1===n){(t-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&o.push(239,191,189),i=r;continue}r=(i-55296<<10|r-56320)+65536}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;o.push(r)}else if(r<2048){if((t-=2)<0)break;o.push(r>>6|192,r&63|128)}else if(r<65536){if((t-=3)<0)break;o.push(r>>12|224,r>>6&63|128,r&63|128)}else if(r<1114112){if((t-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,r&63|128)}else throw new Error("Invalid code point")}return o}function Zs(e){if(F.isBuffer(e))return e.length;if(typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;typeof e!="string"&&(e=""+e);var t=e.length;return t===0?0:Ys(e).length}function yh(e,t,r,n){for(var i=0;i<n&&!(i+r>=t.length||i>=e.length);++i)t[i+r]=e[i];return i}function bh(e,t,r,n){return yh(Ys(t,e.length-r),e,r,n)}function xh(e,t,r,n){if(typeof t=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer?mh(e,t,r,n):typeof t=="string"?vh(e,t):wh(e,t)}F.prototype.write=function(t,r,n){r===void 0?(n=this.length,r=0):n===void 0&&typeof r=="string"?(n=this.length,r=0):isFinite(r)&&(r=r|0,isFinite(n)?n=n|0:n=void 0);var i=this.length-r;if((n===void 0||n>i)&&(n=i),t.length>0&&(n<0||r<0)||r>this.length)throw new RangeError("Attempt to write outside buffer bounds");return bh(this,t,r,n)};F.prototype.slice=function(t,r){var n=this.length;t=~~t,r=r===void 0?n:~~r,t<0?(t+=n,t<0&&(t=0)):t>n&&(t=n),r<0?(r+=n,r<0&&(r=0)):r>n&&(r=n),r<t&&(r=t);var i;if(F.TYPED_ARRAY_SUPPORT)i=this.subarray(t,r),i.__proto__=F.prototype;else{var o=r-t;i=new F(o,void 0);for(var c=0;c<o;++c)i[c]=this[c+t]}return i};F.prototype.copy=function(t,r,n,i){if(n||(n=0),!i&&i!==0&&(i=this.length),r>=t.length&&(r=t.length),r||(r=0),i>0&&i<n&&(i=n),i===n||t.length===0||this.length===0)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),t.length-r<i-n&&(i=t.length-r+n);var o=i-n,c;if(this===t&&n<r&&r<i)for(c=o-1;c>=0;--c)t[c+r]=this[c+n];else if(o<1e3||!F.TYPED_ARRAY_SUPPORT)for(c=0;c<o;++c)t[c+r]=this[c+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+o),r);return o};F.prototype.fill=function(t,r,n){if(typeof t=="string"){if(typeof r=="string"?(r=0,n=this.length):typeof n=="string"&&(n=this.length),t.length===1){var i=t.charCodeAt(0);i<256&&(t=i)}}else typeof t=="number"&&(t=t&255);if(r<0||this.length<r||this.length<n)throw new RangeError("Out of range index");if(n<=r)return this;r=r>>>0,n=n===void 0?this.length:n>>>0,t||(t=0);var o;if(typeof t=="number")for(o=r;o<n;++o)this[o]=t;else{var c=F.isBuffer(t)?t:new F(t),f=c.length;for(o=0;o<n-r;++o)this[o+r]=c[o%f]}return this};F.concat=function(t,r){if(!ph(t))throw new TypeError('"list" argument must be an Array of Buffers');if(t.length===0)return bt(null,0);var n;if(r===void 0)for(r=0,n=0;n<t.length;++n)r+=t[n].length;var i=Gs(null,r),o=0;for(n=0;n<t.length;++n){var c=t[n];if(!F.isBuffer(c))throw new TypeError('"list" argument must be an Array of Buffers');c.copy(i,o),o+=c.length}return i};F.byteLength=Zs;F.prototype._isBuffer=!0;F.isBuffer=function(t){return!!(t!=null&&t._isBuffer)};it.alloc=function(e){var t=new F(e);return t.fill(0),t};it.from=function(e){return new F(e)};var De={},si,Mh=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];De.getSymbolSize=function(t){if(!t)throw new Error('"version" cannot be null or undefined');if(t<1||t>40)throw new Error('"version" should be in range from 1 to 40');return t*4+17};De.getSymbolTotalCodewords=function(t){return Mh[t]};De.getBCHDigit=function(e){for(var t=0;e!==0;)t++,e>>>=1;return t};De.setToSJISFunction=function(t){if(typeof t!="function")throw new Error('"toSJISFunc" is not a valid function.');si=t};De.isKanjiModeEnabled=function(){return typeof si<"u"};De.toSJIS=function(t){return si(t)};var kr={};(function(e){e.L={bit:1},e.M={bit:0},e.Q={bit:3},e.H={bit:2};function t(r){if(typeof r!="string")throw new Error("Param is not a string");var n=r.toLowerCase();switch(n){case"l":case"low":return e.L;case"m":case"medium":return e.M;case"q":case"quartile":return e.Q;case"h":case"high":return e.H;default:throw new Error("Unknown EC Level: "+r)}}e.isValid=function(n){return n&&typeof n.bit<"u"&&n.bit>=0&&n.bit<4},e.from=function(n,i){if(e.isValid(n))return n;try{return t(n)}catch{return i}}})(kr);function Qs(){this.buffer=[],this.length=0}Qs.prototype={get:function(e){var t=Math.floor(e/8);return(this.buffer[t]>>>7-e%8&1)===1},put:function(e,t){for(var r=0;r<t;r++)this.putBit((e>>>t-r-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(e){var t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}};var Eh=Qs,no=it;function Jt(e){if(!e||e<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=no.alloc(e*e),this.reservedBit=no.alloc(e*e)}Jt.prototype.set=function(e,t,r,n){var i=e*this.size+t;this.data[i]=r,n&&(this.reservedBit[i]=!0)};Jt.prototype.get=function(e,t){return this.data[e*this.size+t]};Jt.prototype.xor=function(e,t,r){this.data[e*this.size+t]^=r};Jt.prototype.isReserved=function(e,t){return this.reservedBit[e*this.size+t]};var Sh=Jt,Xs={};(function(e){var t=De.getSymbolSize;e.getRowColCoords=function(n){if(n===1)return[];for(var i=Math.floor(n/7)+2,o=t(n),c=o===145?26:Math.ceil((o-13)/(2*i-2))*2,f=[o-7],l=1;l<i-1;l++)f[l]=f[l-1]-c;return f.push(6),f.reverse()},e.getPositions=function(n){for(var i=[],o=e.getRowColCoords(n),c=o.length,f=0;f<c;f++)for(var l=0;l<c;l++)f===0&&l===0||f===0&&l===c-1||f===c-1&&l===0||i.push([o[f],o[l]]);return i}})(Xs);var ea={},kh=De.getSymbolSize,io=7;ea.getPositions=function(t){var r=kh(t);return[[0,0],[r-io,0],[0,r-io]]};var ta={};(function(e){e.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};var t={N1:3,N2:3,N3:40,N4:10};e.isValid=function(i){return i!=null&&i!==""&&!isNaN(i)&&i>=0&&i<=7},e.from=function(i){return e.isValid(i)?parseInt(i,10):void 0},e.getPenaltyN1=function(i){for(var o=i.size,c=0,f=0,l=0,p=null,d=null,y=0;y<o;y++){f=l=0,p=d=null;for(var k=0;k<o;k++){var R=i.get(y,k);R===p?f++:(f>=5&&(c+=t.N1+(f-5)),p=R,f=1),R=i.get(k,y),R===d?l++:(l>=5&&(c+=t.N1+(l-5)),d=R,l=1)}f>=5&&(c+=t.N1+(f-5)),l>=5&&(c+=t.N1+(l-5))}return c},e.getPenaltyN2=function(i){for(var o=i.size,c=0,f=0;f<o-1;f++)for(var l=0;l<o-1;l++){var p=i.get(f,l)+i.get(f,l+1)+i.get(f+1,l)+i.get(f+1,l+1);(p===4||p===0)&&c++}return c*t.N2},e.getPenaltyN3=function(i){for(var o=i.size,c=0,f=0,l=0,p=0;p<o;p++){f=l=0;for(var d=0;d<o;d++)f=f<<1&2047|i.get(p,d),d>=10&&(f===1488||f===93)&&c++,l=l<<1&2047|i.get(d,p),d>=10&&(l===1488||l===93)&&c++}return c*t.N3},e.getPenaltyN4=function(i){for(var o=0,c=i.data.length,f=0;f<c;f++)o+=i.data[f];var l=Math.abs(Math.ceil(o*100/c/5)-10);return l*t.N4};function r(n,i,o){switch(n){case e.Patterns.PATTERN000:return(i+o)%2===0;case e.Patterns.PATTERN001:return i%2===0;case e.Patterns.PATTERN010:return o%3===0;case e.Patterns.PATTERN011:return(i+o)%3===0;case e.Patterns.PATTERN100:return(Math.floor(i/2)+Math.floor(o/3))%2===0;case e.Patterns.PATTERN101:return i*o%2+i*o%3===0;case e.Patterns.PATTERN110:return(i*o%2+i*o%3)%2===0;case e.Patterns.PATTERN111:return(i*o%3+(i+o)%2)%2===0;default:throw new Error("bad maskPattern:"+n)}}e.applyMask=function(i,o){for(var c=o.size,f=0;f<c;f++)for(var l=0;l<c;l++)o.isReserved(l,f)||o.xor(l,f,r(i,l,f))},e.getBestMask=function(i,o){for(var c=Object.keys(e.Patterns).length,f=0,l=1/0,p=0;p<c;p++){o(p),e.applyMask(p,i);var d=e.getPenaltyN1(i)+e.getPenaltyN2(i)+e.getPenaltyN3(i)+e.getPenaltyN4(i);e.applyMask(p,i),d<l&&(l=d,f=p)}return f}})(ta);var Cr={},Ze=kr,tr=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],rr=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];Cr.getBlocksCount=function(t,r){switch(r){case Ze.L:return tr[(t-1)*4+0];case Ze.M:return tr[(t-1)*4+1];case Ze.Q:return tr[(t-1)*4+2];case Ze.H:return tr[(t-1)*4+3];default:return}};Cr.getTotalCodewordsCount=function(t,r){switch(r){case Ze.L:return rr[(t-1)*4+0];case Ze.M:return rr[(t-1)*4+1];case Ze.Q:return rr[(t-1)*4+2];case Ze.H:return rr[(t-1)*4+3];default:return}};var ra={},Tr={},na=it,Lt=na.alloc(512),ur=na.alloc(256);(function(){for(var t=1,r=0;r<255;r++)Lt[r]=t,ur[t]=r,t<<=1,t&256&&(t^=285);for(r=255;r<512;r++)Lt[r]=Lt[r-255]})();Tr.log=function(t){if(t<1)throw new Error("log("+t+")");return ur[t]};Tr.exp=function(t){return Lt[t]};Tr.mul=function(t,r){return t===0||r===0?0:Lt[ur[t]+ur[r]]};(function(e){var t=it,r=Tr;e.mul=function(i,o){for(var c=t.alloc(i.length+o.length-1),f=0;f<i.length;f++)for(var l=0;l<o.length;l++)c[f+l]^=r.mul(i[f],o[l]);return c},e.mod=function(i,o){for(var c=t.from(i);c.length-o.length>=0;){for(var f=c[0],l=0;l<o.length;l++)c[l]^=r.mul(o[l],f);for(var p=0;p<c.length&&c[p]===0;)p++;c=c.slice(p)}return c},e.generateECPolynomial=function(i){for(var o=t.from([1]),c=0;c<i;c++)o=e.mul(o,[1,r.exp(c)]);return o}})(ra);var oo=it,ia=ra,Ch=tc.Buffer;function ai(e){this.genPoly=void 0,this.degree=e,this.degree&&this.initialize(this.degree)}ai.prototype.initialize=function(t){this.degree=t,this.genPoly=ia.generateECPolynomial(this.degree)};ai.prototype.encode=function(t){if(!this.genPoly)throw new Error("Encoder not initialized");var r=oo.alloc(this.degree),n=Ch.concat([t,r],t.length+this.degree),i=ia.mod(n,this.genPoly),o=this.degree-i.length;if(o>0){var c=oo.alloc(this.degree);return i.copy(c,o),c}return i};var Th=ai,oa={},ot={},ci={};ci.isValid=function(t){return!isNaN(t)&&t>=1&&t<=40};var Ke={},sa="[0-9]+",Ah="[A-Z $%*+\\-./:]+",Dt="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";Dt=Dt.replace(/u/g,"\\u");var Rh="(?:(?![A-Z0-9 $%*+\\-./:]|"+Dt+`)(?:.|[\r
]))+`;Ke.KANJI=new RegExp(Dt,"g");Ke.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");Ke.BYTE=new RegExp(Rh,"g");Ke.NUMERIC=new RegExp(sa,"g");Ke.ALPHANUMERIC=new RegExp(Ah,"g");var Bh=new RegExp("^"+Dt+"$"),Ih=new RegExp("^"+sa+"$"),Ph=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");Ke.testKanji=function(t){return Bh.test(t)};Ke.testNumeric=function(t){return Ih.test(t)};Ke.testAlphanumeric=function(t){return Ph.test(t)};(function(e){var t=ci,r=Ke;e.NUMERIC={id:"Numeric",bit:1<<0,ccBits:[10,12,14]},e.ALPHANUMERIC={id:"Alphanumeric",bit:1<<1,ccBits:[9,11,13]},e.BYTE={id:"Byte",bit:1<<2,ccBits:[8,16,16]},e.KANJI={id:"Kanji",bit:1<<3,ccBits:[8,10,12]},e.MIXED={bit:-1},e.getCharCountIndicator=function(o,c){if(!o.ccBits)throw new Error("Invalid mode: "+o);if(!t.isValid(c))throw new Error("Invalid version: "+c);return c>=1&&c<10?o.ccBits[0]:c<27?o.ccBits[1]:o.ccBits[2]},e.getBestModeForData=function(o){return r.testNumeric(o)?e.NUMERIC:r.testAlphanumeric(o)?e.ALPHANUMERIC:r.testKanji(o)?e.KANJI:e.BYTE},e.toString=function(o){if(o&&o.id)return o.id;throw new Error("Invalid mode")},e.isValid=function(o){return o&&o.bit&&o.ccBits};function n(i){if(typeof i!="string")throw new Error("Param is not a string");var o=i.toLowerCase();switch(o){case"numeric":return e.NUMERIC;case"alphanumeric":return e.ALPHANUMERIC;case"kanji":return e.KANJI;case"byte":return e.BYTE;default:throw new Error("Unknown mode: "+i)}}e.from=function(o,c){if(e.isValid(o))return o;try{return n(o)}catch{return c}}})(ot);(function(e){var t=De,r=Cr,n=kr,i=ot,o=ci,c=ii,f=1<<12|1<<11|1<<10|1<<9|1<<8|1<<5|1<<2|1<<0,l=t.getBCHDigit(f);function p(R,T,B){for(var b=1;b<=40;b++)if(T<=e.getCapacity(b,B,R))return b}function d(R,T){return i.getCharCountIndicator(R,T)+4}function y(R,T){var B=0;return R.forEach(function(b){var M=d(b.mode,T);B+=M+b.getBitsLength()}),B}function k(R,T){for(var B=1;B<=40;B++){var b=y(R,B);if(b<=e.getCapacity(B,T,i.MIXED))return B}}e.from=function(T,B){return o.isValid(T)?parseInt(T,10):B},e.getCapacity=function(T,B,b){if(!o.isValid(T))throw new Error("Invalid QR Code version");typeof b>"u"&&(b=i.BYTE);var M=t.getSymbolTotalCodewords(T),C=r.getTotalCodewordsCount(T,B),E=(M-C)*8;if(b===i.MIXED)return E;var A=E-d(b,T);switch(b){case i.NUMERIC:return Math.floor(A/10*3);case i.ALPHANUMERIC:return Math.floor(A/11*2);case i.KANJI:return Math.floor(A/13);case i.BYTE:default:return Math.floor(A/8)}},e.getBestVersionForData=function(T,B){var b,M=n.from(B,n.M);if(c(T)){if(T.length>1)return k(T,M);if(T.length===0)return 1;b=T[0]}else b=T;return p(b.mode,b.getLength(),M)},e.getEncodedBits=function(T){if(!o.isValid(T)||T<7)throw new Error("Invalid QR Code version");for(var B=T<<12;t.getBCHDigit(B)-l>=0;)B^=f<<t.getBCHDigit(B)-l;return T<<12|B}})(oa);var aa={},kn=De,ca=1<<10|1<<8|1<<5|1<<4|1<<2|1<<1|1<<0,Nh=1<<14|1<<12|1<<10|1<<4|1<<1,so=kn.getBCHDigit(ca);aa.getEncodedBits=function(t,r){for(var n=t.bit<<3|r,i=n<<10;kn.getBCHDigit(i)-so>=0;)i^=ca<<kn.getBCHDigit(i)-so;return(n<<10|i)^Nh};var fa={},Oh=ot;function xt(e){this.mode=Oh.NUMERIC,this.data=e.toString()}xt.getBitsLength=function(t){return 10*Math.floor(t/3)+(t%3?t%3*3+1:0)};xt.prototype.getLength=function(){return this.data.length};xt.prototype.getBitsLength=function(){return xt.getBitsLength(this.data.length)};xt.prototype.write=function(t){var r,n,i;for(r=0;r+3<=this.data.length;r+=3)n=this.data.substr(r,3),i=parseInt(n,10),t.put(i,10);var o=this.data.length-r;o>0&&(n=this.data.substr(r),i=parseInt(n,10),t.put(i,o*3+1))};var Lh=xt,Uh=ot,an=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function Mt(e){this.mode=Uh.ALPHANUMERIC,this.data=e}Mt.getBitsLength=function(t){return 11*Math.floor(t/2)+6*(t%2)};Mt.prototype.getLength=function(){return this.data.length};Mt.prototype.getBitsLength=function(){return Mt.getBitsLength(this.data.length)};Mt.prototype.write=function(t){var r;for(r=0;r+2<=this.data.length;r+=2){var n=an.indexOf(this.data[r])*45;n+=an.indexOf(this.data[r+1]),t.put(n,11)}this.data.length%2&&t.put(an.indexOf(this.data[r]),6)};var qh=Mt,Hh=it,Dh=ot;function Et(e){this.mode=Dh.BYTE,this.data=Hh.from(e)}Et.getBitsLength=function(t){return t*8};Et.prototype.getLength=function(){return this.data.length};Et.prototype.getBitsLength=function(){return Et.getBitsLength(this.data.length)};Et.prototype.write=function(e){for(var t=0,r=this.data.length;t<r;t++)e.put(this.data[t],8)};var $h=Et,Fh=ot,Wh=De;function St(e){this.mode=Fh.KANJI,this.data=e}St.getBitsLength=function(t){return t*13};St.prototype.getLength=function(){return this.data.length};St.prototype.getBitsLength=function(){return St.getBitsLength(this.data.length)};St.prototype.write=function(e){var t;for(t=0;t<this.data.length;t++){var r=Wh.toSJIS(this.data[t]);if(r>=33088&&r<=40956)r-=33088;else if(r>=57408&&r<=60351)r-=49472;else throw new Error("Invalid SJIS character: "+this.data[t]+`
Make sure your charset is UTF-8`);r=(r>>>8&255)*192+(r&255),e.put(r,13)}};var zh=St,ua={exports:{}};(function(e){var t={single_source_shortest_paths:function(r,n,i){var o={},c={};c[n]=0;var f=t.PriorityQueue.make();f.push(n,0);for(var l,p,d,y,k,R,T,B,b;!f.empty();){l=f.pop(),p=l.value,y=l.cost,k=r[p]||{};for(d in k)k.hasOwnProperty(d)&&(R=k[d],T=y+R,B=c[d],b=typeof c[d]>"u",(b||B>T)&&(c[d]=T,f.push(d,T),o[d]=p))}if(typeof i<"u"&&typeof c[i]>"u"){var M=["Could not find a path from ",n," to ",i,"."].join("");throw new Error(M)}return o},extract_shortest_path_from_predecessor_list:function(r,n){for(var i=[],o=n;o;)i.push(o),r[o],o=r[o];return i.reverse(),i},find_path:function(r,n,i){var o=t.single_source_shortest_paths(r,n,i);return t.extract_shortest_path_from_predecessor_list(o,i)},PriorityQueue:{make:function(r){var n=t.PriorityQueue,i={},o;r=r||{};for(o in n)n.hasOwnProperty(o)&&(i[o]=n[o]);return i.queue=[],i.sorter=r.sorter||n.default_sorter,i},default_sorter:function(r,n){return r.cost-n.cost},push:function(r,n){var i={value:r,cost:n};this.queue.push(i),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};e.exports=t})(ua);(function(e){var t=ot,r=Lh,n=qh,i=$h,o=zh,c=Ke,f=De,l=ua.exports;function p(M){return unescape(encodeURIComponent(M)).length}function d(M,C,E){for(var A=[],P;(P=M.exec(E))!==null;)A.push({data:P[0],index:P.index,mode:C,length:P[0].length});return A}function y(M){var C=d(c.NUMERIC,t.NUMERIC,M),E=d(c.ALPHANUMERIC,t.ALPHANUMERIC,M),A,P;f.isKanjiModeEnabled()?(A=d(c.BYTE,t.BYTE,M),P=d(c.KANJI,t.KANJI,M)):(A=d(c.BYTE_KANJI,t.BYTE,M),P=[]);var N=C.concat(E,A,P);return N.sort(function(D,H){return D.index-H.index}).map(function(D){return{data:D.data,mode:D.mode,length:D.length}})}function k(M,C){switch(C){case t.NUMERIC:return r.getBitsLength(M);case t.ALPHANUMERIC:return n.getBitsLength(M);case t.KANJI:return o.getBitsLength(M);case t.BYTE:return i.getBitsLength(M)}}function R(M){return M.reduce(function(C,E){var A=C.length-1>=0?C[C.length-1]:null;return A&&A.mode===E.mode?(C[C.length-1].data+=E.data,C):(C.push(E),C)},[])}function T(M){for(var C=[],E=0;E<M.length;E++){var A=M[E];switch(A.mode){case t.NUMERIC:C.push([A,{data:A.data,mode:t.ALPHANUMERIC,length:A.length},{data:A.data,mode:t.BYTE,length:A.length}]);break;case t.ALPHANUMERIC:C.push([A,{data:A.data,mode:t.BYTE,length:A.length}]);break;case t.KANJI:C.push([A,{data:A.data,mode:t.BYTE,length:p(A.data)}]);break;case t.BYTE:C.push([{data:A.data,mode:t.BYTE,length:p(A.data)}])}}return C}function B(M,C){for(var E={},A={start:{}},P=["start"],N=0;N<M.length;N++){for(var D=M[N],H=[],Z=0;Z<D.length;Z++){var w=D[Z],s=""+N+Z;H.push(s),E[s]={node:w,lastCount:0},A[s]={};for(var u=0;u<P.length;u++){var h=P[u];E[h]&&E[h].node.mode===w.mode?(A[h][s]=k(E[h].lastCount+w.length,w.mode)-k(E[h].lastCount,w.mode),E[h].lastCount+=w.length):(E[h]&&(E[h].lastCount=w.length),A[h][s]=k(w.length,w.mode)+4+t.getCharCountIndicator(w.mode,C))}}P=H}for(u=0;u<P.length;u++)A[P[u]].end=0;return{map:A,table:E}}function b(M,C){var E,A=t.getBestModeForData(M);if(E=t.from(C,A),E!==t.BYTE&&E.bit<A.bit)throw new Error('"'+M+'" cannot be encoded with mode '+t.toString(E)+`.
 Suggested mode is: `+t.toString(A));switch(E===t.KANJI&&!f.isKanjiModeEnabled()&&(E=t.BYTE),E){case t.NUMERIC:return new r(M);case t.ALPHANUMERIC:return new n(M);case t.KANJI:return new o(M);case t.BYTE:return new i(M)}}e.fromArray=function(C){return C.reduce(function(E,A){return typeof A=="string"?E.push(b(A,null)):A.data&&E.push(b(A.data,A.mode)),E},[])},e.fromString=function(C,E){for(var A=y(C,f.isKanjiModeEnabled()),P=T(A),N=B(P,E),D=l.find_path(N.map,"start","end"),H=[],Z=1;Z<D.length-1;Z++)H.push(N.table[D[Z]].node);return e.fromArray(R(H))},e.rawSplit=function(C){return e.fromArray(y(C,f.isKanjiModeEnabled()))}})(fa);var ao=it,Ar=De,cn=kr,jh=Eh,Kh=Sh,Vh=Xs,Jh=ea,Cn=ta,Tn=Cr,Gh=Th,lr=oa,Yh=aa,Zh=ot,fn=fa,Qh=ii;function Xh(e,t){for(var r=e.size,n=Jh.getPositions(t),i=0;i<n.length;i++)for(var o=n[i][0],c=n[i][1],f=-1;f<=7;f++)if(!(o+f<=-1||r<=o+f))for(var l=-1;l<=7;l++)c+l<=-1||r<=c+l||(f>=0&&f<=6&&(l===0||l===6)||l>=0&&l<=6&&(f===0||f===6)||f>=2&&f<=4&&l>=2&&l<=4?e.set(o+f,c+l,!0,!0):e.set(o+f,c+l,!1,!0))}function e0(e){for(var t=e.size,r=8;r<t-8;r++){var n=r%2===0;e.set(r,6,n,!0),e.set(6,r,n,!0)}}function t0(e,t){for(var r=Vh.getPositions(t),n=0;n<r.length;n++)for(var i=r[n][0],o=r[n][1],c=-2;c<=2;c++)for(var f=-2;f<=2;f++)c===-2||c===2||f===-2||f===2||c===0&&f===0?e.set(i+c,o+f,!0,!0):e.set(i+c,o+f,!1,!0)}function r0(e,t){for(var r=e.size,n=lr.getEncodedBits(t),i,o,c,f=0;f<18;f++)i=Math.floor(f/3),o=f%3+r-8-3,c=(n>>f&1)===1,e.set(i,o,c,!0),e.set(o,i,c,!0)}function un(e,t,r){var n=e.size,i=Yh.getEncodedBits(t,r),o,c;for(o=0;o<15;o++)c=(i>>o&1)===1,o<6?e.set(o,8,c,!0):o<8?e.set(o+1,8,c,!0):e.set(n-15+o,8,c,!0),o<8?e.set(8,n-o-1,c,!0):o<9?e.set(8,15-o-1+1,c,!0):e.set(8,15-o-1,c,!0);e.set(n-8,8,1,!0)}function n0(e,t){for(var r=e.size,n=-1,i=r-1,o=7,c=0,f=r-1;f>0;f-=2)for(f===6&&f--;;){for(var l=0;l<2;l++)if(!e.isReserved(i,f-l)){var p=!1;c<t.length&&(p=(t[c]>>>o&1)===1),e.set(i,f-l,p),o--,o===-1&&(c++,o=7)}if(i+=n,i<0||r<=i){i-=n,n=-n;break}}}function i0(e,t,r){var n=new jh;r.forEach(function(p){n.put(p.mode.bit,4),n.put(p.getLength(),Zh.getCharCountIndicator(p.mode,e)),p.write(n)});var i=Ar.getSymbolTotalCodewords(e),o=Tn.getTotalCodewordsCount(e,t),c=(i-o)*8;for(n.getLengthInBits()+4<=c&&n.put(0,4);n.getLengthInBits()%8!==0;)n.putBit(0);for(var f=(c-n.getLengthInBits())/8,l=0;l<f;l++)n.put(l%2?17:236,8);return o0(n,e,t)}function o0(e,t,r){for(var n=Ar.getSymbolTotalCodewords(t),i=Tn.getTotalCodewordsCount(t,r),o=n-i,c=Tn.getBlocksCount(t,r),f=n%c,l=c-f,p=Math.floor(n/c),d=Math.floor(o/c),y=d+1,k=p-d,R=new Gh(k),T=0,B=new Array(c),b=new Array(c),M=0,C=ao.from(e.buffer),E=0;E<c;E++){var A=E<l?d:y;B[E]=C.slice(T,T+A),b[E]=R.encode(B[E]),T+=A,M=Math.max(M,A)}var P=ao.alloc(n),N=0,D,H;for(D=0;D<M;D++)for(H=0;H<c;H++)D<B[H].length&&(P[N++]=B[H][D]);for(D=0;D<k;D++)for(H=0;H<c;H++)P[N++]=b[H][D];return P}function s0(e,t,r,n){var i;if(Qh(e))i=fn.fromArray(e);else if(typeof e=="string"){var o=t;if(!o){var c=fn.rawSplit(e);o=lr.getBestVersionForData(c,r)}i=fn.fromString(e,o||40)}else throw new Error("Invalid data");var f=lr.getBestVersionForData(i,r);if(!f)throw new Error("The amount of data is too big to be stored in a QR Code");if(!t)t=f;else if(t<f)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+f+`.
`);var l=i0(t,r,i),p=Ar.getSymbolSize(t),d=new Kh(p);return Xh(d,t),e0(d),t0(d,t),un(d,r,0),t>=7&&r0(d,t),n0(d,l),isNaN(n)&&(n=Cn.getBestMask(d,un.bind(null,d,r))),Cn.applyMask(n,d),un(d,r,n),{modules:d,version:t,errorCorrectionLevel:r,maskPattern:n,segments:i}}Js.create=function(t,r){if(typeof t>"u"||t==="")throw new Error("No input text");var n=cn.M,i,o;return typeof r<"u"&&(n=cn.from(r.errorCorrectionLevel,cn.M),i=lr.from(r.version),o=Cn.from(r.maskPattern),r.toSJISFunc&&Ar.setToSJISFunction(r.toSJISFunc)),s0(t,i,n,o)};var la={},fi={};(function(e){function t(r){if(typeof r=="number"&&(r=r.toString()),typeof r!="string")throw new Error("Color should be defined as hex string");var n=r.slice().replace("#","").split("");if(n.length<3||n.length===5||n.length>8)throw new Error("Invalid hex color: "+r);(n.length===3||n.length===4)&&(n=Array.prototype.concat.apply([],n.map(function(o){return[o,o]}))),n.length===6&&n.push("F","F");var i=parseInt(n.join(""),16);return{r:i>>24&255,g:i>>16&255,b:i>>8&255,a:i&255,hex:"#"+n.slice(0,6).join("")}}e.getOptions=function(n){n||(n={}),n.color||(n.color={});var i=typeof n.margin>"u"||n.margin===null||n.margin<0?4:n.margin,o=n.width&&n.width>=21?n.width:void 0,c=n.scale||4;return{width:o,scale:o?4:c,margin:i,color:{dark:t(n.color.dark||"#000000ff"),light:t(n.color.light||"#ffffffff")},type:n.type,rendererOpts:n.rendererOpts||{}}},e.getScale=function(n,i){return i.width&&i.width>=n+i.margin*2?i.width/(n+i.margin*2):i.scale},e.getImageWidth=function(n,i){var o=e.getScale(n,i);return Math.floor((n+i.margin*2)*o)},e.qrToImageData=function(n,i,o){for(var c=i.modules.size,f=i.modules.data,l=e.getScale(c,o),p=Math.floor((c+o.margin*2)*l),d=o.margin*l,y=[o.color.light,o.color.dark],k=0;k<p;k++)for(var R=0;R<p;R++){var T=(k*p+R)*4,B=o.color.light;if(k>=d&&R>=d&&k<p-d&&R<p-d){var b=Math.floor((k-d)/l),M=Math.floor((R-d)/l);B=y[f[b*c+M]?1:0]}n[T++]=B.r,n[T++]=B.g,n[T++]=B.b,n[T]=B.a}}})(fi);(function(e){var t=fi;function r(i,o,c){i.clearRect(0,0,o.width,o.height),o.style||(o.style={}),o.height=c,o.width=c,o.style.height=c+"px",o.style.width=c+"px"}function n(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}e.render=function(o,c,f){var l=f,p=c;typeof l>"u"&&(!c||!c.getContext)&&(l=c,c=void 0),c||(p=n()),l=t.getOptions(l);var d=t.getImageWidth(o.modules.size,l),y=p.getContext("2d"),k=y.createImageData(d,d);return t.qrToImageData(k.data,o,l),r(y,p,d),y.putImageData(k,0,0),p},e.renderToDataURL=function(o,c,f){var l=f;typeof l>"u"&&(!c||!c.getContext)&&(l=c,c=void 0),l||(l={});var p=e.render(o,c,l),d=l.type||"image/png",y=l.rendererOpts||{};return p.toDataURL(d,y.quality)}})(la);var ha={},a0=fi;function co(e,t){var r=e.a/255,n=t+'="'+e.hex+'"';return r<1?n+" "+t+'-opacity="'+r.toFixed(2).slice(1)+'"':n}function ln(e,t,r){var n=e+t;return typeof r<"u"&&(n+=" "+r),n}function c0(e,t,r){for(var n="",i=0,o=!1,c=0,f=0;f<e.length;f++){var l=Math.floor(f%t),p=Math.floor(f/t);!l&&!o&&(o=!0),e[f]?(c++,f>0&&l>0&&e[f-1]||(n+=o?ln("M",l+r,.5+p+r):ln("m",i,0),i=0,o=!1),l+1<t&&e[f+1]||(n+=ln("h",c),c=0)):i++}return n}ha.render=function(t,r,n){var i=a0.getOptions(r),o=t.modules.size,c=t.modules.data,f=o+i.margin*2,l=i.color.light.a?"<path "+co(i.color.light,"fill")+' d="M0 0h'+f+"v"+f+'H0z"/>':"",p="<path "+co(i.color.dark,"stroke")+' d="'+c0(c,o,i.margin)+'"/>',d='viewBox="0 0 '+f+" "+f+'"',y=i.width?'width="'+i.width+'" height="'+i.width+'" ':"",k='<svg xmlns="http://www.w3.org/2000/svg" '+y+d+' shape-rendering="crispEdges">'+l+p+`</svg>
`;return typeof n=="function"&&n(null,k),k};var f0=hh,An=Js,da=la,u0=ha;function ui(e,t,r,n,i){var o=[].slice.call(arguments,1),c=o.length,f=typeof o[c-1]=="function";if(!f&&!f0())throw new Error("Callback required as last argument");if(f){if(c<2)throw new Error("Too few arguments provided");c===2?(i=r,r=t,t=n=void 0):c===3&&(t.getContext&&typeof i>"u"?(i=n,n=void 0):(i=n,n=r,r=t,t=void 0))}else{if(c<1)throw new Error("Too few arguments provided");return c===1?(r=t,t=n=void 0):c===2&&!t.getContext&&(n=r,r=t,t=void 0),new Promise(function(p,d){try{var y=An.create(r,n);p(e(y,t,n))}catch(k){d(k)}})}try{var l=An.create(r,n);i(null,e(l,t,n))}catch(p){i(p)}}Vt.create=An.create;Vt.toCanvas=ui.bind(null,da.render);Vt.toDataURL=ui.bind(null,da.renderToDataURL);Vt.toString=ui.bind(null,function(e,t,r){return u0.render(e,r)});var l0=function(){var e=document.getSelection();if(!e.rangeCount)return function(){};for(var t=document.activeElement,r=[],n=0;n<e.rangeCount;n++)r.push(e.getRangeAt(n));switch(t.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":t.blur();break;default:t=null;break}return e.removeAllRanges(),function(){e.type==="Caret"&&e.removeAllRanges(),e.rangeCount||r.forEach(function(i){e.addRange(i)}),t&&t.focus()}},h0=l0,fo={"text/plain":"Text","text/html":"Url",default:"Text"},d0="Copy to clipboard: #{key}, Enter";function p0(e){var t=(/mac os x/i.test(navigator.userAgent)?"\u2318":"Ctrl")+"+C";return e.replace(/#{\s*key\s*}/g,t)}function g0(e,t){var r,n,i,o,c,f,l=!1;t||(t={}),r=t.debug||!1;try{i=h0(),o=document.createRange(),c=document.getSelection(),f=document.createElement("span"),f.textContent=e,f.ariaHidden="true",f.style.all="unset",f.style.position="fixed",f.style.top=0,f.style.clip="rect(0, 0, 0, 0)",f.style.whiteSpace="pre",f.style.webkitUserSelect="text",f.style.MozUserSelect="text",f.style.msUserSelect="text",f.style.userSelect="text",f.addEventListener("copy",function(d){if(d.stopPropagation(),t.format)if(d.preventDefault(),typeof d.clipboardData>"u"){r&&console.warn("unable to use e.clipboardData"),r&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var y=fo[t.format]||fo.default;window.clipboardData.setData(y,e)}else d.clipboardData.clearData(),d.clipboardData.setData(t.format,e);t.onCopy&&(d.preventDefault(),t.onCopy(d.clipboardData))}),document.body.appendChild(f),o.selectNodeContents(f),c.addRange(o);var p=document.execCommand("copy");if(!p)throw new Error("copy command was unsuccessful");l=!0}catch(d){r&&console.error("unable to copy using execCommand: ",d),r&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(t.format||"text",e),t.onCopy&&t.onCopy(window.clipboardData),l=!0}catch(y){r&&console.error("unable to copy using clipboardData: ",y),r&&console.error("falling back to prompt"),n=p0("message"in t?t.message:d0),window.prompt(n,e)}}finally{c&&(typeof c.removeRange=="function"?c.removeRange(o):c.removeAllRanges()),f&&document.body.removeChild(f),i()}return l}var _0=g0,q,Ut,li,pa,uo,hi,ga,Je={},Rr=[],v0=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord/i;function Ve(e,t){for(var r in t)e[r]=t[r];return e}function _a(e){var t=e.parentNode;t&&t.removeChild(e)}function Ge(e,t,r){var n,i=arguments,o={};for(n in t)n!=="key"&&n!=="ref"&&(o[n]=t[n]);if(arguments.length>3)for(r=[r],n=3;n<arguments.length;n++)r.push(i[n]);if(r!=null&&(o.children=r),typeof e=="function"&&e.defaultProps!=null)for(n in e.defaultProps)o[n]===void 0&&(o[n]=e.defaultProps[n]);return hr(e,o,t&&t.key,t&&t.ref,null)}function hr(e,t,r,n,i){var o={type:e,props:t,key:r,ref:n,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:i};return i==null&&(o.__v=o),q.vnode&&q.vnode(o),o}function va(){return{}}function Gt(e){return e.children}function We(e,t){this.props=e,this.context=t}function $t(e,t){if(t==null)return e.__?$t(e.__,e.__.__k.indexOf(e)+1):null;for(var r;t<e.__k.length;t++)if((r=e.__k[t])!=null&&r.__e!=null)return r.__e;return typeof e.type=="function"?$t(e):null}function ma(e){var t,r;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((r=e.__k[t])!=null&&r.__e!=null){e.__e=e.__c.base=r.__e;break}return ma(e)}}function ir(e){(!e.__d&&(e.__d=!0)&&Ut.push(e)&&!li++||uo!==q.debounceRendering)&&((uo=q.debounceRendering)||pa)(m0)}function m0(){for(var e;li=Ut.length;)e=Ut.sort(function(t,r){return t.__v.__b-r.__v.__b}),Ut=[],e.some(function(t){var r,n,i,o,c,f,l;t.__d&&(f=(c=(r=t).__v).__e,(l=r.__P)&&(n=[],(i=Ve({},c)).__v=i,o=di(l,c,i,r.__n,l.ownerSVGElement!==void 0,null,n,f==null?$t(c):f),ya(n,c),o!=f&&ma(c)))})}function wa(e,t,r,n,i,o,c,f,l){var p,d,y,k,R,T,B,b=r&&r.__k||Rr,M=b.length;if(f==Je&&(f=o!=null?o[0]:M?$t(r,0):null),p=0,t.__k=tt(t.__k,function(C){if(C!=null){if(C.__=t,C.__b=t.__b+1,(y=b[p])===null||y&&C.key==y.key&&C.type===y.type)b[p]=void 0;else for(d=0;d<M;d++){if((y=b[d])&&C.key==y.key&&C.type===y.type){b[d]=void 0;break}y=null}if(k=di(e,C,y=y||Je,n,i,o,c,f,l),(d=C.ref)&&y.ref!=d&&(B||(B=[]),y.ref&&B.push(y.ref,null,C),B.push(d,C.__c||k,C)),k!=null){var E;if(T==null&&(T=k),C.__d!==void 0)E=C.__d,C.__d=void 0;else if(o==y||k!=f||k.parentNode==null){e:if(f==null||f.parentNode!==e)e.appendChild(k),E=null;else{for(R=f,d=0;(R=R.nextSibling)&&d<M;d+=2)if(R==k)break e;e.insertBefore(k,f),E=f}t.type=="option"&&(e.value="")}f=E!==void 0?E:k.nextSibling,typeof t.type=="function"&&(t.__d=f)}else f&&y.__e==f&&f.parentNode!=e&&(f=$t(y))}return p++,C}),t.__e=T,o!=null&&typeof t.type!="function")for(p=o.length;p--;)o[p]!=null&&_a(o[p]);for(p=M;p--;)b[p]!=null&&qt(b[p],b[p]);if(B)for(p=0;p<B.length;p++)ba(B[p],B[++p],B[++p])}function tt(e,t,r){if(r==null&&(r=[]),e==null||typeof e=="boolean")t&&r.push(t(null));else if(Array.isArray(e))for(var n=0;n<e.length;n++)tt(e[n],t,r);else r.push(t?t(typeof e=="string"||typeof e=="number"?hr(null,e,null,null,e):e.__e!=null||e.__c!=null?hr(e.type,e.props,e.key,null,e.__v):e):e);return r}function w0(e,t,r,n,i){var o;for(o in r)o==="children"||o==="key"||o in t||dr(e,o,null,r[o],n);for(o in t)i&&typeof t[o]!="function"||o==="children"||o==="key"||o==="value"||o==="checked"||r[o]===t[o]||dr(e,o,t[o],r[o],n)}function lo(e,t,r){t[0]==="-"?e.setProperty(t,r):e[t]=typeof r=="number"&&v0.test(t)===!1?r+"px":r==null?"":r}function dr(e,t,r,n,i){var o,c,f,l,p;if(i?t==="className"&&(t="class"):t==="class"&&(t="className"),t==="style")if(o=e.style,typeof r=="string")o.cssText=r;else{if(typeof n=="string"&&(o.cssText="",n=null),n)for(l in n)r&&l in r||lo(o,l,"");if(r)for(p in r)n&&r[p]===n[p]||lo(o,p,r[p])}else t[0]==="o"&&t[1]==="n"?(c=t!==(t=t.replace(/Capture$/,"")),f=t.toLowerCase(),t=(f in e?f:t).slice(2),r?(n||e.addEventListener(t,ho,c),(e.l||(e.l={}))[t]=r):e.removeEventListener(t,ho,c)):t!=="list"&&t!=="tagName"&&t!=="form"&&t!=="type"&&t!=="size"&&!i&&t in e?e[t]=r==null?"":r:typeof r!="function"&&t!=="dangerouslySetInnerHTML"&&(t!==(t=t.replace(/^xlink:?/,""))?r==null||r===!1?e.removeAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase()):e.setAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase(),r):r==null||r===!1&&!/^ar/.test(t)?e.removeAttribute(t):e.setAttribute(t,r))}function ho(e){this.l[e.type](q.event?q.event(e):e)}function di(e,t,r,n,i,o,c,f,l){var p,d,y,k,R,T,B,b,M,C,E=t.type;if(t.constructor!==void 0)return null;(p=q.__b)&&p(t);try{e:if(typeof E=="function"){if(b=t.props,M=(p=E.contextType)&&n[p.__c],C=p?M?M.props.value:p.__:n,r.__c?B=(d=t.__c=r.__c).__=d.__E:("prototype"in E&&E.prototype.render?t.__c=d=new E(b,C):(t.__c=d=new We(b,C),d.constructor=E,d.render=b0),M&&M.sub(d),d.props=b,d.state||(d.state={}),d.context=C,d.__n=n,y=d.__d=!0,d.__h=[]),d.__s==null&&(d.__s=d.state),E.getDerivedStateFromProps!=null&&(d.__s==d.state&&(d.__s=Ve({},d.__s)),Ve(d.__s,E.getDerivedStateFromProps(b,d.__s))),k=d.props,R=d.state,y)E.getDerivedStateFromProps==null&&d.componentWillMount!=null&&d.componentWillMount(),d.componentDidMount!=null&&d.__h.push(d.componentDidMount);else{if(E.getDerivedStateFromProps==null&&b!==k&&d.componentWillReceiveProps!=null&&d.componentWillReceiveProps(b,C),!d.__e&&d.shouldComponentUpdate!=null&&d.shouldComponentUpdate(b,d.__s,C)===!1||t.__v===r.__v&&!d.__){for(d.props=b,d.state=d.__s,t.__v!==r.__v&&(d.__d=!1),d.__v=t,t.__e=r.__e,t.__k=r.__k,d.__h.length&&c.push(d),p=0;p<t.__k.length;p++)t.__k[p]&&(t.__k[p].__=t);break e}d.componentWillUpdate!=null&&d.componentWillUpdate(b,d.__s,C),d.componentDidUpdate!=null&&d.__h.push(function(){d.componentDidUpdate(k,R,T)})}d.context=C,d.props=b,d.state=d.__s,(p=q.__r)&&p(t),d.__d=!1,d.__v=t,d.__P=e,p=d.render(d.props,d.state,d.context),t.__k=p!=null&&p.type==Gt&&p.key==null?p.props.children:Array.isArray(p)?p:[p],d.getChildContext!=null&&(n=Ve(Ve({},n),d.getChildContext())),y||d.getSnapshotBeforeUpdate==null||(T=d.getSnapshotBeforeUpdate(k,R)),wa(e,t,r,n,i,o,c,f,l),d.base=t.__e,d.__h.length&&c.push(d),B&&(d.__E=d.__=null),d.__e=!1}else o==null&&t.__v===r.__v?(t.__k=r.__k,t.__e=r.__e):t.__e=y0(r.__e,t,r,n,i,o,c,l);(p=q.diffed)&&p(t)}catch(A){t.__v=null,q.__e(A,t,r)}return t.__e}function ya(e,t){q.__c&&q.__c(t,e),e.some(function(r){try{e=r.__h,r.__h=[],e.some(function(n){n.call(r)})}catch(n){q.__e(n,r.__v)}})}function y0(e,t,r,n,i,o,c,f){var l,p,d,y,k,R=r.props,T=t.props;if(i=t.type==="svg"||i,o!=null){for(l=0;l<o.length;l++)if((p=o[l])!=null&&((t.type===null?p.nodeType===3:p.localName===t.type)||e==p)){e=p,o[l]=null;break}}if(e==null){if(t.type===null)return document.createTextNode(T);e=i?document.createElementNS("http://www.w3.org/2000/svg",t.type):document.createElement(t.type,T.is&&{is:T.is}),o=null,f=!1}if(t.type===null)R!==T&&e.data!=T&&(e.data=T);else{if(o!=null&&(o=Rr.slice.call(e.childNodes)),d=(R=r.props||Je).dangerouslySetInnerHTML,y=T.dangerouslySetInnerHTML,!f){if(R===Je)for(R={},k=0;k<e.attributes.length;k++)R[e.attributes[k].name]=e.attributes[k].value;(y||d)&&(y&&d&&y.__html==d.__html||(e.innerHTML=y&&y.__html||""))}w0(e,T,R,i,f),y?t.__k=[]:(t.__k=t.props.children,wa(e,t,r,n,t.type!=="foreignObject"&&i,o,c,Je,f)),f||("value"in T&&(l=T.value)!==void 0&&l!==e.value&&dr(e,"value",l,R.value,!1),"checked"in T&&(l=T.checked)!==void 0&&l!==e.checked&&dr(e,"checked",l,R.checked,!1))}return e}function ba(e,t,r){try{typeof e=="function"?e(t):e.current=t}catch(n){q.__e(n,r)}}function qt(e,t,r){var n,i,o;if(q.unmount&&q.unmount(e),(n=e.ref)&&(n.current&&n.current!==e.__e||ba(n,null,t)),r||typeof e.type=="function"||(r=(i=e.__e)!=null),e.__e=e.__d=void 0,(n=e.__c)!=null){if(n.componentWillUnmount)try{n.componentWillUnmount()}catch(c){q.__e(c,t)}n.base=n.__P=null}if(n=e.__k)for(o=0;o<n.length;o++)n[o]&&qt(n[o],t,r);i!=null&&_a(i)}function b0(e,t,r){return this.constructor(e,r)}function Ft(e,t,r){var n,i,o;q.__&&q.__(e,t),i=(n=r===hi)?null:r&&r.__k||t.__k,e=Ge(Gt,null,[e]),o=[],di(t,(n?t:r||t).__k=e,i||Je,Je,t.ownerSVGElement!==void 0,r&&!n?[r]:i?null:Rr.slice.call(t.childNodes),o,r||Je,n),ya(o,e)}function xa(e,t){Ft(e,t,hi)}function x0(e,t){var r,n;for(n in t=Ve(Ve({},e.props),t),arguments.length>2&&(t.children=Rr.slice.call(arguments,2)),r={},t)n!=="key"&&n!=="ref"&&(r[n]=t[n]);return hr(e.type,r,t.key||e.key,t.ref||e.ref,null)}function Ma(e){var t={},r={__c:"__cC"+ga++,__:e,Consumer:function(n,i){return n.children(i)},Provider:function(n){var i,o=this;return this.getChildContext||(i=[],this.getChildContext=function(){return t[r.__c]=o,t},this.shouldComponentUpdate=function(c){o.props.value!==c.value&&i.some(function(f){f.context=c.value,ir(f)})},this.sub=function(c){i.push(c);var f=c.componentWillUnmount;c.componentWillUnmount=function(){i.splice(i.indexOf(c),1),f&&f.call(c)}}),n.children}};return r.Consumer.contextType=r,r.Provider.__=r,r}q={__e:function(e,t){for(var r,n;t=t.__;)if((r=t.__c)&&!r.__)try{if(r.constructor&&r.constructor.getDerivedStateFromError!=null&&(n=!0,r.setState(r.constructor.getDerivedStateFromError(e))),r.componentDidCatch!=null&&(n=!0,r.componentDidCatch(e)),n)return ir(r.__E=r)}catch(i){e=i}throw e}},We.prototype.setState=function(e,t){var r;r=this.__s!==this.state?this.__s:this.__s=Ve({},this.state),typeof e=="function"&&(e=e(r,this.props)),e&&Ve(r,e),e!=null&&this.__v&&(t&&this.__h.push(t),ir(this))},We.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),ir(this))},We.prototype.render=Gt,Ut=[],li=0,pa=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,hi=Je,ga=0;var ht,qe,po,kt=0,Rn=[],go=q.__r,_o=q.diffed,vo=q.__c,mo=q.unmount;function Pt(e,t){q.__h&&q.__h(qe,e,kt||t),kt=0;var r=qe.__H||(qe.__H={__:[],__h:[]});return e>=r.__.length&&r.__.push({}),r.__[e]}function pi(e){return kt=1,gi(Ra,e)}function gi(e,t,r){var n=Pt(ht++,2);return n.__c||(n.__c=qe,n.__=[r?r(t):Ra(void 0,t),function(i){var o=e(n.__[0],i);n.__[0]!==o&&(n.__[0]=o,n.__c.setState({}))}]),n.__}function Ea(e,t){var r=Pt(ht++,3);!q.__s&&vi(r.__H,t)&&(r.__=e,r.__H=t,qe.__H.__h.push(r))}function _i(e,t){var r=Pt(ht++,4);!q.__s&&vi(r.__H,t)&&(r.__=e,r.__H=t,qe.__h.push(r))}function Sa(e){return kt=5,Br(function(){return{current:e}},[])}function ka(e,t,r){kt=6,_i(function(){typeof e=="function"?e(t()):e&&(e.current=t())},r==null?r:r.concat(e))}function Br(e,t){var r=Pt(ht++,7);return vi(r.__H,t)?(r.__H=t,r.__h=e,r.__=e()):r.__}function Ca(e,t){return kt=8,Br(function(){return e},t)}function Ta(e){var t=qe.context[e.__c],r=Pt(ht++,9);return r.__c=e,t?(r.__==null&&(r.__=!0,t.sub(qe)),t.props.value):e.__}function Aa(e,t){q.useDebugValue&&q.useDebugValue(t?t(e):e)}function M0(e){var t=Pt(ht++,10),r=pi();return t.__=e,qe.componentDidCatch||(qe.componentDidCatch=function(n){t.__&&t.__(n),r[1](n)}),[r[0],function(){r[1](void 0)}]}function E0(){Rn.some(function(e){if(e.__P)try{e.__H.__h.forEach(Bn),e.__H.__h.forEach(In),e.__H.__h=[]}catch(t){return e.__H.__h=[],q.__e(t,e.__v),!0}}),Rn=[]}function Bn(e){e.t&&e.t()}function In(e){var t=e.__();typeof t=="function"&&(e.t=t)}function vi(e,t){return!e||t.some(function(r,n){return r!==e[n]})}function Ra(e,t){return typeof t=="function"?t(e):t}q.__r=function(e){go&&go(e),ht=0,(qe=e.__c).__H&&(qe.__H.__h.forEach(Bn),qe.__H.__h.forEach(In),qe.__H.__h=[])},q.diffed=function(e){_o&&_o(e);var t=e.__c;if(t){var r=t.__H;r&&r.__h.length&&(Rn.push(t)!==1&&po===q.requestAnimationFrame||((po=q.requestAnimationFrame)||function(n){var i,o=function(){clearTimeout(c),cancelAnimationFrame(i),setTimeout(n)},c=setTimeout(o,100);typeof window<"u"&&(i=requestAnimationFrame(o))})(E0))}},q.__c=function(e,t){t.some(function(r){try{r.__h.forEach(Bn),r.__h=r.__h.filter(function(n){return!n.__||In(n)})}catch(n){t.some(function(i){i.__h&&(i.__h=[])}),t=[],q.__e(n,r.__v)}}),vo&&vo(e,t)},q.unmount=function(e){mo&&mo(e);var t=e.__c;if(t){var r=t.__H;if(r)try{r.__.forEach(function(n){return n.t&&n.t()})}catch(n){q.__e(n,t.__v)}}};function mi(e,t){for(var r in t)e[r]=t[r];return e}function Pn(e,t){for(var r in e)if(r!=="__source"&&!(r in t))return!0;for(var n in t)if(n!=="__source"&&e[n]!==t[n])return!0;return!1}var Ba=function(e){var t,r;function n(i){var o;return(o=e.call(this,i)||this).isPureReactComponent=!0,o}return r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r,n.prototype.shouldComponentUpdate=function(i,o){return Pn(this.props,i)||Pn(this.state,o)},n}(We);function Ia(e,t){function r(i){var o=this.props.ref,c=o==i.ref;return!c&&o&&(o.call?o(null):o.current=null),t?!t(this.props,i)||!c:Pn(this.props,i)}function n(i){return this.shouldComponentUpdate=r,Ge(e,mi({},i))}return n.prototype.isReactComponent=!0,n.displayName="Memo("+(e.displayName||e.name)+")",n.t=!0,n}var wo=q.__b;function Pa(e){function t(r){var n=mi({},r);return delete n.ref,e(n,r.ref)}return t.prototype.isReactComponent=t.t=!0,t.displayName="ForwardRef("+(e.displayName||e.name)+")",t}q.__b=function(e){e.type&&e.type.t&&e.ref&&(e.props.ref=e.ref,e.ref=null),wo&&wo(e)};var yo=function(e,t){return e?tt(e).reduce(function(r,n,i){return r.concat(t(n,i))},[]):null},Na={map:yo,forEach:yo,count:function(e){return e?tt(e).length:0},only:function(e){if((e=tt(e)).length!==1)throw new Error("Children.only() expects only one child.");return e[0]},toArray:tt},S0=q.__e;function Oa(e){return e&&((e=mi({},e)).__c=null,e.__k=e.__k&&e.__k.map(Oa)),e}function pr(){this.__u=0,this.o=null,this.__b=null}function La(e){var t=e.__.__c;return t&&t.u&&t.u(e)}function Ua(e){var t,r,n;function i(o){if(t||(t=e()).then(function(c){r=c.default||c},function(c){n=c}),n)throw n;if(!r)throw t;return Ge(r,o)}return i.displayName="Lazy",i.t=!0,i}function _t(){this.i=null,this.l=null}q.__e=function(e,t,r){if(e.then){for(var n,i=t;i=i.__;)if((n=i.__c)&&n.__c)return n.__c(e,t.__c)}S0(e,t,r)},(pr.prototype=new We).__c=function(e,t){var r=this;r.o==null&&(r.o=[]),r.o.push(t);var n=La(r.__v),i=!1,o=function(){i||(i=!0,n?n(c):c())};t.__c=t.componentWillUnmount,t.componentWillUnmount=function(){o(),t.__c&&t.__c()};var c=function(){var f;if(!--r.__u)for(r.__v.__k[0]=r.state.u,r.setState({u:r.__b=null});f=r.o.pop();)f.forceUpdate()};r.__u++||r.setState({u:r.__b=r.__v.__k[0]}),e.then(o,o)},pr.prototype.render=function(e,t){return this.__b&&(this.__v.__k[0]=Oa(this.__b),this.__b=null),[Ge(We,null,t.u?null:e.children),t.u&&e.fallback]};var bo=function(e,t,r){if(++r[1]===r[0]&&e.l.delete(t),e.props.revealOrder&&(e.props.revealOrder[0]!=="t"||!e.l.size))for(r=e.i;r;){for(;r.length>3;)r.pop()();if(r[1]<r[0])break;e.i=r=r[2]}};(_t.prototype=new We).u=function(e){var t=this,r=La(t.__v),n=t.l.get(e);return n[0]++,function(i){var o=function(){t.props.revealOrder?(n.push(i),bo(t,e,n)):i()};r?r(o):o()}},_t.prototype.render=function(e){this.i=null,this.l=new Map;var t=tt(e.children);e.revealOrder&&e.revealOrder[0]==="b"&&t.reverse();for(var r=t.length;r--;)this.l.set(t[r],this.i=[1,0,this.i]);return e.children},_t.prototype.componentDidUpdate=_t.prototype.componentDidMount=function(){var e=this;e.l.forEach(function(t,r){bo(e,r,t)})};var k0=function(){function e(){}var t=e.prototype;return t.getChildContext=function(){return this.props.context},t.render=function(r){return r.children},e}();function C0(e){var t=this,r=e.container,n=Ge(k0,{context:t.context},e.vnode);return t.s&&t.s!==r&&(t.v.parentNode&&t.s.removeChild(t.v),qt(t.h),t.p=!1),e.vnode?t.p?(r.__k=t.__k,Ft(n,r),t.__k=r.__k):(t.v=document.createTextNode(""),xa("",r),r.appendChild(t.v),t.p=!0,t.s=r,Ft(n,r,t.v),t.__k=t.v.__k):t.p&&(t.v.parentNode&&t.s.removeChild(t.v),qt(t.h)),t.h=n,t.componentWillUnmount=function(){t.v.parentNode&&t.s.removeChild(t.v),qt(t.h)},null}function qa(e,t){return Ge(C0,{vnode:e,container:t})}var xo=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|fill|flood|font|glyph(?!R)|horiz|marker(?!H|W|U)|overline|paint|stop|strikethrough|stroke|text(?!L)|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/;We.prototype.isReactComponent={};var Ha=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103;function Nn(e,t,r){if(t.__k==null)for(;t.firstChild;)t.removeChild(t.firstChild);return Ft(e,t),typeof r=="function"&&r(),e?e.__c:null}function T0(e,t,r){return xa(e,t),typeof r=="function"&&r(),e?e.__c:null}var Mo=q.event;function hn(e,t){e["UNSAFE_"+t]&&!e[t]&&Object.defineProperty(e,t,{configurable:!1,get:function(){return this["UNSAFE_"+t]},set:function(r){this["UNSAFE_"+t]=r}})}q.event=function(e){Mo&&(e=Mo(e)),e.persist=function(){};var t=!1,r=!1,n=e.stopPropagation;e.stopPropagation=function(){n.call(e),t=!0};var i=e.preventDefault;return e.preventDefault=function(){i.call(e),r=!0},e.isPropagationStopped=function(){return t},e.isDefaultPrevented=function(){return r},e.nativeEvent=e};var Eo={configurable:!0,get:function(){return this.class}},So=q.vnode;q.vnode=function(e){e.$$typeof=Ha;var t=e.type,r=e.props;if(t){if(r.class!=r.className&&(Eo.enumerable="className"in r,r.className!=null&&(r.class=r.className),Object.defineProperty(r,"className",Eo)),typeof t!="function"){var n,i,o;for(o in r.defaultValue&&r.value!==void 0&&(r.value||r.value===0||(r.value=r.defaultValue),delete r.defaultValue),Array.isArray(r.value)&&r.multiple&&t==="select"&&(tt(r.children).forEach(function(c){r.value.indexOf(c.props.value)!=-1&&(c.props.selected=!0)}),delete r.value),r)if(n=xo.test(o))break;if(n)for(o in i=e.props={},r)i[xo.test(o)?o.replace(/[A-Z0-9]/,"-$&").toLowerCase():o]=r[o]}(function(c){var f=e.type,l=e.props;if(l&&typeof f=="string"){var p={};for(var d in l)/^on(Ani|Tra|Tou)/.test(d)&&(l[d.toLowerCase()]=l[d],delete l[d]),p[d.toLowerCase()]=d;if(p.ondoubleclick&&(l.ondblclick=l[p.ondoubleclick],delete l[p.ondoubleclick]),p.onbeforeinput&&(l.onbeforeinput=l[p.onbeforeinput],delete l[p.onbeforeinput]),p.onchange&&(f==="textarea"||f.toLowerCase()==="input"&&!/^fil|che|ra/i.test(l.type))){var y=p.oninput||"oninput";l[y]||(l[y]=l[p.onchange],delete l[p.onchange])}}})(),typeof t=="function"&&!t.m&&t.prototype&&(hn(t.prototype,"componentWillMount"),hn(t.prototype,"componentWillReceiveProps"),hn(t.prototype,"componentWillUpdate"),t.m=!0)}So&&So(e)};var A0="16.8.0";function Da(e){return Ge.bind(null,e)}function wi(e){return!!e&&e.$$typeof===Ha}function $a(e){return wi(e)?x0.apply(null,arguments):e}function Fa(e){return!!e.__k&&(Ft(null,e),!0)}function Wa(e){return e&&(e.base||e.nodeType===1&&e)||null}var za=function(e,t){return e(t)};const R0={useState:pi,useReducer:gi,useEffect:Ea,useLayoutEffect:_i,useRef:Sa,useImperativeHandle:ka,useMemo:Br,useCallback:Ca,useContext:Ta,useDebugValue:Aa,version:"16.8.0",Children:Na,render:Nn,hydrate:Nn,unmountComponentAtNode:Fa,createPortal:qa,createElement:Ge,createContext:Ma,createFactory:Da,cloneElement:$a,createRef:va,Fragment:Gt,isValidElement:wi,findDOMNode:Wa,Component:We,PureComponent:Ba,memo:Ia,forwardRef:Pa,unstable_batchedUpdates:za,Suspense:pr,SuspenseList:_t,lazy:Ua},B0=Object.freeze(Object.defineProperty({__proto__:null,default:R0,version:A0,Children:Na,render:Nn,hydrate:T0,unmountComponentAtNode:Fa,createPortal:qa,createFactory:Da,cloneElement:$a,isValidElement:wi,findDOMNode:Wa,PureComponent:Ba,memo:Ia,forwardRef:Pa,unstable_batchedUpdates:za,Suspense:pr,SuspenseList:_t,lazy:Ua,createElement:Ge,createContext:Ma,createRef:va,Fragment:Gt,Component:We,useState:pi,useReducer:gi,useEffect:Ea,useLayoutEffect:_i,useRef:Sa,useImperativeHandle:ka,useMemo:Br,useCallback:Ca,useContext:Ta,useDebugValue:Aa,useErrorBoundary:M0},Symbol.toStringTag,{value:"Module"})),I0=qo(B0);function ja(e){return e&&typeof e=="object"&&"default"in e?e.default:e}var Oe=lh,Ka=ja(Vt),P0=ja(_0),I=I0;function N0(e){Ka.toString(e,{type:"terminal"}).then(console.log)}var O0=`:root {
  --animation-duration: 300ms;
}

@keyframes fadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

@keyframes fadeOut {
  from {
    opacity: 1;
  }
  to {
    opacity: 0;
  }
}

.animated {
  animation-duration: var(--animation-duration);
  animation-fill-mode: both;
}

.fadeIn {
  animation-name: fadeIn;
}

.fadeOut {
  animation-name: fadeOut;
}

#walletconnect-wrapper {
  -webkit-user-select: none;
  align-items: center;
  display: flex;
  height: 100%;
  justify-content: center;
  left: 0;
  pointer-events: none;
  position: fixed;
  top: 0;
  user-select: none;
  width: 100%;
  z-index: 99999999999999;
}

.walletconnect-modal__headerLogo {
  height: 21px;
}

.walletconnect-modal__header p {
  color: #ffffff;
  font-size: 20px;
  font-weight: 600;
  margin: 0;
  align-items: flex-start;
  display: flex;
  flex: 1;
  margin-left: 5px;
}

.walletconnect-modal__close__wrapper {
  position: absolute;
  top: 0px;
  right: 0px;
  z-index: 10000;
  background: white;
  border-radius: 26px;
  padding: 6px;
  box-sizing: border-box;
  width: 26px;
  height: 26px;
  cursor: pointer;
}

.walletconnect-modal__close__icon {
  position: relative;
  top: 7px;
  right: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  transform: rotate(45deg);
}

.walletconnect-modal__close__line1 {
  position: absolute;
  width: 100%;
  border: 1px solid rgb(48, 52, 59);
}

.walletconnect-modal__close__line2 {
  position: absolute;
  width: 100%;
  border: 1px solid rgb(48, 52, 59);
  transform: rotate(90deg);
}

.walletconnect-qrcode__base {
  -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
  background: rgba(37, 41, 46, 0.95);
  height: 100%;
  left: 0;
  pointer-events: auto;
  position: fixed;
  top: 0;
  transition: 0.4s cubic-bezier(0.19, 1, 0.22, 1);
  width: 100%;
  will-change: opacity;
  padding: 40px;
  box-sizing: border-box;
}

.walletconnect-qrcode__text {
  color: rgba(60, 66, 82, 0.6);
  font-size: 16px;
  font-weight: 600;
  letter-spacing: 0;
  line-height: 1.1875em;
  margin: 10px 0 20px 0;
  text-align: center;
  width: 100%;
}

@media only screen and (max-width: 768px) {
  .walletconnect-qrcode__text {
    font-size: 4vw;
  }
}

@media only screen and (max-width: 320px) {
  .walletconnect-qrcode__text {
    font-size: 14px;
  }
}

.walletconnect-qrcode__image {
  width: calc(100% - 30px);
  box-sizing: border-box;
  cursor: none;
  margin: 0 auto;
}

.walletconnect-qrcode__notification {
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
  font-size: 16px;
  padding: 16px 20px;
  border-radius: 16px;
  text-align: center;
  transition: all 0.1s ease-in-out;
  background: white;
  color: black;
  margin-bottom: -60px;
  opacity: 0;
}

.walletconnect-qrcode__notification.notification__show {
  opacity: 1;
}

@media only screen and (max-width: 768px) {
  .walletconnect-modal__header {
    height: 130px;
  }
  .walletconnect-modal__base {
    overflow: auto;
  }
}

@media only screen and (min-device-width: 415px) and (max-width: 768px) {
  #content {
    max-width: 768px;
    box-sizing: border-box;
  }
}

@media only screen and (min-width: 375px) and (max-width: 415px) {
  #content {
    max-width: 414px;
    box-sizing: border-box;
  }
}

@media only screen and (min-width: 320px) and (max-width: 375px) {
  #content {
    max-width: 375px;
    box-sizing: border-box;
  }
}

@media only screen and (max-width: 320px) {
  #content {
    max-width: 320px;
    box-sizing: border-box;
  }
}

.walletconnect-modal__base {
  -webkit-font-smoothing: antialiased;
  background: #ffffff;
  border-radius: 24px;
  box-shadow: 0 10px 50px 5px rgba(0, 0, 0, 0.4);
  font-family: ui-rounded, "SF Pro Rounded", "SF Pro Text", medium-content-sans-serif-font,
    -apple-system, BlinkMacSystemFont, ui-sans-serif, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell,
    "Open Sans", "Helvetica Neue", sans-serif;
  margin-top: 41px;
  padding: 24px 24px 22px;
  pointer-events: auto;
  position: relative;
  text-align: center;
  transition: 0.4s cubic-bezier(0.19, 1, 0.22, 1);
  will-change: transform;
  overflow: visible;
  transform: translateY(-50%);
  top: 50%;
  max-width: 500px;
  margin: auto;
}

@media only screen and (max-width: 320px) {
  .walletconnect-modal__base {
    padding: 24px 12px;
  }
}

.walletconnect-modal__base .hidden {
  transform: translateY(150%);
  transition: 0.125s cubic-bezier(0.4, 0, 1, 1);
}

.walletconnect-modal__header {
  align-items: center;
  display: flex;
  height: 26px;
  left: 0;
  justify-content: space-between;
  position: absolute;
  top: -42px;
  width: 100%;
}

.walletconnect-modal__base .wc-logo {
  align-items: center;
  display: flex;
  height: 26px;
  margin-top: 15px;
  padding-bottom: 15px;
  pointer-events: auto;
}

.walletconnect-modal__base .wc-logo div {
  background-color: #3399ff;
  height: 21px;
  margin-right: 5px;
  mask-image: url("images/wc-logo.svg") center no-repeat;
  width: 32px;
}

.walletconnect-modal__base .wc-logo p {
  color: #ffffff;
  font-size: 20px;
  font-weight: 600;
  margin: 0;
}

.walletconnect-modal__base h2 {
  color: rgba(60, 66, 82, 0.6);
  font-size: 16px;
  font-weight: 600;
  letter-spacing: 0;
  line-height: 1.1875em;
  margin: 0 0 19px 0;
  text-align: center;
  width: 100%;
}

.walletconnect-modal__base__row {
  -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
  align-items: center;
  border-radius: 20px;
  cursor: pointer;
  display: flex;
  height: 56px;
  justify-content: space-between;
  padding: 0 15px;
  position: relative;
  margin: 0px 0px 8px;
  text-align: left;
  transition: 0.15s cubic-bezier(0.25, 0.46, 0.45, 0.94);
  will-change: transform;
  text-decoration: none;
}

.walletconnect-modal__base__row:hover {
  background: rgba(60, 66, 82, 0.06);
}

.walletconnect-modal__base__row:active {
  background: rgba(60, 66, 82, 0.06);
  transform: scale(0.975);
  transition: 0.1s cubic-bezier(0.25, 0.46, 0.45, 0.94);
}

.walletconnect-modal__base__row__h3 {
  color: #25292e;
  font-size: 20px;
  font-weight: 700;
  margin: 0;
  padding-bottom: 3px;
}

.walletconnect-modal__base__row__right {
  align-items: center;
  display: flex;
  justify-content: center;
}

.walletconnect-modal__base__row__right__app-icon {
  border-radius: 8px;
  height: 34px;
  margin: 0 11px 2px 0;
  width: 34px;
  background-size: 100%;
  box-shadow: 0 4px 12px 0 rgba(37, 41, 46, 0.25);
}

.walletconnect-modal__base__row__right__caret {
  height: 18px;
  opacity: 0.3;
  transition: 0.1s cubic-bezier(0.25, 0.46, 0.45, 0.94);
  width: 8px;
  will-change: opacity;
}

.walletconnect-modal__base__row:hover .caret,
.walletconnect-modal__base__row:active .caret {
  opacity: 0.6;
}

.walletconnect-modal__mobile__toggle {
  width: 80%;
  display: flex;
  margin: 0 auto;
  position: relative;
  overflow: hidden;
  border-radius: 8px;
  margin-bottom: 18px;
  background: #d4d5d9;
}

.walletconnect-modal__single_wallet {
  display: flex;
  justify-content: center;
  margin-top: 7px;
  margin-bottom: 18px;
}

.walletconnect-modal__single_wallet a {
  cursor: pointer;
  color: rgb(64, 153, 255);
  font-size: 21px;
  font-weight: 800;
  text-decoration: none !important;
  margin: 0 auto;
}

.walletconnect-modal__mobile__toggle_selector {
  width: calc(50% - 8px);
  background: white;
  position: absolute;
  border-radius: 5px;
  height: calc(100% - 8px);
  top: 4px;
  transition: all 0.2s ease-in-out;
  transform: translate3d(4px, 0, 0);
}

.walletconnect-modal__mobile__toggle.right__selected .walletconnect-modal__mobile__toggle_selector {
  transform: translate3d(calc(100% + 12px), 0, 0);
}

.walletconnect-modal__mobile__toggle a {
  font-size: 12px;
  width: 50%;
  text-align: center;
  padding: 8px;
  margin: 0;
  font-weight: 600;
  z-index: 1;
}

.walletconnect-modal__footer {
  display: flex;
  justify-content: center;
  margin-top: 20px;
}

@media only screen and (max-width: 768px) {
  .walletconnect-modal__footer {
    margin-top: 5vw;
  }
}

.walletconnect-modal__footer a {
  cursor: pointer;
  color: #898d97;
  font-size: 15px;
  margin: 0 auto;
}

@media only screen and (max-width: 320px) {
  .walletconnect-modal__footer a {
    font-size: 14px;
  }
}

.walletconnect-connect__buttons__wrapper {
  max-height: 44vh;
}

.walletconnect-connect__buttons__wrapper__android {
  margin: 50% 0;
}

.walletconnect-connect__buttons__wrapper__wrap {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  margin: 10px 0;
}

@media only screen and (min-width: 768px) {
  .walletconnect-connect__buttons__wrapper__wrap {
    margin-top: 40px;
  }
}

.walletconnect-connect__button {
  background-color: rgb(64, 153, 255);
  padding: 12px;
  border-radius: 8px;
  text-decoration: none;
  color: rgb(255, 255, 255);
  font-weight: 500;
}

.walletconnect-connect__button__icon_anchor {
  cursor: pointer;
  display: flex;
  justify-content: flex-start;
  align-items: center;
  margin: 8px;
  width: 42px;
  justify-self: center;
  flex-direction: column;
  text-decoration: none !important;
}

@media only screen and (max-width: 320px) {
  .walletconnect-connect__button__icon_anchor {
    margin: 4px;
  }
}

.walletconnect-connect__button__icon {
  border-radius: 10px;
  height: 42px;
  margin: 0;
  width: 42px;
  background-size: cover !important;
  box-shadow: 0 4px 12px 0 rgba(37, 41, 46, 0.25);
}

.walletconnect-connect__button__text {
  color: #424952;
  font-size: 2.7vw;
  text-decoration: none !important;
  padding: 0;
  margin-top: 1.8vw;
  font-weight: 600;
}

@media only screen and (min-width: 768px) {
  .walletconnect-connect__button__text {
    font-size: 16px;
    margin-top: 12px;
  }
}

.walletconnect-search__input {
  border: none;
  background: #d4d5d9;
  border-style: none;
  padding: 8px 16px;
  outline: none;
  font-style: normal;
  font-stretch: normal;
  font-size: 16px;
  font-style: normal;
  font-stretch: normal;
  line-height: normal;
  letter-spacing: normal;
  text-align: left;
  border-radius: 8px;
  width: calc(100% - 16px);
  margin: 0;
  margin-bottom: 8px;
}
`;typeof Symbol<"u"&&(Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator")));typeof Symbol<"u"&&(Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator")));function L0(e,t){try{var r=e()}catch(n){return t(n)}return r&&r.then?r.then(void 0,t):r}var U0="data:image/svg+xml,%3Csvg height='185' viewBox='0 0 300 185' width='300' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='m61.4385429 36.2562612c48.9112241-47.8881663 128.2119871-47.8881663 177.1232091 0l5.886545 5.7634174c2.445561 2.3944081 2.445561 6.2765112 0 8.6709204l-20.136695 19.715503c-1.222781 1.1972051-3.2053 1.1972051-4.428081 0l-8.100584-7.9311479c-34.121692-33.4079817-89.443886-33.4079817-123.5655788 0l-8.6750562 8.4936051c-1.2227816 1.1972041-3.205301 1.1972041-4.4280806 0l-20.1366949-19.7155031c-2.4455612-2.3944092-2.4455612-6.2765122 0-8.6709204zm218.7677961 40.7737449 17.921697 17.546897c2.445549 2.3943969 2.445563 6.2764769.000031 8.6708899l-80.810171 79.121134c-2.445544 2.394426-6.410582 2.394453-8.85616.000062-.00001-.00001-.000022-.000022-.000032-.000032l-57.354143-56.154572c-.61139-.598602-1.60265-.598602-2.21404 0-.000004.000004-.000007.000008-.000011.000011l-57.3529212 56.154531c-2.4455368 2.394432-6.4105755 2.394472-8.8561612.000087-.0000143-.000014-.0000296-.000028-.0000449-.000044l-80.81241943-79.122185c-2.44556021-2.394408-2.44556021-6.2765115 0-8.6709197l17.92172963-17.5468673c2.4455602-2.3944082 6.4105989-2.3944082 8.8561602 0l57.3549775 56.155357c.6113908.598602 1.602649.598602 2.2140398 0 .0000092-.000009.0000174-.000017.0000265-.000024l57.3521031-56.155333c2.445505-2.3944633 6.410544-2.3945531 8.856161-.0002.000034.0000336.000068.0000673.000101.000101l57.354902 56.155432c.61139.598601 1.60265.598601 2.21404 0l57.353975-56.1543249c2.445561-2.3944092 6.410599-2.3944092 8.85616 0z' fill='%233b99fc'/%3E%3C/svg%3E",q0="WalletConnect",H0=300,D0="rgb(64, 153, 255)",Va="walletconnect-wrapper",ko="walletconnect-style-sheet",Ja="walletconnect-qrcode-modal",$0="walletconnect-qrcode-close",Ga="walletconnect-qrcode-text",F0="walletconnect-connect-button";function W0(e){return I.createElement("div",{className:"walletconnect-modal__header"},I.createElement("img",{src:U0,className:"walletconnect-modal__headerLogo"}),I.createElement("p",null,q0),I.createElement("div",{className:"walletconnect-modal__close__wrapper",onClick:e.onClose},I.createElement("div",{id:$0,className:"walletconnect-modal__close__icon"},I.createElement("div",{className:"walletconnect-modal__close__line1"}),I.createElement("div",{className:"walletconnect-modal__close__line2"}))))}function z0(e){return I.createElement("a",{className:"walletconnect-connect__button",href:e.href,id:F0+"-"+e.name,onClick:e.onClick,rel:"noopener noreferrer",style:{backgroundColor:e.color},target:"_blank"},e.name)}var j0="data:image/svg+xml,%3Csvg fill='none' height='18' viewBox='0 0 8 18' width='8' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath clip-rule='evenodd' d='m.586301.213898c-.435947.33907-.5144813.967342-.175411 1.403292l4.87831 6.27212c.28087.36111.28087.86677 0 1.22788l-4.878311 6.27211c-.33907.436-.260536 1.0642.175412 1.4033.435949.3391 1.064219.2605 1.403289-.1754l4.87832-6.2721c.84259-1.08336.84259-2.60034 0-3.68367l-4.87832-6.27212c-.33907-.4359474-.96734-.514482-1.403289-.175412z' fill='%233c4252' fill-rule='evenodd'/%3E%3C/svg%3E";function K0(e){var t=e.color,r=e.href,n=e.name,i=e.logo,o=e.onClick;return I.createElement("a",{className:"walletconnect-modal__base__row",href:r,onClick:o,rel:"noopener noreferrer",target:"_blank"},I.createElement("h3",{className:"walletconnect-modal__base__row__h3"},n),I.createElement("div",{className:"walletconnect-modal__base__row__right"},I.createElement("div",{className:"walletconnect-modal__base__row__right__app-icon",style:{background:"url('"+i+"') "+t,backgroundSize:"100%"}}),I.createElement("img",{src:j0,className:"walletconnect-modal__base__row__right__caret"})))}function V0(e){var t=e.color,r=e.href,n=e.name,i=e.logo,o=e.onClick,c=window.innerWidth<768?(n.length>8?2.5:2.7)+"vw":"inherit";return I.createElement("a",{className:"walletconnect-connect__button__icon_anchor",href:r,onClick:o,rel:"noopener noreferrer",target:"_blank"},I.createElement("div",{className:"walletconnect-connect__button__icon",style:{background:"url('"+i+"') "+t,backgroundSize:"100%"}}),I.createElement("div",{style:{fontSize:c},className:"walletconnect-connect__button__text"},n))}var J0=5,dn=12;function G0(e){var t=Oe.isAndroid(),r=I.useState(""),n=r[0],i=r[1],o=I.useState(""),c=o[0],f=o[1],l=I.useState(1),p=l[0],d=l[1],y=c?e.links.filter(function(A){return A.name.toLowerCase().includes(c.toLowerCase())}):e.links,k=e.errorMessage,R=c||y.length>J0,T=Math.ceil(y.length/dn),B=[(p-1)*dn+1,p*dn],b=y.length?y.filter(function(A,P){return P+1>=B[0]&&P+1<=B[1]}):[],M=!t&&T>1,C=void 0;function E(A){i(A.target.value),clearTimeout(C),A.target.value?C=setTimeout(function(){f(A.target.value),d(1)},1e3):(i(""),f(""),d(1))}return I.createElement("div",null,I.createElement("p",{id:Ga,className:"walletconnect-qrcode__text"},t?e.text.connect_mobile_wallet:e.text.choose_preferred_wallet),!t&&I.createElement("input",{className:"walletconnect-search__input",placeholder:"Search",value:n,onChange:E}),I.createElement("div",{className:"walletconnect-connect__buttons__wrapper"+(t?"__android":R&&y.length?"__wrap":"")},t?I.createElement(z0,{name:e.text.connect,color:D0,href:e.uri,onClick:I.useCallback(function(){Oe.saveMobileLinkInfo({name:"Unknown",href:e.uri})},[])}):b.length?b.map(function(A){var P=A.color,N=A.name,D=A.shortName,H=A.logo,Z=Oe.formatIOSMobile(e.uri,A),w=I.useCallback(function(){Oe.saveMobileLinkInfo({name:N,href:Z})},[b]);return R?I.createElement(V0,{color:P,href:Z,name:D||N,logo:H,onClick:w}):I.createElement(K0,{color:P,href:Z,name:N,logo:H,onClick:w})}):I.createElement(I.Fragment,null,I.createElement("p",null,k.length?e.errorMessage:!!e.links.length&&!y.length?e.text.no_wallets_found:e.text.loading))),M&&I.createElement("div",{className:"walletconnect-modal__footer"},Array(T).fill(0).map(function(A,P){var N=P+1,D=p===N;return I.createElement("a",{style:{margin:"auto 10px",fontWeight:D?"bold":"normal"},onClick:function(){return d(N)}},N)})))}function Y0(e){var t=!!e.message.trim();return I.createElement("div",{className:"walletconnect-qrcode__notification"+(t?" notification__show":"")},e.message)}var Z0=function(e){try{var t="";return Promise.resolve(Ka.toString(e,{margin:0,type:"svg"})).then(function(r){return typeof r=="string"&&(t=r.replace("<svg",'<svg class="walletconnect-qrcode__image"')),t})}catch(r){return Promise.reject(r)}};function Q0(e){var t=I.useState(""),r=t[0],n=t[1],i=I.useState(""),o=i[0],c=i[1];I.useEffect(function(){try{return Promise.resolve(Z0(e.uri)).then(function(l){c(l)})}catch(l){Promise.reject(l)}},[]);var f=function(){var l=P0(e.uri);l?(n(e.text.copied_to_clipboard),setInterval(function(){return n("")},1200)):(n("Error"),setInterval(function(){return n("")},1200))};return I.createElement("div",null,I.createElement("p",{id:Ga,className:"walletconnect-qrcode__text"},e.text.scan_qrcode_with_wallet),I.createElement("div",{dangerouslySetInnerHTML:{__html:o}}),I.createElement("div",{className:"walletconnect-modal__footer"},I.createElement("a",{onClick:f},e.text.copy_to_clipboard)),I.createElement(Y0,{message:r}))}function X0(e){var t=Oe.isAndroid(),r=Oe.isMobile(),n=r?e.qrcodeModalOptions&&e.qrcodeModalOptions.mobileLinks?e.qrcodeModalOptions.mobileLinks:void 0:e.qrcodeModalOptions&&e.qrcodeModalOptions.desktopLinks?e.qrcodeModalOptions.desktopLinks:void 0,i=I.useState(!1),o=i[0],c=i[1],f=I.useState(!1),l=f[0],p=f[1],d=I.useState(!r),y=d[0],k=d[1],R={mobile:r,text:e.text,uri:e.uri,qrcodeModalOptions:e.qrcodeModalOptions},T=I.useState(""),B=T[0],b=T[1],M=I.useState(!1),C=M[0],E=M[1],A=I.useState([]),P=A[0],N=A[1],D=I.useState(""),H=D[0],Z=D[1],w=function(){l||o||n&&!n.length||P.length>0||I.useEffect(function(){var u=function(){try{if(t)return Promise.resolve();c(!0);var h=L0(function(){var g=e.qrcodeModalOptions&&e.qrcodeModalOptions.registryUrl?e.qrcodeModalOptions.registryUrl:Oe.getWalletRegistryUrl();return Promise.resolve(fetch(g)).then(function(m){return Promise.resolve(m.json()).then(function(x){var S=x.listings,_=r?"mobile":"desktop",a=Oe.getMobileLinkRegistry(Oe.formatMobileRegistry(S,_),n);c(!1),p(!0),Z(a.length?"":e.text.no_supported_wallets),N(a);var v=a.length===1;v&&(b(Oe.formatIOSMobile(e.uri,a[0])),k(!0)),E(v)})})},function(g){c(!1),p(!0),Z(e.text.something_went_wrong),console.error(g)});return Promise.resolve(h&&h.then?h.then(function(){}):void 0)}catch(g){return Promise.reject(g)}};u()})};w();var s=r?y:!y;return I.createElement("div",{id:Ja,className:"walletconnect-qrcode__base animated fadeIn"},I.createElement("div",{className:"walletconnect-modal__base"},I.createElement(W0,{onClose:e.onClose}),C&&y?I.createElement("div",{className:"walletconnect-modal__single_wallet"},I.createElement("a",{onClick:function(){return Oe.saveMobileLinkInfo({name:P[0].name,href:B})},href:B,rel:"noopener noreferrer",target:"_blank"},e.text.connect_with+" "+(C?P[0].name:"")+" \u203A")):t||o||!o&&P.length?I.createElement("div",{className:"walletconnect-modal__mobile__toggle"+(s?" right__selected":"")},I.createElement("div",{className:"walletconnect-modal__mobile__toggle_selector"}),r?I.createElement(I.Fragment,null,I.createElement("a",{onClick:function(){return k(!1),w()}},e.text.mobile),I.createElement("a",{onClick:function(){return k(!0)}},e.text.qrcode)):I.createElement(I.Fragment,null,I.createElement("a",{onClick:function(){return k(!0)}},e.text.qrcode),I.createElement("a",{onClick:function(){return k(!1),w()}},e.text.desktop))):null,I.createElement("div",null,y||!t&&!o&&!P.length?I.createElement(Q0,Object.assign({},R)):I.createElement(G0,Object.assign({},R,{links:P,errorMessage:H})))))}var ed={choose_preferred_wallet:"W\xE4hle bevorzugte Wallet",connect_mobile_wallet:"Verbinde mit Mobile Wallet",scan_qrcode_with_wallet:"Scanne den QR-code mit einer WalletConnect kompatiblen Wallet",connect:"Verbinden",qrcode:"QR-Code",mobile:"Mobile",desktop:"Desktop",copy_to_clipboard:"In die Zwischenablage kopieren",copied_to_clipboard:"In die Zwischenablage kopiert!",connect_with:"Verbinden mit Hilfe von",loading:"Laden...",something_went_wrong:"Etwas ist schief gelaufen",no_supported_wallets:"Es gibt noch keine unterst\xFCtzten Wallet",no_wallets_found:"keine Wallet gefunden"},td={choose_preferred_wallet:"Choose your preferred wallet",connect_mobile_wallet:"Connect to Mobile Wallet",scan_qrcode_with_wallet:"Scan QR code with a WalletConnect-compatible wallet",connect:"Connect",qrcode:"QR Code",mobile:"Mobile",desktop:"Desktop",copy_to_clipboard:"Copy to clipboard",copied_to_clipboard:"Copied to clipboard!",connect_with:"Connect with",loading:"Loading...",something_went_wrong:"Something went wrong",no_supported_wallets:"There are no supported wallets yet",no_wallets_found:"No wallets found"},rd={choose_preferred_wallet:"Elige tu billetera preferida",connect_mobile_wallet:"Conectar a billetera m\xF3vil",scan_qrcode_with_wallet:"Escanea el c\xF3digo QR con una billetera compatible con WalletConnect",connect:"Conectar",qrcode:"C\xF3digo QR",mobile:"M\xF3vil",desktop:"Desktop",copy_to_clipboard:"Copiar",copied_to_clipboard:"Copiado!",connect_with:"Conectar mediante",loading:"Cargando...",something_went_wrong:"Algo sali\xF3 mal",no_supported_wallets:"Todav\xEDa no hay billeteras compatibles",no_wallets_found:"No se encontraron billeteras"},nd={choose_preferred_wallet:"Choisissez votre portefeuille pr\xE9f\xE9r\xE9",connect_mobile_wallet:"Se connecter au portefeuille mobile",scan_qrcode_with_wallet:"Scannez le QR code avec un portefeuille compatible WalletConnect",connect:"Se connecter",qrcode:"QR Code",mobile:"Mobile",desktop:"Desktop",copy_to_clipboard:"Copier",copied_to_clipboard:"Copi\xE9!",connect_with:"Connectez-vous \xE0 l'aide de",loading:"Chargement...",something_went_wrong:"Quelque chose a mal tourn\xE9",no_supported_wallets:"Il n'y a pas encore de portefeuilles pris en charge",no_wallets_found:"Aucun portefeuille trouv\xE9"},id={choose_preferred_wallet:"\uC6D0\uD558\uB294 \uC9C0\uAC11\uC744 \uC120\uD0DD\uD558\uC138\uC694",connect_mobile_wallet:"\uBAA8\uBC14\uC77C \uC9C0\uAC11\uACFC \uC5F0\uACB0",scan_qrcode_with_wallet:"WalletConnect \uC9C0\uC6D0 \uC9C0\uAC11\uC5D0\uC11C QR\uCF54\uB4DC\uB97C \uC2A4\uCE94\uD558\uC138\uC694",connect:"\uC5F0\uACB0",qrcode:"QR \uCF54\uB4DC",mobile:"\uBAA8\uBC14\uC77C",desktop:"\uB370\uC2A4\uD06C\uD0D1",copy_to_clipboard:"\uD074\uB9BD\uBCF4\uB4DC\uC5D0 \uBCF5\uC0AC",copied_to_clipboard:"\uD074\uB9BD\uBCF4\uB4DC\uC5D0 \uBCF5\uC0AC\uB418\uC5C8\uC2B5\uB2C8\uB2E4!",connect_with:"\uC640 \uC5F0\uACB0\uD558\uB2E4",loading:"\uB85C\uB4DC \uC911...",something_went_wrong:"\uBB38\uC81C\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.",no_supported_wallets:"\uC544\uC9C1 \uC9C0\uC6D0\uB418\uB294 \uC9C0\uAC11\uC774 \uC5C6\uC2B5\uB2C8\uB2E4",no_wallets_found:"\uC9C0\uAC11\uC744 \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4"},od={choose_preferred_wallet:"Escolha sua carteira preferida",connect_mobile_wallet:"Conectar-se \xE0 carteira m\xF3vel",scan_qrcode_with_wallet:"Ler o c\xF3digo QR com uma carteira compat\xEDvel com WalletConnect",connect:"Conectar",qrcode:"C\xF3digo QR",mobile:"M\xF3vel",desktop:"Desktop",copy_to_clipboard:"Copiar",copied_to_clipboard:"Copiado!",connect_with:"Ligar por meio de",loading:"Carregamento...",something_went_wrong:"Algo correu mal",no_supported_wallets:"Ainda n\xE3o h\xE1 carteiras suportadas",no_wallets_found:"Nenhuma carteira encontrada"},sd={choose_preferred_wallet:"\u9009\u62E9\u4F60\u7684\u94B1\u5305",connect_mobile_wallet:"\u8FDE\u63A5\u81F3\u79FB\u52A8\u7AEF\u94B1\u5305",scan_qrcode_with_wallet:"\u4F7F\u7528\u517C\u5BB9 WalletConnect \u7684\u94B1\u5305\u626B\u63CF\u4E8C\u7EF4\u7801",connect:"\u8FDE\u63A5",qrcode:"\u4E8C\u7EF4\u7801",mobile:"\u79FB\u52A8",desktop:"\u684C\u9762",copy_to_clipboard:"\u590D\u5236\u5230\u526A\u8D34\u677F",copied_to_clipboard:"\u590D\u5236\u5230\u526A\u8D34\u677F\u6210\u529F\uFF01",connect_with:"\u901A\u8FC7\u4EE5\u4E0B\u65B9\u5F0F\u8FDE\u63A5",loading:"\u6B63\u5728\u52A0\u8F7D...",something_went_wrong:"\u51FA\u4E86\u95EE\u9898",no_supported_wallets:"\u76EE\u524D\u8FD8\u6CA1\u6709\u652F\u6301\u7684\u94B1\u5305",no_wallets_found:"\u6CA1\u6709\u627E\u5230\u94B1\u5305"},ad={choose_preferred_wallet:"\u06A9\u06CC\u0641 \u067E\u0648\u0644 \u0645\u0648\u0631\u062F \u0646\u0638\u0631 \u062E\u0648\u062F \u0631\u0627 \u0627\u0646\u062A\u062E\u0627\u0628 \u06A9\u0646\u06CC\u062F",connect_mobile_wallet:"\u0628\u0647 \u06A9\u06CC\u0641 \u067E\u0648\u0644 \u0645\u0648\u0628\u0627\u06CC\u0644 \u0648\u0635\u0644 \u0634\u0648\u06CC\u062F",scan_qrcode_with_wallet:"\u06A9\u062F QR \u0631\u0627 \u0628\u0627 \u06CC\u06A9 \u06A9\u06CC\u0641 \u067E\u0648\u0644 \u0633\u0627\u0632\u06AF\u0627\u0631 \u0628\u0627 WalletConnect \u0627\u0633\u06A9\u0646 \u06A9\u0646\u06CC\u062F",connect:"\u0627\u062A\u0635\u0627\u0644",qrcode:"\u06A9\u062F QR",mobile:"\u0633\u06CC\u0627\u0631",desktop:"\u062F\u0633\u06A9\u062A\u0627\u067E",copy_to_clipboard:"\u06A9\u067E\u06CC \u0628\u0647 \u06A9\u0644\u06CC\u067E \u0628\u0648\u0631\u062F",copied_to_clipboard:"\u062F\u0631 \u06A9\u0644\u06CC\u067E \u0628\u0648\u0631\u062F \u06A9\u067E\u06CC \u0634\u062F!",connect_with:"\u0627\u0631\u062A\u0628\u0627\u0637 \u0628\u0627",loading:"...\u0628\u0627\u0631\u06AF\u0630\u0627\u0631\u06CC",something_went_wrong:"\u0645\u0634\u06A9\u0644\u06CC \u067E\u06CC\u0634 \u0622\u0645\u062F",no_supported_wallets:"\u0647\u0646\u0648\u0632 \u0647\u06CC\u0686 \u06A9\u06CC\u0641 \u067E\u0648\u0644 \u067E\u0634\u062A\u06CC\u0628\u0627\u0646\u06CC \u0634\u062F\u0647 \u0627\u06CC \u0648\u062C\u0648\u062F \u0646\u062F\u0627\u0631\u062F",no_wallets_found:"\u0647\u06CC\u0686 \u06A9\u06CC\u0641 \u067E\u0648\u0644\u06CC \u067E\u06CC\u062F\u0627 \u0646\u0634\u062F"},Co={de:ed,en:td,es:rd,fr:nd,ko:id,pt:od,zh:sd,fa:ad};function cd(){var e=Oe.getDocumentOrThrow(),t=e.getElementById(ko);t&&e.head.removeChild(t);var r=e.createElement("style");r.setAttribute("id",ko),r.innerText=O0,e.head.appendChild(r)}function fd(){var e=Oe.getDocumentOrThrow(),t=e.createElement("div");return t.setAttribute("id",Va),e.body.appendChild(t),t}function Ya(){var e=Oe.getDocumentOrThrow(),t=e.getElementById(Ja);t&&(t.className=t.className.replace("fadeIn","fadeOut"),setTimeout(function(){var r=e.getElementById(Va);r&&e.body.removeChild(r)},H0))}function ud(e){return function(){Ya(),e&&e()}}function ld(){var e=Oe.getNavigatorOrThrow().language.split("-")[0]||"en";return Co[e]||Co.en}function hd(e,t,r){cd();var n=fd();I.render(I.createElement(X0,{text:ld(),uri:e,onClose:ud(t),qrcodeModalOptions:r}),n)}function dd(){Ya()}var Za=function(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"};function pd(e,t,r){console.log(e),Za()?N0(e):hd(e,t,r)}function gd(){Za()||dd()}var _d={open:pd,close:gd},vd=_d,Qa={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function i(l,p,d){this.fn=l,this.context=p,this.once=d||!1}function o(l,p,d,y,k){if(typeof d!="function")throw new TypeError("The listener must be a function");var R=new i(d,y||l,k),T=r?r+p:p;return l._events[T]?l._events[T].fn?l._events[T]=[l._events[T],R]:l._events[T].push(R):(l._events[T]=R,l._eventsCount++),l}function c(l,p){--l._eventsCount===0?l._events=new n:delete l._events[p]}function f(){this._events=new n,this._eventsCount=0}f.prototype.eventNames=function(){var p=[],d,y;if(this._eventsCount===0)return p;for(y in d=this._events)t.call(d,y)&&p.push(r?y.slice(1):y);return Object.getOwnPropertySymbols?p.concat(Object.getOwnPropertySymbols(d)):p},f.prototype.listeners=function(p){var d=r?r+p:p,y=this._events[d];if(!y)return[];if(y.fn)return[y.fn];for(var k=0,R=y.length,T=new Array(R);k<R;k++)T[k]=y[k].fn;return T},f.prototype.listenerCount=function(p){var d=r?r+p:p,y=this._events[d];return y?y.fn?1:y.length:0},f.prototype.emit=function(p,d,y,k,R,T){var B=r?r+p:p;if(!this._events[B])return!1;var b=this._events[B],M=arguments.length,C,E;if(b.fn){switch(b.once&&this.removeListener(p,b.fn,void 0,!0),M){case 1:return b.fn.call(b.context),!0;case 2:return b.fn.call(b.context,d),!0;case 3:return b.fn.call(b.context,d,y),!0;case 4:return b.fn.call(b.context,d,y,k),!0;case 5:return b.fn.call(b.context,d,y,k,R),!0;case 6:return b.fn.call(b.context,d,y,k,R,T),!0}for(E=1,C=new Array(M-1);E<M;E++)C[E-1]=arguments[E];b.fn.apply(b.context,C)}else{var A=b.length,P;for(E=0;E<A;E++)switch(b[E].once&&this.removeListener(p,b[E].fn,void 0,!0),M){case 1:b[E].fn.call(b[E].context);break;case 2:b[E].fn.call(b[E].context,d);break;case 3:b[E].fn.call(b[E].context,d,y);break;case 4:b[E].fn.call(b[E].context,d,y,k);break;default:if(!C)for(P=1,C=new Array(M-1);P<M;P++)C[P-1]=arguments[P];b[E].fn.apply(b[E].context,C)}}return!0},f.prototype.on=function(p,d,y){return o(this,p,d,y,!1)},f.prototype.once=function(p,d,y){return o(this,p,d,y,!0)},f.prototype.removeListener=function(p,d,y,k){var R=r?r+p:p;if(!this._events[R])return this;if(!d)return c(this,R),this;var T=this._events[R];if(T.fn)T.fn===d&&(!k||T.once)&&(!y||T.context===y)&&c(this,R);else{for(var B=0,b=[],M=T.length;B<M;B++)(T[B].fn!==d||k&&!T[B].once||y&&T[B].context!==y)&&b.push(T[B]);b.length?this._events[R]=b.length===1?b[0]:b:c(this,R)}return this},f.prototype.removeAllListeners=function(p){var d;return p?(d=r?r+p:p,this._events[d]&&c(this,d)):(this._events=new n,this._eventsCount=0),this},f.prototype.off=f.prototype.removeListener,f.prototype.addListener=f.prototype.on,f.prefixed=r,f.EventEmitter=f,e.exports=f})(Qa);const md=Qa.exports;var Xa={},yi={},bi={};Object.defineProperty(bi,"__esModule",{value:!0});var wd=function(){function e(t){this.type=t,this.bubbles=!1,this.cancelable=!1,this.loaded=0,this.lengthComputable=!1,this.total=0}return e}();bi.ProgressEvent=wd;var Nt={},Ir=Q&&Q.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(Nt,"__esModule",{value:!0});var yd=function(e){Ir(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(Error);Nt.SecurityError=yd;var bd=function(e){Ir(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(Error);Nt.InvalidStateError=bd;var xd=function(e){Ir(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(Error);Nt.NetworkError=xd;var Md=function(e){Ir(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(Error);Nt.SyntaxError=Md;var Yt={};Object.defineProperty(Yt,"__esModule",{value:!0});var Ed=function(){function e(){this.listeners={}}return e.prototype.addEventListener=function(t,r){t=t.toLowerCase(),this.listeners[t]=this.listeners[t]||[],this.listeners[t].push(r.handleEvent||r)},e.prototype.removeEventListener=function(t,r){if(t=t.toLowerCase(),!!this.listeners[t]){var n=this.listeners[t].indexOf(r.handleEvent||r);n<0||this.listeners[t].splice(n,1)}},e.prototype.dispatchEvent=function(t){var r=t.type.toLowerCase();if(t.target=this,this.listeners[r])for(var n=0,i=this.listeners[r];n<i.length;n++){var o=i[n];o.call(this,t)}var c=this["on"+r];return c&&c.call(this,t),!0},e}();Yt.XMLHttpRequestEventTarget=Ed;var xi={},Sd=Q&&Q.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(xi,"__esModule",{value:!0});var kd=Yt,Cd=function(e){Sd(t,e);function t(){var r=e.call(this)||this;return r._contentType=null,r._body=null,r._reset(),r}return t.prototype._reset=function(){this._contentType=null,this._body=null},t.prototype._setData=function(r){if(r!=null)if(typeof r=="string")r.length!==0&&(this._contentType="text/plain;charset=UTF-8"),this._body=new Buffer(r,"utf-8");else if(Buffer.isBuffer(r))this._body=r;else if(r instanceof ArrayBuffer){for(var n=new Buffer(r.byteLength),i=new Uint8Array(r),o=0;o<r.byteLength;o++)n[o]=i[o];this._body=n}else if(r.buffer&&r.buffer instanceof ArrayBuffer){for(var n=new Buffer(r.byteLength),c=r.byteOffset,i=new Uint8Array(r.buffer),o=0;o<r.byteLength;o++)n[o]=i[o+c];this._body=n}else throw new Error("Unsupported send() data "+r)},t.prototype._finalizeHeaders=function(r,n){this._contentType&&!n["content-type"]&&(r["Content-Type"]=this._contentType),this._body&&(r["Content-Length"]=this._body.length.toString())},t.prototype._startUpload=function(r){this._body&&r.write(this._body),r.end()},t}(kd.XMLHttpRequestEventTarget);xi.XMLHttpRequestUpload=Cd;var or={};(function(){function e(i,o,c,f){return this instanceof e?(this.domain=i||void 0,this.path=o||"/",this.secure=!!c,this.script=!!f,this):new e(i,o,c,f)}e.All=Object.freeze(Object.create(null)),or.CookieAccessInfo=e;function t(i,o,c){return i instanceof t?i:this instanceof t?(this.name=null,this.value=null,this.expiration_date=1/0,this.path=String(c||"/"),this.explicit_path=!1,this.domain=o||null,this.explicit_domain=!1,this.secure=!1,this.noscript=!1,i&&this.parse(i,o,c),this):new t(i,o,c)}or.Cookie=t,t.prototype.toString=function(){var o=[this.name+"="+this.value];return this.expiration_date!==1/0&&o.push("expires="+new Date(this.expiration_date).toGMTString()),this.domain&&o.push("domain="+this.domain),this.path&&o.push("path="+this.path),this.secure&&o.push("secure"),this.noscript&&o.push("httponly"),o.join("; ")},t.prototype.toValueString=function(){return this.name+"="+this.value};var r=/[:](?=\s*[a-zA-Z0-9_\-]+\s*[=])/g;t.prototype.parse=function(o,c,f){if(this instanceof t){var l=o.split(";").filter(function(R){return!!R}),p,d=l[0].match(/([^=]+)=([\s\S]*)/);if(!d){console.warn("Invalid cookie header encountered. Header: '"+o+"'");return}var y=d[1],k=d[2];if(typeof y!="string"||y.length===0||typeof k!="string"){console.warn("Unable to extract values from cookie header. Cookie: '"+o+"'");return}for(this.name=y,this.value=k,p=1;p<l.length;p+=1)switch(d=l[p].match(/([^=]+)(?:=([\s\S]*))?/),y=d[1].trim().toLowerCase(),k=d[2],y){case"httponly":this.noscript=!0;break;case"expires":this.expiration_date=k?Number(Date.parse(k)):1/0;break;case"path":this.path=k?k.trim():"",this.explicit_path=!0;break;case"domain":this.domain=k?k.trim():"",this.explicit_domain=!!this.domain;break;case"secure":this.secure=!0;break}return this.explicit_path||(this.path=f||"/"),this.explicit_domain||(this.domain=c),this}return new t().parse(o,c,f)},t.prototype.matches=function(o){return o===e.All?!0:!(this.noscript&&o.script||this.secure&&!o.secure||!this.collidesWith(o))},t.prototype.collidesWith=function(o){if(this.path&&!o.path||this.domain&&!o.domain||this.path&&o.path.indexOf(this.path)!==0||this.explicit_path&&o.path.indexOf(this.path)!==0)return!1;var c=o.domain&&o.domain.replace(/^[\.]/,""),f=this.domain&&this.domain.replace(/^[\.]/,"");if(f===c)return!0;if(f){if(!this.explicit_domain)return!1;var l=c.indexOf(f);return!(l===-1||l!==c.length-f.length)}return!0};function n(){var i,o,c;return this instanceof n?(i=Object.create(null),this.setCookie=function(l,p,d){var y,k;if(l=new t(l,p,d),y=l.expiration_date<=Date.now(),i[l.name]!==void 0){for(o=i[l.name],k=0;k<o.length;k+=1)if(c=o[k],c.collidesWith(l))return y?(o.splice(k,1),o.length===0&&delete i[l.name],!1):(o[k]=l,l);return y?!1:(o.push(l),l)}return y?!1:(i[l.name]=[l],i[l.name])},this.getCookie=function(l,p){var d,y;if(o=i[l],!!o)for(y=0;y<o.length;y+=1){if(d=o[y],d.expiration_date<=Date.now()){o.length===0&&delete i[d.name];continue}if(d.matches(p))return d}},this.getCookies=function(l){var p=[],d,y;for(d in i)y=this.getCookie(d,l),y&&p.push(y);return p.toString=function(){return p.join(":")},p.toValueString=function(){return p.map(function(R){return R.toValueString()}).join("; ")},p},this):new n}or.CookieJar=n,n.prototype.setCookies=function(o,c,f){o=Array.isArray(o)?o:o.split(r);var l=[],p,d;for(o=o.map(function(y){return new t(y,c,f)}),p=0;p<o.length;p+=1)d=o[p],this.setCookie(d,c,f)&&l.push(d);return l}})();var Td=Q&&Q.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ad=Q&&Q.__assign||Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e};Object.defineProperty(yi,"__esModule",{value:!0});var On=$e,ec=$e,To=$e,pn=$e,Ao=bi,nr=Nt,Rd=Yt,Ro=xi,Bo=or,Pr=function(e){Td(t,e);function t(r){r===void 0&&(r={});var n=e.call(this)||this;return n.UNSENT=t.UNSENT,n.OPENED=t.OPENED,n.HEADERS_RECEIVED=t.HEADERS_RECEIVED,n.LOADING=t.LOADING,n.DONE=t.DONE,n.onreadystatechange=null,n.readyState=t.UNSENT,n.response=null,n.responseText="",n.responseType="",n.status=0,n.statusText="",n.timeout=0,n.upload=new Ro.XMLHttpRequestUpload,n.responseUrl="",n.withCredentials=!1,n._method=null,n._url=null,n._sync=!1,n._headers={},n._loweredHeaders={},n._mimeOverride=null,n._request=null,n._response=null,n._responseParts=null,n._responseHeaders=null,n._aborting=null,n._error=null,n._loadedBytes=0,n._totalBytes=0,n._lengthComputable=!1,n._restrictedMethods={CONNECT:!0,TRACE:!0,TRACK:!0},n._restrictedHeaders={"accept-charset":!0,"accept-encoding":!0,"access-control-request-headers":!0,"access-control-request-method":!0,connection:!0,"content-length":!0,cookie:!0,cookie2:!0,date:!0,dnt:!0,expect:!0,host:!0,"keep-alive":!0,origin:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,via:!0},n._privateHeaders={"set-cookie":!0,"set-cookie2":!0},n._userAgent="Mozilla/5.0 ("+To.type()+" "+To.arch()+") node.js/"+process.versions.node+" v8/"+process.versions.v8,n._anonymous=r.anon||!1,n}return t.prototype.open=function(r,n,i,o,c){if(i===void 0&&(i=!0),r=r.toUpperCase(),this._restrictedMethods[r])throw new t.SecurityError("HTTP method "+r+" is not allowed in XHR");var f=this._parseUrl(n,o,c);this.readyState===t.HEADERS_RECEIVED||(this.readyState,t.LOADING),this._method=r,this._url=f,this._sync=!i,this._headers={},this._loweredHeaders={},this._mimeOverride=null,this._setReadyState(t.OPENED),this._request=null,this._response=null,this.status=0,this.statusText="",this._responseParts=[],this._responseHeaders=null,this._loadedBytes=0,this._totalBytes=0,this._lengthComputable=!1},t.prototype.setRequestHeader=function(r,n){if(this.readyState!==t.OPENED)throw new t.InvalidStateError("XHR readyState must be OPENED");var i=r.toLowerCase();if(this._restrictedHeaders[i]||/^sec-/.test(i)||/^proxy-/.test(i)){console.warn('Refused to set unsafe header "'+r+'"');return}n=n.toString(),this._loweredHeaders[i]!=null?(r=this._loweredHeaders[i],this._headers[r]=this._headers[r]+", "+n):(this._loweredHeaders[i]=r,this._headers[r]=n)},t.prototype.send=function(r){if(this.readyState!==t.OPENED)throw new t.InvalidStateError("XHR readyState must be OPENED");if(this._request)throw new t.InvalidStateError("send() already called");switch(this._url.protocol){case"file:":return this._sendFile(r);case"http:":case"https:":return this._sendHttp(r);default:throw new t.NetworkError("Unsupported protocol "+this._url.protocol)}},t.prototype.abort=function(){this._request!=null&&(this._request.abort(),this._setError(),this._dispatchProgress("abort"),this._dispatchProgress("loadend"))},t.prototype.getResponseHeader=function(r){if(this._responseHeaders==null||r==null)return null;var n=r.toLowerCase();return this._responseHeaders.hasOwnProperty(n)?this._responseHeaders[r.toLowerCase()]:null},t.prototype.getAllResponseHeaders=function(){var r=this;return this._responseHeaders==null?"":Object.keys(this._responseHeaders).map(function(n){return n+": "+r._responseHeaders[n]}).join(`\r
`)},t.prototype.overrideMimeType=function(r){if(this.readyState===t.LOADING||this.readyState===t.DONE)throw new t.InvalidStateError("overrideMimeType() not allowed in LOADING or DONE");this._mimeOverride=r.toLowerCase()},t.prototype.nodejsSet=function(r){if(this.nodejsHttpAgent=r.httpAgent||this.nodejsHttpAgent,this.nodejsHttpsAgent=r.httpsAgent||this.nodejsHttpsAgent,r.hasOwnProperty("baseUrl")){if(r.baseUrl!=null){var n=pn.parse(r.baseUrl,!1,!0);if(!n.protocol)throw new t.SyntaxError("baseUrl must be an absolute URL")}this.nodejsBaseUrl=r.baseUrl}},t.nodejsSet=function(r){t.prototype.nodejsSet(r)},t.prototype._setReadyState=function(r){this.readyState=r,this.dispatchEvent(new Ao.ProgressEvent("readystatechange"))},t.prototype._sendFile=function(r){throw new Error("Protocol file: not implemented")},t.prototype._sendHttp=function(r){if(this._sync)throw new Error("Synchronous XHR processing not implemented");r&&(this._method==="GET"||this._method==="HEAD")?(console.warn("Discarding entity body for "+this._method+" requests"),r=null):r=r||"",this.upload._setData(r),this._finalizeHeaders(),this._sendHxxpRequest()},t.prototype._sendHxxpRequest=function(){var r=this;if(this.withCredentials){var n=t.cookieJar.getCookies(Bo.CookieAccessInfo(this._url.hostname,this._url.pathname,this._url.protocol==="https:")).toValueString();this._headers.cookie=this._headers.cookie2=n}var i=this._url.protocol==="http:"?[On,this.nodejsHttpAgent]:[ec,this.nodejsHttpsAgent],o=i[0],c=i[1],f=o.request.bind(o),l=f({hostname:this._url.hostname,port:+this._url.port,path:this._url.path,auth:this._url.auth,method:this._method,headers:this._headers,agent:c});this._request=l,this.timeout&&l.setTimeout(this.timeout,function(){return r._onHttpTimeout(l)}),l.on("response",function(p){return r._onHttpResponse(l,p)}),l.on("error",function(p){return r._onHttpRequestError(l,p)}),this.upload._startUpload(l),this._request===l&&this._dispatchProgress("loadstart")},t.prototype._finalizeHeaders=function(){this._headers=Ad({},this._headers,{Connection:"keep-alive",Host:this._url.host,"User-Agent":this._userAgent},this._anonymous?{Referer:"about:blank"}:{}),this.upload._finalizeHeaders(this._headers,this._loweredHeaders)},t.prototype._onHttpResponse=function(r,n){var i=this;if(this._request===r){if(this.withCredentials&&(n.headers["set-cookie"]||n.headers["set-cookie2"])&&t.cookieJar.setCookies(n.headers["set-cookie"]||n.headers["set-cookie2"]),[301,302,303,307,308].indexOf(n.statusCode)>=0){this._url=this._parseUrl(n.headers.location),this._method="GET",this._loweredHeaders["content-type"]&&(delete this._headers[this._loweredHeaders["content-type"]],delete this._loweredHeaders["content-type"]),this._headers["Content-Type"]!=null&&delete this._headers["Content-Type"],delete this._headers["Content-Length"],this.upload._reset(),this._finalizeHeaders(),this._sendHxxpRequest();return}this._response=n,this._response.on("data",function(c){return i._onHttpResponseData(n,c)}),this._response.on("end",function(){return i._onHttpResponseEnd(n)}),this._response.on("close",function(){return i._onHttpResponseClose(n)}),this.responseUrl=this._url.href.split("#")[0],this.status=n.statusCode,this.statusText=On.STATUS_CODES[this.status],this._parseResponseHeaders(n);var o=this._responseHeaders["content-length"]||"";this._totalBytes=+o,this._lengthComputable=!!o,this._setReadyState(t.HEADERS_RECEIVED)}},t.prototype._onHttpResponseData=function(r,n){this._response===r&&(this._responseParts.push(new Buffer(n)),this._loadedBytes+=n.length,this.readyState!==t.LOADING&&this._setReadyState(t.LOADING),this._dispatchProgress("progress"))},t.prototype._onHttpResponseEnd=function(r){this._response===r&&(this._parseResponse(),this._request=null,this._response=null,this._setReadyState(t.DONE),this._dispatchProgress("load"),this._dispatchProgress("loadend"))},t.prototype._onHttpResponseClose=function(r){if(this._response===r){var n=this._request;this._setError(),n.abort(),this._setReadyState(t.DONE),this._dispatchProgress("error"),this._dispatchProgress("loadend")}},t.prototype._onHttpTimeout=function(r){this._request===r&&(this._setError(),r.abort(),this._setReadyState(t.DONE),this._dispatchProgress("timeout"),this._dispatchProgress("loadend"))},t.prototype._onHttpRequestError=function(r,n){this._request===r&&(this._setError(),r.abort(),this._setReadyState(t.DONE),this._dispatchProgress("error"),this._dispatchProgress("loadend"))},t.prototype._dispatchProgress=function(r){var n=new t.ProgressEvent(r);n.lengthComputable=this._lengthComputable,n.loaded=this._loadedBytes,n.total=this._totalBytes,this.dispatchEvent(n)},t.prototype._setError=function(){this._request=null,this._response=null,this._responseHeaders=null,this._responseParts=null},t.prototype._parseUrl=function(r,n,i){var o=this.nodejsBaseUrl==null?r:pn.resolve(this.nodejsBaseUrl,r),c=pn.parse(o,!1,!0);c.hash=null;var f=(c.auth||"").split(":"),l=f[0],p=f[1];return(l||p||n||i)&&(c.auth=(n||l||"")+":"+(i||p||"")),c},t.prototype._parseResponseHeaders=function(r){this._responseHeaders={};for(var n in r.headers){var i=n.toLowerCase();this._privateHeaders[i]||(this._responseHeaders[i]=r.headers[n])}this._mimeOverride!=null&&(this._responseHeaders["content-type"]=this._mimeOverride)},t.prototype._parseResponse=function(){var r=Buffer.concat(this._responseParts);switch(this._responseParts=null,this.responseType){case"json":this.responseText=null;try{this.response=JSON.parse(r.toString("utf-8"))}catch{this.response=null}return;case"buffer":this.responseText=null,this.response=r;return;case"arraybuffer":this.responseText=null;for(var n=new ArrayBuffer(r.length),i=new Uint8Array(n),o=0;o<r.length;o++)i[o]=r[o];this.response=n;return;case"text":default:try{this.responseText=r.toString(this._parseResponseEncoding())}catch{this.responseText=r.toString("binary")}this.response=this.responseText}},t.prototype._parseResponseEncoding=function(){return/;\s*charset=(.*)$/.exec(this._responseHeaders["content-type"]||"")[1]||"utf-8"},t.ProgressEvent=Ao.ProgressEvent,t.InvalidStateError=nr.InvalidStateError,t.NetworkError=nr.NetworkError,t.SecurityError=nr.SecurityError,t.SyntaxError=nr.SyntaxError,t.XMLHttpRequestUpload=Ro.XMLHttpRequestUpload,t.UNSENT=0,t.OPENED=1,t.HEADERS_RECEIVED=2,t.LOADING=3,t.DONE=4,t.cookieJar=Bo.CookieJar(),t}(Rd.XMLHttpRequestEventTarget);yi.XMLHttpRequest=Pr;Pr.prototype.nodejsHttpAgent=On.globalAgent;Pr.prototype.nodejsHttpsAgent=ec.globalAgent;Pr.prototype.nodejsBaseUrl=null;(function(e){function t(n){for(var i in n)e.hasOwnProperty(i)||(e[i]=n[i])}Object.defineProperty(e,"__esModule",{value:!0}),t(yi);var r=Yt;e.XMLHttpRequestEventTarget=r.XMLHttpRequestEventTarget})(Xa);const Bd=ws("XMLHttpRequest")||Xa.XMLHttpRequest;class Id extends md{constructor(t){super(),this.url=t}formatError(t,r,n=-1){return{error:{message:r,code:n},id:t.id,jsonrpc:t.jsonrpc}}send(t,r){return new Promise(n=>{if(t.method==="eth_subscribe"){const f=this.formatError(t,"Subscriptions are not supported by this HTTP endpoint");return this.emit("error",f),n(f)}const i=new Bd;let o=!1;const c=(f,l)=>{if(!o)if(i.abort(),o=!0,r)r(f,l);else{const{id:p,jsonrpc:d}=t,y=f?{id:p,jsonrpc:d,error:{message:f.message,code:f.code}}:{id:p,jsonrpc:d,result:l};this.emit("payload",y),n(y)}};i.open("POST",this.url,!0),i.setRequestHeader("Content-Type","application/json"),i.timeout=60*1e3,i.onerror=c,i.ontimeout=c,i.onreadystatechange=()=>{if(i.readyState===4)try{const f=JSON.parse(i.responseText);c(f.error,f.result)}catch(f){c(f)}},i.send(JSON.stringify(t))})}}const Pd=Lc,Nd=ef,Od=nf,Ld=cf,Ud=Tf,qd=Of,Hd=Hf;class Jd extends Pd{constructor(t){if(super({pollingInterval:t.pollingInterval||8e3}),this.bridge="https://bridge.walletconnect.org",this.qrcode=!0,this.qrcodeModal=vd,this.qrcodeModalOptions=void 0,this.rpc=null,this.infuraId="",this.http=null,this.isConnecting=!1,this.connected=!1,this.connectCallbacks=[],this.accounts=[],this.chainId=1,this.rpcUrl="",this.enable=async()=>{const r=await this.getWalletConnector();if(r)return this.start(),this.subscribeWalletConnector(),r.accounts;throw new Error("Failed to connect to WalleConnect")},this.request=async r=>this.send(r),this.send=async(r,n)=>{var i;if(typeof r=="string"){const o=r;let c=n;return o==="personal_sign"&&(c=fr(c)),this.sendAsyncPromise(o,c)}if(r=Object.assign({id:xn(),jsonrpc:"2.0"},r),r.method==="personal_sign"&&(r.params=fr(r.params)),n){this.sendAsync(r,n);return}if(r.method==="eth_signTypedData_v4"&&((i=this.walletMeta)===null||i===void 0?void 0:i.name)==="MetaMask"){const{result:o}=await this.handleOtherRequests(r);return o}else return this.sendAsyncPromise(r.method,r.params)},this.onConnect=r=>{this.connectCallbacks.push(r)},this.triggerConnect=r=>{this.connectCallbacks&&this.connectCallbacks.length&&this.connectCallbacks.forEach(n=>n(r))},this.bridge=t.connector?t.connector.bridge:t.bridge||"https://bridge.walletconnect.org",this.qrcode=typeof t.qrcode>"u"||t.qrcode!==!1,this.qrcodeModal=t.qrcodeModal||this.qrcodeModal,this.qrcodeModalOptions=t.qrcodeModalOptions,this.wc=t.connector||new uh({bridge:this.bridge,qrcodeModal:this.qrcode?this.qrcodeModal:void 0,qrcodeModalOptions:this.qrcodeModalOptions,storageId:t==null?void 0:t.storageId,signingMethods:t==null?void 0:t.signingMethods,clientMeta:t==null?void 0:t.clientMeta}),this.rpc=t.rpc||null,!this.rpc&&(!t.infuraId||typeof t.infuraId!="string"||!t.infuraId.trim()))throw new Error("Missing one of the required parameters: rpc or infuraId");this.infuraId=t.infuraId||"",this.chainId=(t==null?void 0:t.chainId)||this.chainId,this.initialize()}get isWalletConnect(){return!0}get connector(){return this.wc}get walletMeta(){return this.wc.peerMeta}async disconnect(){this.close()}async close(){await(await this.getWalletConnector({disableSessionCreation:!0})).killSession(),await this.onDisconnect()}async handleRequest(t){try{let r,n=null;const i=await this.getWalletConnector();switch(t.method){case"wc_killSession":await this.close(),n=null;break;case"eth_accounts":n=i.accounts;break;case"eth_coinbase":n=i.accounts[0];break;case"eth_chainId":n=i.chainId;break;case"net_version":n=i.chainId;break;case"eth_uninstallFilter":this.sendAsync(t,o=>o),n=!0;break;default:r=await this.handleOtherRequests(t)}return r||this.formatResponse(t,n)}catch(r){throw this.emit("error",r),r}}async handleOtherRequests(t){if(!Qn.includes(t.method)&&t.method.startsWith("eth_"))return this.handleReadRequests(t);const n=await(await this.getWalletConnector()).sendCustomRequest(t);return this.formatResponse(t,n)}async handleReadRequests(t){if(!this.http){const r=new Error("HTTP Connection not available");throw this.emit("error",r),r}return this.http.send(t)}formatResponse(t,r){return{id:t.id,jsonrpc:t.jsonrpc,result:r}}getWalletConnector(t={}){const{disableSessionCreation:r=!1}=t;return new Promise((n,i)=>{const o=this.wc;this.isConnecting?this.onConnect(c=>n(c)):!o.connected&&!r?(this.isConnecting=!0,o.on("modal_closed",()=>{i(new Error("User closed modal"))}),o.createSession({chainId:this.chainId}).then(()=>{o.on("connect",(c,f)=>{if(c)return this.isConnecting=!1,i(c);this.isConnecting=!1,this.connected=!0,f&&this.updateState(f.params[0]),this.emit("connect"),this.triggerConnect(o),n(o)})}).catch(c=>{this.isConnecting=!1,i(c)})):(this.connected||(this.connected=!0,this.updateState(o.session)),n(o))})}async subscribeWalletConnector(){const t=await this.getWalletConnector();t.on("disconnect",r=>{if(r){this.emit("error",r);return}this.onDisconnect()}),t.on("session_update",(r,n)=>{if(r){this.emit("error",r);return}this.updateState(n.params[0])})}async onDisconnect(){await this.stop(),this.emit("close",1e3,"Connection closed"),this.emit("disconnect",1e3,"Connection disconnected"),this.connected=!1}async updateState(t){const{accounts:r,chainId:n,networkId:i,rpcUrl:o}=t;(!this.accounts||r&&this.accounts!==r)&&(this.accounts=r,this.emit("accountsChanged",r)),(!this.chainId||n&&this.chainId!==n)&&(this.chainId=n,this.emit("chainChanged",n)),(!this.networkId||i&&this.networkId!==i)&&(this.networkId=i,this.emit("networkChanged",i)),this.updateRpcUrl(this.chainId,o||"")}updateRpcUrl(t,r=""){const n={infuraId:this.infuraId,custom:this.rpc||void 0};r=r||nl(t,n),r?(this.rpcUrl=r,this.updateHttpConnection()):this.emit("error",new Error(`No RPC Url available for chainId: ${t}`))}updateHttpConnection(){this.rpcUrl&&(this.http=new Id(this.rpcUrl),this.http.on("payload",t=>this.emit("payload",t)),this.http.on("error",t=>this.emit("error",t)))}sendAsyncPromise(t,r){return new Promise((n,i)=>{this.sendAsync({id:xn(),jsonrpc:"2.0",method:t,params:r||[]},(o,c)=>{if(o){i(o);return}n(c.result)})})}initialize(){this.updateRpcUrl(this.chainId),this.addProvider(new Od({eth_hashrate:"0x00",eth_mining:!1,eth_syncing:!0,net_listening:!0,web3_clientVersion:"WalletConnect/v1.x.x/javascript"})),this.addProvider(new Nd),this.addProvider(new Hd),this.addProvider(new Ld),this.addProvider(new qd),this.addProvider(new Ud(this.configWallet())),this.addProvider({handleRequest:async(t,r,n)=>{try{const{error:i,result:o}=await this.handleRequest(t);n(i,o)}catch(i){n(i)}},setEngine:t=>t})}configWallet(){return{getAccounts:async t=>{try{const n=(await this.getWalletConnector()).accounts;n&&n.length?t(null,n):t(new Error("Failed to get accounts"))}catch(r){t(r)}},processMessage:async(t,r)=>{try{const i=await(await this.getWalletConnector()).signMessage([t.from,t.data]);r(null,i)}catch(n){r(n)}},processPersonalMessage:async(t,r)=>{try{const i=await(await this.getWalletConnector()).signPersonalMessage([t.data,t.from]);r(null,i)}catch(n){r(n)}},processSignTransaction:async(t,r)=>{try{const i=await(await this.getWalletConnector()).signTransaction(t);r(null,i)}catch(n){r(n)}},processTransaction:async(t,r)=>{try{const i=await(await this.getWalletConnector()).sendTransaction(t);r(null,i)}catch(n){r(n)}},processTypedMessage:async(t,r)=>{try{const i=await(await this.getWalletConnector()).signTypedData([t.from,t.data]);r(null,i)}catch(n){r(n)}}}}}export{Jd as default};
